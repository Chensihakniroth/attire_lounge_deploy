{
  "version": 3,
  "sources": ["../../resources/js/components/pages/admin/AdminContext.jsx"],
  "sourcesContent": ["import React, { createContext, useState, useContext, useCallback } from 'react';\nimport axios from 'axios';\n\nconst AdminContext = createContext();\n\nexport const useAdmin = () => useContext(AdminContext);\n\nexport const AdminProvider = ({ children }) => {\n    // State for Appointments\n    const [appointments, setAppointments] = useState([]);\n    const [appointmentsLoaded, setAppointmentsLoaded] = useState(false);\n    const [appointmentsLoading, setAppointmentsLoading] = useState(false);\n\n    // State for Gift Requests\n    const [giftRequests, setGiftRequests] = useState([]);\n    const [giftRequestsLoaded, setGiftRequestsLoaded] = useState(false);\n    const [giftRequestsLoading, setGiftRequestsLoading] = useState(false);\n\n    // Global Stats (derived or fetched)\n    const [stats, setStats] = useState({ appointments: 0, gifts: 0 });\n\n    // --- Appointments Logic ---\n    const fetchAppointments = useCallback(async (forceRefresh = false) => {\n        // If we already have data and aren't forcing a refresh, just return (or fetch in background)\n        if (appointmentsLoaded && !forceRefresh) {\n            // Background update (stale-while-revalidate)\n            fetchAppointmentsBackground();\n            return;\n        }\n\n        setAppointmentsLoading(true);\n        try {\n            const response = await axios.get('/api/v1/admin/appointments');\n            // Assuming backend already sorts, but we can ensure consistency here if needed\n            setAppointments(response.data);\n            setAppointmentsLoaded(true);\n            updateStats({ appointments: response.data.length });\n        } catch (err) {\n            console.error('Error fetching appointments:', err);\n        } finally {\n            setAppointmentsLoading(false);\n        }\n    }, [appointmentsLoaded]);\n\n    const fetchAppointmentsBackground = async () => {\n        try {\n            const response = await axios.get('/api/v1/admin/appointments');\n            setAppointments(response.data);\n            updateStats({ appointments: response.data.length });\n        } catch (err) {\n            console.error('Error refreshing appointments:', err);\n        }\n    };\n\n    const updateAppointmentStatus = async (id, status) => {\n        // Optimistic update\n        const previous = [...appointments];\n        setAppointments(prev => prev.map(app => app.id === id ? { ...app, status } : app));\n\n        try {\n            await axios.patch(`/api/v1/admin/appointments/${id}/status`, { status });\n            // Optionally update with server response\n        } catch (err) {\n            console.error('Failed to update status:', err);\n            setAppointments(previous); // Revert\n            throw err;\n        }\n    };\n\n    const clearCompletedAppointments = async () => {\n        const previous = [...appointments];\n        setAppointments(prev => prev.filter(app => app.status !== 'done'));\n        try {\n            await axios.post('/api/v1/admin/appointments/clear-completed');\n        } catch (err) {\n            setAppointments(previous);\n            throw err;\n        }\n    };\n\n    // --- Gift Requests Logic ---\n    const fetchGiftRequests = useCallback(async (forceRefresh = false) => {\n        if (giftRequestsLoaded && !forceRefresh) {\n            fetchGiftRequestsBackground();\n            return;\n        }\n\n        setGiftRequestsLoading(true);\n        try {\n            const response = await axios.get('/api/v1/gift-requests');\n            setGiftRequests(response.data);\n            setGiftRequestsLoaded(true);\n            updateStats({ gifts: response.data.length });\n        } catch (err) {\n            console.error('Error fetching gift requests:', err);\n        } finally {\n            setGiftRequestsLoading(false);\n        }\n    }, [giftRequestsLoaded]);\n\n    const fetchGiftRequestsBackground = async () => {\n        try {\n            const response = await axios.get('/api/v1/gift-requests');\n            setGiftRequests(response.data);\n            updateStats({ gifts: response.data.length });\n        } catch (err) {\n            console.error('Error refreshing gift requests:', err);\n        }\n    };\n\n    const updateGiftRequestStatus = async (id, status) => {\n        const previous = [...giftRequests];\n        setGiftRequests(prev => prev.map(req => req.id === id ? { ...req, status } : req));\n        try {\n            await axios.patch(`/api/v1/gift-requests/${id}/status`, { status });\n        } catch (err) {\n            setGiftRequests(previous);\n            throw err;\n        }\n    };\n\n    const deleteGiftRequest = async (id) => {\n        const previous = [...giftRequests];\n        setGiftRequests(prev => prev.filter(req => req.id !== id));\n        try {\n            await axios.delete(`/api/v1/gift-requests/${id}`);\n        } catch (err) {\n            setGiftRequests(previous);\n            throw err;\n        }\n    };\n\n    // --- Stats Helper ---\n    const updateStats = (newStats) => {\n        setStats(prev => ({ ...prev, ...newStats }));\n    };\n\n    return (\n        <AdminContext.Provider value={{\n            appointments,\n            appointmentsLoading,\n            fetchAppointments,\n            updateAppointmentStatus,\n            clearCompletedAppointments,\n            \n            giftRequests,\n            giftRequestsLoading,\n            fetchGiftRequests,\n            updateGiftRequestStatus,\n            deleteGiftRequest,\n\n            stats\n        }}>\n            {children}\n        </AdminContext.Provider>\n    );\n};\n"],
  "mappings": ";;;;;;;;;AAAA,mBAAwE;AAGxE,IAAM,mBAAe,4BAAc;AAE5B,IAAM,WAAW,UAAM,yBAAW,YAAY;AAE9C,IAAM,gBAAgB,CAAC,EAAE,SAAS,MAAM;AAE3C,QAAM,CAAC,cAAc,eAAe,QAAI,uBAAS,CAAC,CAAC;AACnD,QAAM,CAAC,oBAAoB,qBAAqB,QAAI,uBAAS,KAAK;AAClE,QAAM,CAAC,qBAAqB,sBAAsB,QAAI,uBAAS,KAAK;AAGpE,QAAM,CAAC,cAAc,eAAe,QAAI,uBAAS,CAAC,CAAC;AACnD,QAAM,CAAC,oBAAoB,qBAAqB,QAAI,uBAAS,KAAK;AAClE,QAAM,CAAC,qBAAqB,sBAAsB,QAAI,uBAAS,KAAK;AAGpE,QAAM,CAAC,OAAO,QAAQ,QAAI,uBAAS,EAAE,cAAc,GAAG,OAAO,EAAE,CAAC;AAGhE,QAAM,wBAAoB,0BAAY,OAAO,eAAe,UAAU;AAElE,QAAI,sBAAsB,CAAC,cAAc;AAErC,kCAA4B;AAC5B;AAAA,IACJ;AAEA,2BAAuB,IAAI;AAC3B,QAAI;AACA,YAAM,WAAW,MAAM,cAAM,IAAI,4BAA4B;AAE7D,sBAAgB,SAAS,IAAI;AAC7B,4BAAsB,IAAI;AAC1B,kBAAY,EAAE,cAAc,SAAS,KAAK,OAAO,CAAC;AAAA,IACtD,SAAS,KAAK;AACV,cAAQ,MAAM,gCAAgC,GAAG;AAAA,IACrD,UAAE;AACE,6BAAuB,KAAK;AAAA,IAChC;AAAA,EACJ,GAAG,CAAC,kBAAkB,CAAC;AAEvB,QAAM,8BAA8B,YAAY;AAC5C,QAAI;AACA,YAAM,WAAW,MAAM,cAAM,IAAI,4BAA4B;AAC7D,sBAAgB,SAAS,IAAI;AAC7B,kBAAY,EAAE,cAAc,SAAS,KAAK,OAAO,CAAC;AAAA,IACtD,SAAS,KAAK;AACV,cAAQ,MAAM,kCAAkC,GAAG;AAAA,IACvD;AAAA,EACJ;AAEA,QAAM,0BAA0B,OAAO,IAAI,WAAW;AAElD,UAAM,WAAW,CAAC,GAAG,YAAY;AACjC,oBAAgB,UAAQ,KAAK,IAAI,SAAO,IAAI,OAAO,KAAK,EAAE,GAAG,KAAK,OAAO,IAAI,GAAG,CAAC;AAEjF,QAAI;AACA,YAAM,cAAM,MAAM,8BAA8B,EAAE,WAAW,EAAE,OAAO,CAAC;AAAA,IAE3E,SAAS,KAAK;AACV,cAAQ,MAAM,4BAA4B,GAAG;AAC7C,sBAAgB,QAAQ;AACxB,YAAM;AAAA,IACV;AAAA,EACJ;AAEA,QAAM,6BAA6B,YAAY;AAC3C,UAAM,WAAW,CAAC,GAAG,YAAY;AACjC,oBAAgB,UAAQ,KAAK,OAAO,SAAO,IAAI,WAAW,MAAM,CAAC;AACjE,QAAI;AACA,YAAM,cAAM,KAAK,4CAA4C;AAAA,IACjE,SAAS,KAAK;AACV,sBAAgB,QAAQ;AACxB,YAAM;AAAA,IACV;AAAA,EACJ;AAGA,QAAM,wBAAoB,0BAAY,OAAO,eAAe,UAAU;AAClE,QAAI,sBAAsB,CAAC,cAAc;AACrC,kCAA4B;AAC5B;AAAA,IACJ;AAEA,2BAAuB,IAAI;AAC3B,QAAI;AACA,YAAM,WAAW,MAAM,cAAM,IAAI,uBAAuB;AACxD,sBAAgB,SAAS,IAAI;AAC7B,4BAAsB,IAAI;AAC1B,kBAAY,EAAE,OAAO,SAAS,KAAK,OAAO,CAAC;AAAA,IAC/C,SAAS,KAAK;AACV,cAAQ,MAAM,iCAAiC,GAAG;AAAA,IACtD,UAAE;AACE,6BAAuB,KAAK;AAAA,IAChC;AAAA,EACJ,GAAG,CAAC,kBAAkB,CAAC;AAEvB,QAAM,8BAA8B,YAAY;AAC5C,QAAI;AACA,YAAM,WAAW,MAAM,cAAM,IAAI,uBAAuB;AACxD,sBAAgB,SAAS,IAAI;AAC7B,kBAAY,EAAE,OAAO,SAAS,KAAK,OAAO,CAAC;AAAA,IAC/C,SAAS,KAAK;AACV,cAAQ,MAAM,mCAAmC,GAAG;AAAA,IACxD;AAAA,EACJ;AAEA,QAAM,0BAA0B,OAAO,IAAI,WAAW;AAClD,UAAM,WAAW,CAAC,GAAG,YAAY;AACjC,oBAAgB,UAAQ,KAAK,IAAI,SAAO,IAAI,OAAO,KAAK,EAAE,GAAG,KAAK,OAAO,IAAI,GAAG,CAAC;AACjF,QAAI;AACA,YAAM,cAAM,MAAM,yBAAyB,EAAE,WAAW,EAAE,OAAO,CAAC;AAAA,IACtE,SAAS,KAAK;AACV,sBAAgB,QAAQ;AACxB,YAAM;AAAA,IACV;AAAA,EACJ;AAEA,QAAM,oBAAoB,OAAO,OAAO;AACpC,UAAM,WAAW,CAAC,GAAG,YAAY;AACjC,oBAAgB,UAAQ,KAAK,OAAO,SAAO,IAAI,OAAO,EAAE,CAAC;AACzD,QAAI;AACA,YAAM,cAAM,OAAO,yBAAyB,EAAE,EAAE;AAAA,IACpD,SAAS,KAAK;AACV,sBAAgB,QAAQ;AACxB,YAAM;AAAA,IACV;AAAA,EACJ;AAGA,QAAM,cAAc,CAAC,aAAa;AAC9B,aAAS,WAAS,EAAE,GAAG,MAAM,GAAG,SAAS,EAAE;AAAA,EAC/C;AAEA,SACI,6BAAAA,QAAA,cAAC,aAAa,UAAb,EAAsB,OAAO;AAAA,IAC1B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IAEA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IAEA;AAAA,EACJ,KACK,QACL;AAER;",
  "names": ["React"]
}
