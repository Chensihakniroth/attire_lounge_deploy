{
  "version": 3,
  "sources": ["../../resources/js/components/pages/admin/AppointmentManager.jsx"],
  "sourcesContent": ["import React, { useState, useEffect, useContext } from 'react';\nimport { User, Mail, Phone, Calendar, Clock, MessageSquare, AlertTriangle, Loader, Check, X, Trash2 } from 'lucide-react';\nimport { ThemeContext } from './ThemeContext';\nimport { useAdmin } from './AdminContext';\n\nconst AppointmentRow = ({ appointment, onUpdateStatus, colors }) => {\n    const statusConfig = {\n        pending: { label: 'Pending', color: 'text-yellow-400', bg: 'bg-yellow-400/10', border: 'border-yellow-400/20' },\n        done: { label: 'Completed', color: 'text-green-400', bg: 'bg-green-400/10', border: 'border-green-400/20' },\n        cancelled: { label: 'Cancelled', color: 'text-red-400', bg: 'bg-red-400/10', border: 'border-red-400/20' },\n    };\n\n    const status = statusConfig[appointment.status] || statusConfig.pending;\n\n    const formatTime = (timeStr) => {\n        if (!timeStr) return '';\n        const [hours] = timeStr.split(':');\n        let h = parseInt(hours, 10);\n        const ampm = h >= 12 ? 'PM' : 'AM';\n        h = h % 12;\n        h = h ? h : 12;\n        return `${h}${ampm}`;\n    };\n\n    return (\n        <div className={`p-6 rounded-3xl backdrop-blur-xl bg-black/20 border border-white/10 shadow-lg transition-all duration-300 hover:bg-black/30 hover:border-white/20 group`}>\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 pb-4 mb-4 border-b border-white/5\">\n                <div className=\"flex items-center gap-4\">\n                    <div className=\"h-12 w-12 rounded-full bg-white/5 flex items-center justify-center border border-white/5\">\n                        <User className=\"w-5 h-5 text-attire-silver group-hover:text-attire-accent transition-colors\" />\n                    </div>\n                    <div>\n                        <h3 className=\"text-xl font-serif text-white\">{appointment.name}</h3>\n                        <p className=\"text-xs text-attire-silver/60 uppercase tracking-wider font-medium\">{appointment.service}</p>\n                    </div>\n                </div>\n                <span className={`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider border ${status.color} ${status.bg} ${status.border}`}>\n                    {status.label}\n                </span>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-12 gap-6\">\n                <div className=\"md:col-span-4 space-y-3\">\n                    <div className=\"flex items-center text-attire-silver/80 group-hover:text-white transition-colors\">\n                        <Mail className=\"w-4 h-4 mr-3 text-attire-silver/40\" />\n                        <a href={`mailto:${appointment.email}`} className=\"hover:text-attire-accent hover:underline truncate text-sm transition-colors\">{appointment.email}</a>\n                    </div>\n                    <div className=\"flex items-center text-attire-silver/80 group-hover:text-white transition-colors\">\n                        <Phone className=\"w-4 h-4 mr-3 text-attire-silver/40\" />\n                        <span className=\"text-sm\">{appointment.phone}</span>\n                    </div>\n                    <div className=\"flex items-center text-attire-silver/80 pt-3 border-t border-white/5 mt-3\">\n                        <Calendar className=\"w-4 h-4 mr-3 text-attire-silver/40\" />\n                        <span className=\"text-sm font-medium\">{new Date(appointment.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })} <span className=\"text-white/20 mx-1\">|</span> {formatTime(appointment.time)}</span>\n                    </div>\n                </div>\n\n                <div className=\"md:col-span-8 space-y-4\">\n                    {appointment.message && (\n                        <div className=\"bg-white/5 p-4 rounded-xl border border-white/5\">\n                            <div className=\"flex items-start gap-3\">\n                                <MessageSquare className=\"w-4 h-4 text-attire-accent mt-1 flex-shrink-0\" />\n                                <div>\n                                    <p className=\"text-xs font-bold text-attire-silver/50 uppercase tracking-widest mb-1\">Request Details</p>\n                                    <p className=\"text-sm text-attire-cream italic leading-relaxed\">\"{appointment.message}\"</p>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n                    \n                    {appointment.favorite_item_image_url && appointment.favorite_item_image_url.length > 0 && (\n                        <div>\n                            <p className=\"text-xs font-bold text-attire-silver/50 uppercase tracking-widest mb-3\">Selected Favorites</p>\n                            <div className=\"flex gap-4 overflow-x-auto pb-2 [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]\">\n                                {appointment.favorite_item_image_url.map((item, index) => {\n                                    const isObject = typeof item === 'object' && item !== null;\n                                    const imageUrl = isObject ? item.image : item;\n                                    const name = isObject ? item.name : `Item ${index + 1}`;\n\n                                    return (\n                                        <div key={index} className=\"flex flex-col items-center min-w-[80px]\">\n                                            <div className=\"h-16 w-16 rounded-lg overflow-hidden border border-white/10 mb-2 relative group/img\">\n                                                <img\n                                                    src={imageUrl}\n                                                    alt={name}\n                                                    className=\"w-full h-full object-cover transition-transform duration-500 group-hover/img:scale-110\"\n                                                />\n                                            </div>\n                                            <p className=\"text-[10px] text-white text-center font-medium truncate w-full max-w-[80px]\" title={name}>{name}</p>\n                                        </div>\n                                    );\n                                })}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            <div className=\"mt-6 pt-4 border-t border-white/5 flex justify-end gap-3\">\n                <button \n                    onClick={() => onUpdateStatus(appointment.id, 'done')} \n                    disabled={appointment.status === 'done'} \n                    className=\"px-4 py-2 text-xs font-bold uppercase tracking-widest text-green-400 bg-green-400/10 border border-green-400/20 rounded-xl hover:bg-green-400/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2\"\n                >\n                    <Check className=\"w-4 h-4\" /> Complete\n                </button>\n                <button \n                    onClick={() => onUpdateStatus(appointment.id, 'cancelled')} \n                    disabled={appointment.status === 'cancelled'} \n                    className=\"px-4 py-2 text-xs font-bold uppercase tracking-widest text-red-400 bg-red-400/10 border border-red-400/20 rounded-xl hover:bg-red-400/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2\"\n                >\n                    <X className=\"w-4 h-4\" /> Cancel\n                </button>\n            </div>\n        </div>\n    );\n};\n\nconst AppointmentManager = () => {\n    const { colors } = useContext(ThemeContext);\n    const { \n        appointments, \n        appointmentsLoading, \n        fetchAppointments, \n        updateAppointmentStatus, \n        clearCompletedAppointments \n    } = useAdmin();\n\n    useEffect(() => {\n        fetchAppointments(); // Use context fetcher which handles caching\n        const intervalId = setInterval(() => fetchAppointments(false), 60000); \n        return () => clearInterval(intervalId);\n    }, [fetchAppointments]);\n\n    const handleUpdateStatus = async (id, status) => {\n        try {\n            await updateAppointmentStatus(id, status);\n        } catch (err) {\n            alert('Failed to update status. Please try again.');\n        }\n    };\n\n    const handleClearCompleted = async () => {\n        if (window.confirm('Are you sure you want to clear all \"done\" appointments? This action cannot be undone.')) {\n            try {\n                await clearCompletedAppointments();\n            } catch (err) {\n                alert('Failed to clear completed appointments. Please try again.');\n            }\n        }\n    };\n\n    const renderContent = () => {\n        if (appointmentsLoading && appointments.length === 0) {\n            return <div className=\"flex justify-center items-center h-64\"><Loader className=\"animate-spin text-attire-accent\" size={48} /></div>;\n        }\n\n        if (appointments.length === 0 && !appointmentsLoading) {\n             return (\n                <div className=\"text-center py-20 bg-black/20 rounded-3xl border border-white/5\">\n                    <div className=\"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4\">\n                        <Calendar className=\"text-attire-silver/30\" />\n                    </div>\n                    <p className=\"text-attire-silver/60\">No pending appointments.</p>\n                </div>\n             );\n        }\n\n        return (\n            <div className=\"space-y-6\">\n                {appointments.map(app => {\n                    let imageUrls = [];\n                    try {\n                        if (typeof app.favorite_item_image_url === 'string') {\n                            const parsed = JSON.parse(app.favorite_item_image_url);\n                            imageUrls = Array.isArray(parsed) ? parsed : [];\n                        } else if (Array.isArray(app.favorite_item_image_url)) {\n                            imageUrls = app.favorite_item_image_url;\n                        }\n                    } catch (e) {}\n                    const appointmentWithImages = { ...app, favorite_item_image_url: imageUrls };\n                    \n                    return (\n                        <AppointmentRow \n                            key={app.id} \n                            appointment={appointmentWithImages} \n                            onUpdateStatus={handleUpdateStatus} \n                            colors={colors} \n                        />\n                    );\n                })}\n            </div>\n        );\n    };\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"flex justify-between items-end pb-4 border-b border-white/10\">\n                <div>\n                    <h1 className=\"text-4xl font-serif text-white mb-2\">Appointments</h1>\n                    <p className=\"text-attire-silver text-sm\">Manage styling consultations and visits.</p>\n                </div>\n                <button\n                    onClick={handleClearCompleted}\n                    className=\"flex items-center px-5 py-2.5 text-xs font-bold uppercase tracking-widest text-attire-silver hover:text-red-400 bg-white/5 hover:bg-red-500/10 border border-white/10 hover:border-red-500/30 rounded-xl transition-all duration-300 group\"\n                >\n                    <Trash2 className=\"w-4 h-4 mr-2 opacity-50 group-hover:opacity-100 transition-opacity\" />\n                    Clear History\n                </button>\n            </div>\n            {renderContent()}\n        </div>\n    );\n};\n\nexport default AppointmentManager;"],
  "mappings": "2PAAA,IAAAA,EAAuD,OAKvD,IAAMC,EAAiB,CAAC,CAAE,YAAAC,EAAa,eAAAC,EAAgB,OAAAC,CAAO,IAAM,CAChE,IAAMC,EAAe,CACjB,QAAS,CAAE,MAAO,UAAW,MAAO,kBAAmB,GAAI,mBAAoB,OAAQ,sBAAuB,EAC9G,KAAM,CAAE,MAAO,YAAa,MAAO,iBAAkB,GAAI,kBAAmB,OAAQ,qBAAsB,EAC1G,UAAW,CAAE,MAAO,YAAa,MAAO,eAAgB,GAAI,gBAAiB,OAAQ,mBAAoB,CAC7G,EAEMC,EAASD,EAAaH,EAAY,MAAM,GAAKG,EAAa,QAE1DE,EAAcC,GAAY,CAC5B,GAAI,CAACA,EAAS,MAAO,GACrB,GAAM,CAACC,CAAK,EAAID,EAAQ,MAAM,GAAG,EAC7BE,EAAI,SAASD,EAAO,EAAE,EACpBE,EAAOD,GAAK,GAAK,KAAO,KAC9B,OAAAA,EAAIA,EAAI,GACRA,EAAIA,GAAQ,GACL,GAAGA,CAAC,GAAGC,CAAI,EACtB,EAEA,OACI,EAAAC,QAAA,cAAC,OAAI,UAAW,2JACZ,EAAAA,QAAA,cAAC,OAAI,UAAU,qGACX,EAAAA,QAAA,cAAC,OAAI,UAAU,2BACX,EAAAA,QAAA,cAAC,OAAI,UAAU,4FACX,EAAAA,QAAA,cAACC,EAAA,CAAK,UAAU,8EAA8E,CAClG,EACA,EAAAD,QAAA,cAAC,WACG,EAAAA,QAAA,cAAC,MAAG,UAAU,iCAAiCV,EAAY,IAAK,EAChE,EAAAU,QAAA,cAAC,KAAE,UAAU,sEAAsEV,EAAY,OAAQ,CAC3G,CACJ,EACA,EAAAU,QAAA,cAAC,QAAK,UAAW,8EAA8EN,EAAO,KAAK,IAAIA,EAAO,EAAE,IAAIA,EAAO,MAAM,IACpIA,EAAO,KACZ,CACJ,EAEA,EAAAM,QAAA,cAAC,OAAI,UAAU,0CACX,EAAAA,QAAA,cAAC,OAAI,UAAU,2BACX,EAAAA,QAAA,cAAC,OAAI,UAAU,oFACX,EAAAA,QAAA,cAACE,EAAA,CAAK,UAAU,qCAAqC,EACrD,EAAAF,QAAA,cAAC,KAAE,KAAM,UAAUV,EAAY,KAAK,GAAI,UAAU,+EAA+EA,EAAY,KAAM,CACvJ,EACA,EAAAU,QAAA,cAAC,OAAI,UAAU,oFACX,EAAAA,QAAA,cAACG,EAAA,CAAM,UAAU,qCAAqC,EACtD,EAAAH,QAAA,cAAC,QAAK,UAAU,WAAWV,EAAY,KAAM,CACjD,EACA,EAAAU,QAAA,cAAC,OAAI,UAAU,6EACX,EAAAA,QAAA,cAACI,EAAA,CAAS,UAAU,qCAAqC,EACzD,EAAAJ,QAAA,cAAC,QAAK,UAAU,uBAAuB,IAAI,KAAKV,EAAY,IAAI,EAAE,mBAAmB,QAAS,CAAE,KAAM,UAAW,MAAO,OAAQ,IAAK,SAAU,CAAC,EAAE,IAAC,EAAAU,QAAA,cAAC,QAAK,UAAU,sBAAqB,GAAC,EAAO,IAAEL,EAAWL,EAAY,IAAI,CAAE,CACnO,CACJ,EAEA,EAAAU,QAAA,cAAC,OAAI,UAAU,2BACVV,EAAY,SACT,EAAAU,QAAA,cAAC,OAAI,UAAU,mDACX,EAAAA,QAAA,cAAC,OAAI,UAAU,0BACX,EAAAA,QAAA,cAACK,EAAA,CAAc,UAAU,gDAAgD,EACzE,EAAAL,QAAA,cAAC,WACG,EAAAA,QAAA,cAAC,KAAE,UAAU,0EAAyE,iBAAe,EACrG,EAAAA,QAAA,cAAC,KAAE,UAAU,oDAAmD,IAAEV,EAAY,QAAQ,GAAC,CAC3F,CACJ,CACJ,EAGHA,EAAY,yBAA2BA,EAAY,wBAAwB,OAAS,GACjF,EAAAU,QAAA,cAAC,WACG,EAAAA,QAAA,cAAC,KAAE,UAAU,0EAAyE,oBAAkB,EACxG,EAAAA,QAAA,cAAC,OAAI,UAAU,kHACVV,EAAY,wBAAwB,IAAI,CAACgB,EAAMC,IAAU,CACtD,IAAMC,EAAW,OAAOF,GAAS,UAAYA,IAAS,KAChDG,EAAWD,EAAWF,EAAK,MAAQA,EACnCI,EAAOF,EAAWF,EAAK,KAAO,QAAQC,EAAQ,CAAC,GAErD,OACI,EAAAP,QAAA,cAAC,OAAI,IAAKO,EAAO,UAAU,2CACvB,EAAAP,QAAA,cAAC,OAAI,UAAU,uFACX,EAAAA,QAAA,cAAC,OACG,IAAKS,EACL,IAAKC,EACL,UAAU,yFACd,CACJ,EACA,EAAAV,QAAA,cAAC,KAAE,UAAU,8EAA8E,MAAOU,GAAOA,CAAK,CAClH,CAER,CAAC,CACL,CACJ,CAER,CACJ,EAEA,EAAAV,QAAA,cAAC,OAAI,UAAU,4DACX,EAAAA,QAAA,cAAC,UACG,QAAS,IAAMT,EAAeD,EAAY,GAAI,MAAM,EACpD,SAAUA,EAAY,SAAW,OACjC,UAAU,2OAEV,EAAAU,QAAA,cAACW,EAAA,CAAM,UAAU,UAAU,EAAE,WACjC,EACA,EAAAX,QAAA,cAAC,UACG,QAAS,IAAMT,EAAeD,EAAY,GAAI,WAAW,EACzD,SAAUA,EAAY,SAAW,YACjC,UAAU,mOAEV,EAAAU,QAAA,cAACY,EAAA,CAAE,UAAU,UAAU,EAAE,SAC7B,CACJ,CACJ,CAER,EAEMC,EAAqB,IAAM,CAC7B,GAAM,CAAE,OAAArB,CAAO,KAAI,cAAWsB,CAAY,EACpC,CACF,aAAAC,EACA,oBAAAC,EACA,kBAAAC,EACA,wBAAAC,EACA,2BAAAC,CACJ,EAAIC,EAAS,KAEb,aAAU,IAAM,CACZH,EAAkB,EAClB,IAAMI,EAAa,YAAY,IAAMJ,EAAkB,EAAK,EAAG,GAAK,EACpE,MAAO,IAAM,cAAcI,CAAU,CACzC,EAAG,CAACJ,CAAiB,CAAC,EAEtB,IAAMK,EAAqB,MAAOC,EAAI7B,IAAW,CAC7C,GAAI,CACA,MAAMwB,EAAwBK,EAAI7B,CAAM,CAC5C,MAAc,CACV,MAAM,4CAA4C,CACtD,CACJ,EAuDA,OACI,EAAAM,QAAA,cAAC,OAAI,UAAU,aACX,EAAAA,QAAA,cAAC,OAAI,UAAU,gEACX,EAAAA,QAAA,cAAC,WACG,EAAAA,QAAA,cAAC,MAAG,UAAU,uCAAsC,cAAY,EAChE,EAAAA,QAAA,cAAC,KAAE,UAAU,8BAA6B,0CAAwC,CACtF,EACA,EAAAA,QAAA,cAAC,UACG,QA7Da,SAAY,CACrC,GAAI,OAAO,QAAQ,uFAAuF,EACtG,GAAI,CACA,MAAMmB,EAA2B,CACrC,MAAc,CACV,MAAM,2DAA2D,CACrE,CAER,EAsDgB,UAAU,8OAEV,EAAAnB,QAAA,cAACwB,EAAA,CAAO,UAAU,qEAAqE,EAAE,eAE7F,CACJ,EAxDAR,GAAuBD,EAAa,SAAW,EACxC,EAAAf,QAAA,cAAC,OAAI,UAAU,yCAAwC,EAAAA,QAAA,cAACyB,EAAA,CAAO,UAAU,kCAAkC,KAAM,GAAI,CAAE,EAG9HV,EAAa,SAAW,GAAK,CAACC,EAE1B,EAAAhB,QAAA,cAAC,OAAI,UAAU,mEACX,EAAAA,QAAA,cAAC,OAAI,UAAU,mFACX,EAAAA,QAAA,cAACI,EAAA,CAAS,UAAU,wBAAwB,CAChD,EACA,EAAAJ,QAAA,cAAC,KAAE,UAAU,yBAAwB,0BAAwB,CACjE,EAKJ,EAAAA,QAAA,cAAC,OAAI,UAAU,aACVe,EAAa,IAAIW,GAAO,CACrB,IAAIC,EAAY,CAAC,EACjB,GAAI,CACA,GAAI,OAAOD,EAAI,yBAA4B,SAAU,CACjD,IAAME,EAAS,KAAK,MAAMF,EAAI,uBAAuB,EACrDC,EAAY,MAAM,QAAQC,CAAM,EAAIA,EAAS,CAAC,CAClD,MAAW,MAAM,QAAQF,EAAI,uBAAuB,IAChDC,EAAYD,EAAI,wBAExB,MAAY,CAAC,CACb,IAAMG,EAAwB,CAAE,GAAGH,EAAK,wBAAyBC,CAAU,EAE3E,OACI,EAAA3B,QAAA,cAACX,EAAA,CACG,IAAKqC,EAAI,GACT,YAAaG,EACb,eAAgBP,EAChB,OAAQ9B,EACZ,CAER,CAAC,CACL,CAoBJ,CAER,EAEOsC,EAAQjB",
  "names": ["import_react", "AppointmentRow", "appointment", "onUpdateStatus", "colors", "statusConfig", "status", "formatTime", "timeStr", "hours", "h", "ampm", "React", "User", "Mail", "Phone", "Calendar", "MessageSquare", "item", "index", "isObject", "imageUrl", "name", "Check", "X", "AppointmentManager", "ThemeContext", "appointments", "appointmentsLoading", "fetchAppointments", "updateAppointmentStatus", "clearCompletedAppointments", "useAdmin", "intervalId", "handleUpdateStatus", "id", "Trash2", "Loader", "app", "imageUrls", "parsed", "appointmentWithImages", "AppointmentManager_default"]
}
