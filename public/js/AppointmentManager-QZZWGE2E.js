import{a as N}from"./chunk-G75V3QUC.js";import{a as h}from"./chunk-MX2X4HZG.js";import"./chunk-7NULPFGR.js";import{A as v,C as f,G as y,H as g,K as p,d as c,g as u,t as b,w as x}from"./chunk-LBOHVSUJ.js";import{c as k,d as T}from"./chunk-G5YI4KV6.js";var e=k(T());var A=({appointment:s,onUpdateStatus:a,colors:r})=>{let l={pending:{borderLeft:`4px solid ${r.border}`,backgroundColor:r.card},done:{borderLeft:"4px solid #22c55e",backgroundColor:r.card},cancelled:{borderLeft:"4px solid #ef4444",backgroundColor:r.card}};return e.default.createElement("div",{style:l[s.status],className:"p-5 rounded-xl shadow-md transition duration-200 ease-out hover:scale-[1.01] hover:shadow-xl border border-gray-700/30 hover:border-gray-600/50"},e.default.createElement("div",{style:{borderColor:r.border},className:"flex justify-between items-center pb-3 mb-3 border-b"},e.default.createElement("div",{className:"flex items-center"},e.default.createElement(g,{style:{color:r.primary},className:"w-5 h-5 mr-3"}),e.default.createElement("h3",{style:{color:r.mainText},className:"text-lg font-semibold"},s.name)),e.default.createElement("span",{style:{backgroundColor:r.background,color:r.sidebarText},className:"text-xs font-bold uppercase px-3 py-1 rounded-full"},s.status)),e.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},e.default.createElement("div",{className:"md:col-span-1 space-y-4"},e.default.createElement("div",{style:{color:r.sidebarText},className:"flex items-center"},e.default.createElement(x,{className:"w-4 h-4 mr-3 flex-shrink-0"}),e.default.createElement("a",{href:`mailto:${s.email}`,style:{color:r.primary},className:"hover:underline truncate text-sm"},s.email)),e.default.createElement("div",{style:{color:r.sidebarText},className:"flex items-center"},e.default.createElement(f,{className:"w-4 h-4 mr-3 flex-shrink-0"}),e.default.createElement("span",{className:"text-sm"},s.phone)),e.default.createElement("div",{style:{borderColor:r.border},className:"flex items-center text-gray-600 pt-2 border-t mt-2"},e.default.createElement(c,{className:"w-4 h-4 mr-3 flex-shrink-0"}),e.default.createElement("span",{className:"text-sm font-medium"},new Date(s.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})," at ",s.time))),e.default.createElement("div",{className:"md:col-span-2 space-y-4"},e.default.createElement("div",null,e.default.createElement("p",{style:{color:r.mainText},className:"font-semibold text-sm mb-1"},"Service Requested"),e.default.createElement("p",{style:{color:r.sidebarText},className:"text-sm"},s.service)),s.message&&e.default.createElement("div",null,e.default.createElement("p",{style:{color:r.mainText},className:"font-semibold text-sm mb-1"},"Message"),e.default.createElement("div",{style:{color:r.sidebarText},className:"flex items-start text-sm"},e.default.createElement(v,{className:"w-4 h-4 mr-3 mt-0.5 flex-shrink-0"}),e.default.createElement("p",{className:"italic"},s.message))))),s.favorite_item_image_url&&s.favorite_item_image_url.length>0&&e.default.createElement("div",{className:"mt-4 pt-4 border-t"},e.default.createElement("h4",{style:{color:r.sidebarText},className:"text-sm font-semibold mb-2"},"Selected Items"),e.default.createElement("div",{className:"flex flex-wrap gap-3"},s.favorite_item_image_url.map((d,o)=>e.default.createElement("img",{key:o,src:d,alt:`Favorite Item ${o+1}`,style:{borderColor:r.border},className:"w-16 h-16 object-cover rounded-lg shadow-sm border"})))),e.default.createElement("div",{style:{borderColor:r.border},className:"mt-4 pt-4 border-t flex justify-end space-x-2"},e.default.createElement("button",{onClick:()=>a(s.id,"done"),disabled:s.status==="done",className:"px-3 py-1.5 text-xs font-semibold text-green-800 bg-green-100 rounded-md hover:bg-green-200 disabled:opacity-60 disabled:cursor-not-allowed flex items-center"},e.default.createElement(u,{className:"w-4 h-4 mr-1"})," Mark as Done"),e.default.createElement("button",{onClick:()=>a(s.id,"cancelled"),disabled:s.status==="cancelled",className:"px-3 py-1.5 text-xs font-semibold text-red-800 bg-red-100 rounded-md hover:bg-red-200 disabled:opacity-60 disabled:cursor-not-allowed flex items-center"},e.default.createElement(p,{className:"w-4 h-4 mr-1"})," Cancel")))},S=()=>{let{colors:s}=(0,e.useContext)(N),{appointments:a,appointmentsLoading:r,fetchAppointments:l,updateAppointmentStatus:d,clearCompletedAppointments:o}=h();(0,e.useEffect)(()=>{l();let t=setInterval(()=>l(!1),6e4);return()=>clearInterval(t)},[l]);let w=async(t,i)=>{try{await d(t,i)}catch{alert("Failed to update status. Please try again.")}},_=async()=>{if(window.confirm('Are you sure you want to clear all "done" appointments? This action cannot be undone.'))try{await o()}catch{alert("Failed to clear completed appointments. Please try again.")}},C=()=>r&&a.length===0?e.default.createElement("div",{className:"flex justify-center items-center h-64"},e.default.createElement(b,{style:{color:s.primary},className:"animate-spin",size:48})):a.length===0&&!r?e.default.createElement("p",{style:{color:s.sidebarText},className:"text-center"},"No appointments found."):e.default.createElement("div",{className:"space-y-4"},a.map(t=>{let i=[];try{if(typeof t.favorite_item_image_url=="string"){let m=JSON.parse(t.favorite_item_image_url);i=Array.isArray(m)?m:[]}else Array.isArray(t.favorite_item_image_url)&&(i=t.favorite_item_image_url)}catch{}let n={...t,favorite_item_image_url:i};return e.default.createElement(A,{key:t.id,appointment:n,onUpdateStatus:w,colors:s})}));return e.default.createElement("div",{className:"space-y-6"},e.default.createElement("div",{className:"flex justify-between items-center"},e.default.createElement("div",null,e.default.createElement("h1",{style:{color:s.mainText},className:"text-3xl font-bold"},"Appointment Requests"),e.default.createElement("p",{style:{color:s.sidebarText},className:"mt-1"},"Manage incoming appointment requests from customers.")),e.default.createElement("button",{onClick:_,className:"flex items-center px-4 py-2 text-sm font-medium text-gray-400 bg-gray-800 border border-gray-700 rounded-lg hover:text-red-400 hover:border-red-400/50 hover:bg-red-500/10 transition-all duration-200 shadow-sm active:scale-95 group"},e.default.createElement(y,{className:"w-4 h-4 mr-2 text-gray-500 group-hover:text-red-400 transition-colors"}),"Clear All")),C())},D=S;export{D as default};
