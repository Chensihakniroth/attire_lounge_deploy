{
  "version": 3,
  "sources": ["../../node_modules/react-dom/client.js", "../../resources/js/app.jsx", "../../resources/js/bootstrap.js", "../../resources/js/components/MainApp.jsx", "../../node_modules/lenis/package.json", "../../node_modules/lenis/packages/core/src/maths.ts", "../../node_modules/lenis/packages/core/src/animate.ts", "../../node_modules/lenis/packages/core/src/debounce.ts", "../../node_modules/lenis/packages/core/src/dimensions.ts", "../../node_modules/lenis/packages/core/src/emitter.ts", "../../node_modules/lenis/packages/core/src/virtual-scroll.ts", "../../node_modules/lenis/packages/core/src/lenis.ts", "../../resources/js/hooks/usePullToRefresh.js", "../../node_modules/@tanstack/query-core/src/subscribable.ts", "../../node_modules/@tanstack/query-core/src/timeoutManager.ts", "../../node_modules/@tanstack/query-core/src/utils.ts", "../../node_modules/@tanstack/query-core/src/focusManager.ts", "../../node_modules/@tanstack/query-core/src/thenable.ts", "../../node_modules/@tanstack/query-core/src/notifyManager.ts", "../../node_modules/@tanstack/query-core/src/onlineManager.ts", "../../node_modules/@tanstack/query-core/src/retryer.ts", "../../node_modules/@tanstack/query-core/src/removable.ts", "../../node_modules/@tanstack/query-core/src/query.ts", "../../node_modules/@tanstack/query-core/src/infiniteQueryBehavior.ts", "../../node_modules/@tanstack/query-core/src/mutation.ts", "../../node_modules/@tanstack/query-core/src/mutationCache.ts", "../../node_modules/@tanstack/query-core/src/queryCache.ts", "../../node_modules/@tanstack/query-core/src/queryClient.ts", "../../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx", "../../resources/js/components/layouts/Navigation.jsx", "../../resources/js/components/pages/admin/InventoryManager.jsx"],
  "sourcesContent": ["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n", "import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './bootstrap';\nimport '../css/app.css';\nimport MainApp from './components/MainApp.jsx';\nimport ErrorBoundary from './components/common/ErrorBoundary.jsx';\nimport { FavoritesProvider } from './context/FavoritesContext.jsx';\n\nconst container = document.getElementById('app');\n\nif (container) {\n    const root = ReactDOM.createRoot(container);\n    root.render(\n        <React.StrictMode>\n            <ErrorBoundary>\n                <FavoritesProvider>\n                    <MainApp />\n                </FavoritesProvider>\n            </ErrorBoundary>\n        </React.StrictMode>\n    );\n} else {\n    console.error('Root element not found');\n}", "import axios from 'axios';\nwindow.axios = axios;\n\nwindow.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n\n// Add a request interceptor to attach the token dynamically\nwindow.axios.interceptors.request.use(\n    (config) => {\n        const token = localStorage.getItem('admin_token') || sessionStorage.getItem('admin_token');\n        if (token) {\n            config.headers['Authorization'] = `Bearer ${token}`;\n        }\n        return config;\n    },\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\n// Simple console log for debugging\nconsole.log('Attire Lounge React App Initialized - MainApp.jsx structure');\n", "// resources/jsx/components/MainApp.jsx\nimport React, { Suspense, lazy, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, useLocation } from 'react-router-dom';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport Lenis from 'lenis';\nimport usePullToRefresh from '../hooks/usePullToRefresh';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\n// Initialize QueryClient\nconst queryClient = new QueryClient({\n    defaultOptions: {\n        queries: {\n            refetchOnWindowFocus: false, // Prevent refetching when window gains focus\n            retry: 1, // Retry failed requests once\n            staleTime: 5 * 60 * 1000, // Data is fresh for 5 minutes\n        },\n    },\n});\n\n// Components\nimport Navigation from './layouts/Navigation.jsx';\nimport LoadingSpinner from './common/LoadingSpinner.jsx';\nimport Footer from './layouts/Footer.jsx';\n\n// ScrollToTop is handled via AnimatePresence onExitComplete\n// import ScrollToTop from './common/ScrollToTop.jsx';\n\n// Pages that you have created\nconst lazyWithRetry = (componentImport) =>\n    lazy(async () => {\n        const pageHasAlreadyBeenForceRefreshed = JSON.parse(\n            window.localStorage.getItem('page-has-been-force-refreshed') || 'false'\n        );\n\n        try {\n            const component = await componentImport();\n            window.localStorage.setItem('page-has-been-force-refreshed', 'false');\n            return component;\n        } catch (error) {\n            if (!pageHasAlreadyBeenForceRefreshed) {\n                // Personal preference: wait a bit before refreshing\n                window.localStorage.setItem('page-has-been-force-refreshed', 'true');\n                return window.location.reload();\n            }\n\n            // The page has already been reloaded and still fails, so let's throw an error\n            // to be caught by the ErrorBoundary\n            throw error;\n        }\n    });\n\nconst HomePage = lazyWithRetry(() => import('./pages/HomePage.jsx'));\nconst CollectionsPage = lazyWithRetry(() => import('./pages/CollectionsPage.jsx'));\nconst ProductListPage = lazyWithRetry(() => import('./pages/ProductListPage.jsx'));\nconst ProductDetailPage = lazyWithRetry(() => import('./pages/ProductDetailPage.jsx'));\nconst LookbookPage = lazyWithRetry(() => import('./pages/LookbookPage.jsx'));\nconst FashionShowPage = lazyWithRetry(() => import('./pages/FashionShowPage.jsx'));\nconst ContactPage = lazyWithRetry(() => import('./pages/ContactPage.jsx'));\nconst CustomizeGiftPage = lazyWithRetry(() => import('./pages/CustomizeGiftPage.jsx'));\nconst FavoritesPage = lazyWithRetry(() => import('./pages/FavoritesPage.jsx'));\nconst AdminDashboard = lazyWithRetry(() => import('./pages/admin/AdminDashboard.jsx'));\nconst AdminLogin = lazyWithRetry(() => import('./pages/admin/AdminLogin.jsx'));\nconst PrivateRoute = lazyWithRetry(() => import('./pages/admin/PrivateRoute.jsx'));\n\nconst AdminLayout = lazyWithRetry(() => import('./pages/admin/AdminLayout.jsx'));\nconst AppointmentManager = lazyWithRetry(() => import('./pages/admin/AppointmentManager.jsx'));\nconst CustomizeGiftManager = lazyWithRetry(() => import('./pages/admin/CustomizeGiftManager.jsx'));\nimport InventoryManager from './pages/admin/InventoryManager.jsx';\nconst PrivacyPolicyPage = lazyWithRetry(() => import('./pages/PrivacyPolicyPage.jsx'));\nconst TermsOfServicePage = lazyWithRetry(() => import('./pages/TermsOfServicePage.jsx'));\nconst ReturnPolicyPage = lazyWithRetry(() => import('./pages/ReturnPolicyPage.jsx'));\n\n\n// Simple placeholder for non-existent pages\nconst Placeholder = ({ title }) => (\n    <div className=\"min-h-screen pt-24 px-6\">\n        <div className=\"max-w-4xl mx-auto\">\n            <h1 className=\"text-2xl font-serif mb-4\">{title}</h1>\n            <p className=\"text-gray-600\">Coming soon</p>\n        </div>\n    </div>\n);\n\n// Animation Variants\nconst pageVariants = {\n    initial: {\n        opacity: 0,\n        y: 10\n    },\n    enter: {\n        opacity: 1,\n        y: 0,\n        transition: {\n            duration: 0.5,\n            ease: [0.22, 1, 0.36, 1]\n        }\n    },\n    exit: {\n        opacity: 0,\n        y: -10,\n        transition: {\n            duration: 0.4,\n            ease: [0.22, 1, 0.36, 1]\n        }\n    }\n};\n\n// Layout wrapper component - ALWAYS includes Footer (except for HomePage)\nconst Layout = ({ children, includeHeader = true, includeFooter = true, includePadding = true }) => {\n    return (\n        <motion.div\n            initial=\"initial\"\n            animate=\"enter\"\n            exit=\"exit\"\n            variants={pageVariants}\n            className=\"min-h-screen flex flex-col\"\n        >\n            {includeHeader && <Navigation />}\n            <main className={`flex-grow ${includePadding ? 'pt-24 md:pt-0' : ''}`}>\n                {children}\n            </main>\n            {includeFooter && <Footer />}\n        </motion.div>\n    );\n};\n\nconst LenisScroll = () => {\n    const location = useLocation();\n\n    useEffect(() => {\n        // Disable Lenis on Admin routes\n        if (location.pathname.startsWith('/admin')) {\n            if (window.lenis) {\n                window.lenis.destroy();\n                window.lenis = null;\n            }\n            return;\n        }\n\n        // Initialize Lenis if it doesn't exist\n        if (!window.lenis) {\n            const lenis = new Lenis({\n                lerp: 0.1, // More organic smoothing than fixed duration\n                wheelMultiplier: 1.1, // Increased for better responsiveness\n                touchMultiplier: 1.5,\n                smoothWheel: true,\n                smoothTouch: false,\n            });\n\n            window.lenis = lenis;\n\n            let rafId;\n            function raf(time) {\n                lenis.raf(time);\n                rafId = requestAnimationFrame(raf);\n            }\n\n            rafId = requestAnimationFrame(raf);\n\n            return () => {\n                cancelAnimationFrame(rafId);\n                lenis.destroy();\n                window.lenis = null;\n            };\n        }\n    }, [location.pathname.startsWith('/admin')]); // Only re-run when moving to/from admin\n\n    return null;\n};\n\nconst AnimatedRoutes = () => {\n    const location = useLocation();\n\n    const handleExitComplete = () => {\n        if (typeof window !== 'undefined') {\n            window.scrollTo(0, 0);\n            if (window.lenis) {\n                window.lenis.scrollTo(0, { immediate: true });\n            }\n        }\n    };\n\n    return (\n        <AnimatePresence mode=\"wait\" onExitComplete={handleExitComplete}>\n            <Routes location={location} key={location.pathname}>\n                {/* HomePage route - Footer is integrated INSIDE HomePage as section 4 */}\n                <Route path=\"/\" element={\n                    <motion.div\n                        initial=\"initial\"\n                        animate=\"enter\"\n                        exit=\"exit\"\n                        variants={pageVariants}\n                        className=\"min-h-screen flex flex-col\"\n                    >\n                        <Navigation />\n                        <main className=\"flex-grow\">\n                            <HomePage />\n                        </main>\n                        {/* Footer is now INSIDE HomePage as section 4 */}\n                    </motion.div>\n                } />\n\n                {/* All other routes use Layout with Footer */}\n                <Route path=\"/collections\" element={\n                    <Layout>\n                        <CollectionsPage />\n                    </Layout>\n                } />\n                <Route path=\"/products\" element={\n                    <Layout>\n                        <ProductListPage />\n                    </Layout>\n                } />\n                <Route path=\"/products/:collectionSlug\" element={\n                    <Layout>\n                        <ProductListPage />\n                    </Layout>\n                } />\n                <Route path=\"/product/:productId\" element={\n                    <Layout includeHeader={false} includeFooter={false} includePadding={false}>\n                        <ProductDetailPage />\n                    </Layout>\n                } />\n                <Route path=\"/lookbook\" element={\n                    <Layout>\n                        <LookbookPage />\n                    </Layout>\n                } />\n                <Route path=\"/fashion-show\" element={\n                    <Layout includePadding={false}>\n                        <FashionShowPage />\n                    </Layout>\n                } />\n                <Route path=\"/contact\" element={\n                    <Layout>\n                        <ContactPage />\n                    </Layout>\n                } />\n                <Route path=\"/customize-gift\" element={\n                    <Layout>\n                        <CustomizeGiftPage />\n                    </Layout>\n                } />\n                <Route path=\"/favorites\" element={\n                    <Layout>\n                        <FavoritesPage />\n                    </Layout>\n                } />\n\n                <Route element={<PrivateRoute />}>\n                    <Route element={<AdminLayout />}>\n                        <Route path=\"/admin\" element={<AdminDashboard />} />\n                        <Route path=\"/admin/appointments\" element={<AppointmentManager />} />\n                        <Route path=\"/admin/customize-gift\" element={<CustomizeGiftManager />} />\n                        <Route path=\"/admin/inventory\" element={<InventoryManager />} />\n                    </Route>\n                </Route>\n\n                <Route path=\"/admin/login\" element={\n                    <Layout includeFooter={false} includePadding={false}>\n                        <AdminLogin />\n                    </Layout>\n                } />\n\n                {/* Simple placeholders - all with Footer */}\n                <Route path=\"/styling\" element={\n                    <Layout>\n                        <Placeholder title=\"Styling\" />\n                    </Layout>\n                } />\n                <Route path=\"/journal\" element={\n                    <Layout>\n                        <Placeholder title=\"Journal\" />\n                    </Layout>\n                } />\n                <Route path=\"/about\" element={\n                    <Layout>\n                        <Placeholder title=\"About\" />\n                    </Layout>\n                } />\n                <Route path=\"/shipping\" element={\n                    <Layout>\n                        <Placeholder title=\"Shipping\" />\n                    </Layout>\n                } />\n                <Route path=\"/privacy\" element={\n                    <Layout>\n                        <PrivacyPolicyPage />\n                    </Layout>\n                } />\n                <Route path=\"/terms\" element={\n                    <Layout>\n                        <TermsOfServicePage />\n                    </Layout>\n                } />\n                <Route path=\"/returns\" element={\n                    <Layout>\n                        <ReturnPolicyPage />\n                    </Layout>\n                } />\n                <Route path=\"/appointment\" element={\n                    <Layout>\n                        <Placeholder title=\"Appointment\" />\n                    </Layout>\n                } />\n                <Route path=\"/membership\" element={\n                    <Layout>\n                        <Placeholder title=\"Membership\" />\n                    </Layout>\n                } />\n                <Route path=\"/faq\" element={\n                    <Layout>\n                        <Placeholder title=\"FAQ\" />\n                    </Layout>\n                } />\n\n                {/* 404 */}\n                <Route path=\"*\" element={\n                    <Layout>\n                        <Placeholder title=\"Page Not Found\" />\n                    </Layout>\n                } />\n            </Routes>\n        </AnimatePresence>\n    );\n};\n\nfunction MainApp() {\n    usePullToRefresh(() => {\n        window.location.reload();\n    });\n    \n    return (\n        <QueryClientProvider client={queryClient}>\n            <Router>\n                <LenisScroll />\n                {/* ScrollToTop removed as it conflicts with exit animations, handled in onExitComplete */}\n                <Suspense fallback={<LoadingSpinner />}>\n                    <AnimatedRoutes />\n                </Suspense>\n            </Router>\n        </QueryClientProvider>\n    );\n}\n\nexport default MainApp;", "{\n  \"name\": \"lenis\",\n  \"version\": \"1.3.17\",\n  \"description\": \"How smooth scroll should be\",\n  \"type\": \"module\",\n  \"sideEffects\": false,\n  \"author\": \"darkroom.engineering\",\n  \"license\": \"MIT\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/darkroomengineering/lenis.git\"\n  },\n  \"bugs\": {\n    \"url\": \"https://github.com/darkroomengineering/lenis/issues\"\n  },\n  \"homepage\": \"https://github.com/darkroomengineering/lenis\",\n  \"funding\": {\n    \"type\": \"github\",\n    \"url\": \"https://github.com/sponsors/darkroomengineering\"\n  },\n  \"keywords\": [\n    \"scroll\",\n    \"smooth\",\n    \"lenis\",\n    \"react\",\n    \"vue\"\n  ],\n  \"scripts\": {\n    \"build\": \"pnpm build:core && pnpm build:all\",\n    \"build:core\": \"tsup --config tsup.core.ts\",\n    \"build:all\": \"tsup\",\n    \"dev\": \"pnpm run -w --parallel /^dev:.*/\",\n    \"dev:build\": \"tsup --watch\",\n    \"dev:playground\": \"pnpm --filter playground dev\",\n    \"dev:nuxt\": \"pnpm --filter playground-nuxt dev\",\n    \"readme\": \"node ./scripts/update-readme.js\",\n    \"version:framer\": \"npm version prerelease --preid framer --force --no-git-tag-version\",\n    \"version:dev\": \"npm version prerelease --preid dev --force --no-git-tag-version\",\n    \"version:patch\": \"npm version patch --force --no-git-tag-version\",\n    \"version:minor\": \"npm version minor --force --no-git-tag-version\",\n    \"version:major\": \"npm version major --force --no-git-tag-version\",\n    \"postversion\": \"pnpm build && pnpm readme\",\n    \"publish:dev\": \"npm publish --tag dev\",\n    \"publish:framer\": \"npm publish --tag framer\",\n    \"publish:main\": \"npm publish\"\n  },\n  \"files\": [\n    \"dist\"\n  ],\n  \"devDependencies\": {\n    \"terser\": \"^5.37.0\",\n    \"tsup\": \"^8.3.5\",\n    \"typescript\": \"^5.7.3\"\n  },\n  \"peerDependencies\": {\n    \"react\": \">=17.0.0\",\n    \"vue\": \">=3.0.0\",\n    \"@nuxt/kit\": \">=3.0.0\"\n  },\n  \"peerDependenciesMeta\": {\n    \"react\": {\n      \"optional\": true\n    },\n    \"vue\": {\n      \"optional\": true\n    },\n    \"@nuxt/kit\": {\n      \"optional\": true\n    }\n  },\n  \"unpkg\": \"./dist/lenis.mjs\",\n  \"main\": \"./dist/lenis.mjs\",\n  \"module\": \"./dist/lenis.mjs\",\n  \"types\": \"./dist/lenis.d.ts\",\n  \"exports\": {\n    \".\": {\n      \"types\": \"./dist/lenis.d.ts\",\n      \"default\": \"./dist/lenis.mjs\"\n    },\n    \"./react\": {\n      \"types\": \"./dist/lenis-react.d.ts\",\n      \"default\": \"./dist/lenis-react.mjs\"\n    },\n    \"./snap\": {\n      \"types\": \"./dist/lenis-snap.d.ts\",\n      \"default\": \"./dist/lenis-snap.mjs\"\n    },\n    \"./vue\": {\n      \"types\": \"./dist/lenis-vue.d.ts\",\n      \"default\": \"./dist/lenis-vue.mjs\"\n    },\n    \"./nuxt\": {\n      \"default\": \"./dist/lenis-vue-nuxt.mjs\"\n    },\n    \"./nuxt/runtime/*\": {\n      \"default\": \"./dist/nuxt/runtime/*.mjs\"\n    },\n    \"./dist/*\": \"./dist/*\"\n  }\n}\n", "/**\n * Clamp a value between a minimum and maximum value\n *\n * @param min Minimum value\n * @param input Value to clamp\n * @param max Maximum value\n * @returns Clamped value\n */\nexport function clamp(min: number, input: number, max: number) {\n  return Math.max(min, Math.min(input, max))\n}\n\n/**\n * Truncate a floating-point number to a specified number of decimal places\n *\n * @param value Value to truncate\n * @param decimals Number of decimal places to truncate to\n * @returns Truncated value\n */\nexport function truncate(value: number, decimals = 0) {\n  return parseFloat(value.toFixed(decimals))\n}\n\n/**\n *  Linearly interpolate between two values using an amount (0 <= t <= 1)\n *\n * @param x First value\n * @param y Second value\n * @param t Amount to interpolate (0 <= t <= 1)\n * @returns Interpolated value\n */\nexport function lerp(x: number, y: number, t: number) {\n  return (1 - t) * x + t * y\n}\n\n/**\n * Damp a value over time using a damping factor\n * {@link http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/}\n *\n * @param x Initial value\n * @param y Target value\n * @param lambda Damping factor\n * @param dt Time elapsed since the last update\n * @returns Damped value\n */\nexport function damp(x: number, y: number, lambda: number, deltaTime: number) {\n  return lerp(x, y, 1 - Math.exp(-lambda * deltaTime))\n}\n\n/**\n * Calculate the modulo of the dividend and divisor while keeping the result within the same sign as the divisor\n * {@link https://anguscroll.com/just/just-modulo}\n *\n * @param n Dividend\n * @param d Divisor\n * @returns Modulo\n */\nexport function modulo(n: number, d: number) {\n  return ((n % d) + d) % d\n}\n", "import { clamp, damp } from './maths'\r\nimport type { EasingFunction, FromToOptions, OnUpdateCallback } from './types'\r\n\r\n/**\r\n * Animate class to handle value animations with lerping or easing\r\n *\r\n * @example\r\n * const animate = new Animate()\r\n * animate.fromTo(0, 100, { duration: 1, easing: (t) => t })\r\n * animate.advance(0.5) // 50\r\n */\r\nexport class Animate {\r\n  isRunning = false\r\n  value = 0\r\n  from = 0\r\n  to = 0\r\n  currentTime = 0\r\n\r\n  // These are instanciated in the fromTo method\r\n  lerp?: number\r\n  duration?: number\r\n  easing?: EasingFunction\r\n  onUpdate?: OnUpdateCallback\r\n\r\n  /**\r\n   * Advance the animation by the given delta time\r\n   *\r\n   * @param deltaTime - The time in seconds to advance the animation\r\n   */\r\n  advance(deltaTime: number) {\r\n    if (!this.isRunning) return\r\n\r\n    let completed = false\r\n\r\n    if (this.duration && this.easing) {\r\n      this.currentTime += deltaTime\r\n      const linearProgress = clamp(0, this.currentTime / this.duration, 1)\r\n\r\n      completed = linearProgress >= 1\r\n      const easedProgress = completed ? 1 : this.easing(linearProgress)\r\n      this.value = this.from + (this.to - this.from) * easedProgress\r\n    } else if (this.lerp) {\r\n      this.value = damp(this.value, this.to, this.lerp * 60, deltaTime)\r\n      if (Math.round(this.value) === this.to) {\r\n        this.value = this.to\r\n        completed = true\r\n      }\r\n    } else {\r\n      // If no easing or lerp, just jump to the end value\r\n      this.value = this.to\r\n      completed = true\r\n    }\r\n\r\n    if (completed) {\r\n      this.stop()\r\n    }\r\n\r\n    // Call the onUpdate callback with the current value and completed status\r\n    this.onUpdate?.(this.value, completed)\r\n  }\r\n\r\n  /** Stop the animation */\r\n  stop() {\r\n    this.isRunning = false\r\n  }\r\n\r\n  /**\r\n   * Set up the animation from a starting value to an ending value\r\n   * with optional parameters for lerping, duration, easing, and onUpdate callback\r\n   *\r\n   * @param from - The starting value\r\n   * @param to - The ending value\r\n   * @param options - Options for the animation\r\n   */\r\n  fromTo(\r\n    from: number,\r\n    to: number,\r\n    { lerp, duration, easing, onStart, onUpdate }: FromToOptions\r\n  ) {\r\n    this.from = this.value = from\r\n    this.to = to\r\n    this.lerp = lerp\r\n    this.duration = duration\r\n    this.easing = easing\r\n    this.currentTime = 0\r\n    this.isRunning = true\r\n\r\n    onStart?.()\r\n    this.onUpdate = onUpdate\r\n  }\r\n}\r\n", "export function debounce<CB extends (...args: any[]) => void>(\n  callback: CB,\n  delay: number\n) {\n  let timer: number | undefined\n  return function <T>(this: T, ...args: Parameters<typeof callback>) {\n    let context = this\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      timer = undefined\n      callback.apply(context, args)\n    }, delay)\n  }\n}\n", "import { debounce } from './debounce'\n\n/**\n * Dimensions class to handle the size of the content and wrapper\n *\n * @example\n * const dimensions = new Dimensions(wrapper, content)\n * dimensions.on('resize', (e) => {\n *   console.log(e.width, e.height)\n * })\n */\nexport class Dimensions {\n  width = 0\n  height = 0\n  scrollHeight = 0\n  scrollWidth = 0\n\n  // These are instanciated in the constructor as they need information from the options\n  private debouncedResize?: (...args: unknown[]) => void\n  private wrapperResizeObserver?: ResizeObserver\n  private contentResizeObserver?: ResizeObserver\n\n  constructor(\n    private wrapper: HTMLElement | Window | Element,\n    private content: HTMLElement | Element,\n    { autoResize = true, debounce: debounceValue = 250 } = {}\n  ) {\n    if (autoResize) {\n      this.debouncedResize = debounce(this.resize, debounceValue)\n\n      if (this.wrapper instanceof Window) {\n        window.addEventListener('resize', this.debouncedResize, false)\n      } else {\n        this.wrapperResizeObserver = new ResizeObserver(this.debouncedResize)\n        this.wrapperResizeObserver.observe(this.wrapper)\n      }\n\n      this.contentResizeObserver = new ResizeObserver(this.debouncedResize)\n      this.contentResizeObserver.observe(this.content)\n    }\n\n    this.resize()\n  }\n\n  destroy() {\n    this.wrapperResizeObserver?.disconnect()\n    this.contentResizeObserver?.disconnect()\n\n    if (this.wrapper === window && this.debouncedResize) {\n      window.removeEventListener('resize', this.debouncedResize, false)\n    }\n  }\n\n  resize = () => {\n    this.onWrapperResize()\n    this.onContentResize()\n  }\n\n  onWrapperResize = () => {\n    if (this.wrapper instanceof Window) {\n      this.width = window.innerWidth\n      this.height = window.innerHeight\n    } else {\n      this.width = this.wrapper.clientWidth\n      this.height = this.wrapper.clientHeight\n    }\n  }\n\n  onContentResize = () => {\n    if (this.wrapper instanceof Window) {\n      this.scrollHeight = this.content.scrollHeight\n      this.scrollWidth = this.content.scrollWidth\n    } else {\n      this.scrollHeight = this.wrapper.scrollHeight\n      this.scrollWidth = this.wrapper.scrollWidth\n    }\n  }\n\n  get limit() {\n    return {\n      x: this.scrollWidth - this.width,\n      y: this.scrollHeight - this.height,\n    }\n  }\n}\n", "/**\n * Emitter class to handle events\n * @example\n * const emitter = new Emitter()\n * emitter.on('event', (data) => {\n *   console.log(data)\n * })\n * emitter.emit('event', 'data')\n */\nexport class Emitter {\n  private events: Record<\n    string,\n    Array<(...args: unknown[]) => void> | undefined\n  > = {}\n\n  /**\n   * Emit an event with the given data\n   * @param event Event name\n   * @param args Data to pass to the event handlers\n   */\n  emit(event: string, ...args: unknown[]) {\n    let callbacks = this.events[event] || []\n    for (let i = 0, length = callbacks.length; i < length; i++) {\n      callbacks[i]?.(...args)\n    }\n  }\n\n  /**\n   * Add a callback to the event\n   * @param event Event name\n   * @param cb Callback function\n   * @returns Unsubscribe function\n   */\n  on<CB extends (...args: any[]) => void>(event: string, cb: CB) {\n    // Add the callback to the event's callback list, or create a new list with the callback\n    this.events[event]?.push(cb) || (this.events[event] = [cb])\n\n    // Return an unsubscribe function\n    return () => {\n      this.events[event] = this.events[event]?.filter((i) => cb !== i)\n    }\n  }\n\n  /**\n   * Remove a callback from the event\n   * @param event Event name\n   * @param callback Callback function\n   */\n  off<CB extends (...args: any[]) => void>(event: string, callback: CB) {\n    this.events[event] = this.events[event]?.filter((i) => callback !== i)\n  }\n\n  /**\n   * Remove all event listeners and clean up\n   */\n  destroy() {\n    this.events = {}\n  }\n}\n", "import { Emitter } from './emitter'\r\nimport type { VirtualScrollCallback } from './types'\r\n\r\nconst LINE_HEIGHT = 100 / 6\r\nconst listenerOptions: AddEventListenerOptions = { passive: false }\r\n\r\nexport class VirtualScroll {\r\n  touchStart = {\r\n    x: 0,\r\n    y: 0,\r\n  }\r\n  lastDelta = {\r\n    x: 0,\r\n    y: 0,\r\n  }\r\n  window = {\r\n    width: 0,\r\n    height: 0,\r\n  }\r\n  private emitter = new Emitter()\r\n\r\n  constructor(\r\n    private element: HTMLElement,\r\n    private options = { wheelMultiplier: 1, touchMultiplier: 1 }\r\n  ) {\r\n    window.addEventListener('resize', this.onWindowResize, false)\r\n    this.onWindowResize()\r\n\r\n    this.element.addEventListener('wheel', this.onWheel, listenerOptions)\r\n    this.element.addEventListener(\r\n      'touchstart',\r\n      this.onTouchStart,\r\n      listenerOptions\r\n    )\r\n    this.element.addEventListener(\r\n      'touchmove',\r\n      this.onTouchMove,\r\n      listenerOptions\r\n    )\r\n    this.element.addEventListener('touchend', this.onTouchEnd, listenerOptions)\r\n  }\r\n\r\n  /**\r\n   * Add an event listener for the given event and callback\r\n   *\r\n   * @param event Event name\r\n   * @param callback Callback function\r\n   */\r\n  on(event: string, callback: VirtualScrollCallback) {\r\n    return this.emitter.on(event, callback)\r\n  }\r\n\r\n  /** Remove all event listeners and clean up */\r\n  destroy() {\r\n    this.emitter.destroy()\r\n\r\n    window.removeEventListener('resize', this.onWindowResize, false)\r\n\r\n    this.element.removeEventListener('wheel', this.onWheel, listenerOptions)\r\n    this.element.removeEventListener(\r\n      'touchstart',\r\n      this.onTouchStart,\r\n      listenerOptions\r\n    )\r\n    this.element.removeEventListener(\r\n      'touchmove',\r\n      this.onTouchMove,\r\n      listenerOptions\r\n    )\r\n    this.element.removeEventListener(\r\n      'touchend',\r\n      this.onTouchEnd,\r\n      listenerOptions\r\n    )\r\n  }\r\n\r\n  /**\r\n   * Event handler for 'touchstart' event\r\n   *\r\n   * @param event Touch event\r\n   */\r\n  onTouchStart = (event: TouchEvent) => {\r\n    // @ts-expect-error - event.targetTouches is not defined\r\n    const { clientX, clientY } = event.targetTouches\r\n      ? event.targetTouches[0]\r\n      : event\r\n\r\n    this.touchStart.x = clientX\r\n    this.touchStart.y = clientY\r\n\r\n    this.lastDelta = {\r\n      x: 0,\r\n      y: 0,\r\n    }\r\n\r\n    this.emitter.emit('scroll', {\r\n      deltaX: 0,\r\n      deltaY: 0,\r\n      event,\r\n    })\r\n  }\r\n\r\n  /** Event handler for 'touchmove' event */\r\n  onTouchMove = (event: TouchEvent) => {\r\n    // @ts-expect-error - event.targetTouches is not defined\r\n    const { clientX, clientY } = event.targetTouches\r\n      ? event.targetTouches[0]\r\n      : event\r\n\r\n    const deltaX = -(clientX - this.touchStart.x) * this.options.touchMultiplier\r\n    const deltaY = -(clientY - this.touchStart.y) * this.options.touchMultiplier\r\n\r\n    this.touchStart.x = clientX\r\n    this.touchStart.y = clientY\r\n\r\n    this.lastDelta = {\r\n      x: deltaX,\r\n      y: deltaY,\r\n    }\r\n\r\n    this.emitter.emit('scroll', {\r\n      deltaX,\r\n      deltaY,\r\n      event,\r\n    })\r\n  }\r\n\r\n  onTouchEnd = (event: TouchEvent) => {\r\n    this.emitter.emit('scroll', {\r\n      deltaX: this.lastDelta.x,\r\n      deltaY: this.lastDelta.y,\r\n      event,\r\n    })\r\n  }\r\n\r\n  /** Event handler for 'wheel' event */\r\n  onWheel = (event: WheelEvent) => {\r\n    let { deltaX, deltaY, deltaMode } = event\r\n\r\n    const multiplierX =\r\n      deltaMode === 1 ? LINE_HEIGHT : deltaMode === 2 ? this.window.width : 1\r\n    const multiplierY =\r\n      deltaMode === 1 ? LINE_HEIGHT : deltaMode === 2 ? this.window.height : 1\r\n\r\n    deltaX *= multiplierX\r\n    deltaY *= multiplierY\r\n\r\n    deltaX *= this.options.wheelMultiplier\r\n    deltaY *= this.options.wheelMultiplier\r\n\r\n    this.emitter.emit('scroll', { deltaX, deltaY, event })\r\n  }\r\n\r\n  onWindowResize = () => {\r\n    this.window = {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n    }\r\n  }\r\n}\r\n", "import { version } from '../../../package.json'\nimport { Animate } from './animate'\nimport { Dimensions } from './dimensions'\nimport { Emitter } from './emitter'\nimport { clamp, modulo } from './maths'\nimport type {\n  LenisEvent,\n  LenisOptions,\n  ScrollCallback,\n  Scrolling,\n  ScrollToOptions,\n  UserData,\n  VirtualScrollCallback,\n  VirtualScrollData,\n} from './types'\nimport { VirtualScroll } from './virtual-scroll'\n\n// Technical explanation\n// - listen to 'wheel' events\n// - prevent 'wheel' event to prevent scroll\n// - normalize wheel delta\n// - add delta to targetScroll\n// - animate scroll to targetScroll (smooth context)\n// - if animation is not running, listen to 'scroll' events (native context)\n\ntype OptionalPick<T, F extends keyof T> = Omit<T, F> & Partial<Pick<T, F>>\n\nconst defaultEasing = (t: number) => Math.min(1, 1.001 - Math.pow(2, -10 * t))\n\nexport class Lenis {\n  private _isScrolling: Scrolling = false // true when scroll is animating\n  private _isStopped = false // true if user should not be able to scroll - enable/disable programmatically\n  private _isLocked = false // same as isStopped but enabled/disabled when scroll reaches target\n  private _preventNextNativeScrollEvent = false\n  private _resetVelocityTimeout: ReturnType<typeof setTimeout> | null = null\n  private _rafId: number | null = null\n\n  /**\n   * Whether or not the user is touching the screen\n   */\n  isTouching?: boolean\n  /**\n   * The time in ms since the lenis instance was created\n   */\n  time = 0\n  /**\n   * User data that will be forwarded through the scroll event\n   *\n   * @example\n   * lenis.scrollTo(100, {\n   *   userData: {\n   *     foo: 'bar'\n   *   }\n   * })\n   */\n  userData: UserData = {}\n  /**\n   * The last velocity of the scroll\n   */\n  lastVelocity = 0\n  /**\n   * The current velocity of the scroll\n   */\n  velocity = 0\n  /**\n   * The direction of the scroll\n   */\n  direction: 1 | -1 | 0 = 0\n  /**\n   * The options passed to the lenis instance\n   */\n  options: OptionalPick<\n    Required<LenisOptions>,\n    'duration' | 'easing' | 'prevent' | 'virtualScroll'\n  >\n  /**\n   * The target scroll value\n   */\n  targetScroll: number\n  /**\n   * The animated scroll value\n   */\n  animatedScroll: number\n\n  // These are instanciated here as they don't need information from the options\n  private readonly animate = new Animate()\n  private readonly emitter = new Emitter()\n  // These are instanciated in the constructor as they need information from the options\n  readonly dimensions: Dimensions // This is not private because it's used in the Snap class\n  private readonly virtualScroll: VirtualScroll\n\n  constructor({\n    wrapper = window,\n    content = document.documentElement,\n    eventsTarget = wrapper,\n    smoothWheel = true,\n    syncTouch = false,\n    syncTouchLerp = 0.075,\n    touchInertiaExponent = 1.7,\n    duration, // in seconds\n    easing,\n    lerp = 0.1,\n    infinite = false,\n    orientation = 'vertical', // vertical, horizontal\n    gestureOrientation = orientation === 'horizontal' ? 'both' : 'vertical', // vertical, horizontal, both\n    touchMultiplier = 1,\n    wheelMultiplier = 1,\n    autoResize = true,\n    prevent,\n    virtualScroll,\n    overscroll = true,\n    autoRaf = false,\n    anchors = false,\n    autoToggle = false, // https://caniuse.com/?search=transition-behavior\n    allowNestedScroll = false,\n    // @ts-ignore: this will be deprecated in the future\n    __experimental__naiveDimensions = false,\n    naiveDimensions = __experimental__naiveDimensions,\n    stopInertiaOnNavigate = false,\n  }: LenisOptions = {}) {\n    // Set version\n    window.lenisVersion = version\n\n    // Check if wrapper is <html>, fallback to window\n    if (!wrapper || wrapper === document.documentElement) {\n      wrapper = window\n    }\n\n    // flip to easing/time based animation if at least one of them is provided\n    if (typeof duration === 'number' && typeof easing !== 'function') {\n      easing = defaultEasing\n    } else if (typeof easing === 'function' && typeof duration !== 'number') {\n      duration = 1\n    }\n\n    // Setup options\n    this.options = {\n      wrapper,\n      content,\n      eventsTarget,\n      smoothWheel,\n      syncTouch,\n      syncTouchLerp,\n      touchInertiaExponent,\n      duration,\n      easing,\n      lerp,\n      infinite,\n      gestureOrientation,\n      orientation,\n      touchMultiplier,\n      wheelMultiplier,\n      autoResize,\n      prevent,\n      virtualScroll,\n      overscroll,\n      autoRaf,\n      anchors,\n      autoToggle,\n      allowNestedScroll,\n      naiveDimensions,\n      stopInertiaOnNavigate,\n    }\n\n    // Setup dimensions instance\n    this.dimensions = new Dimensions(wrapper, content, { autoResize })\n\n    // Setup class name\n    this.updateClassName()\n\n    // Set the initial scroll value for all scroll information\n    this.targetScroll = this.animatedScroll = this.actualScroll\n\n    // Add event listeners\n    this.options.wrapper.addEventListener('scroll', this.onNativeScroll, false)\n\n    this.options.wrapper.addEventListener('scrollend', this.onScrollEnd, {\n      capture: true,\n    })\n\n    if (this.options.anchors || this.options.stopInertiaOnNavigate) {\n      this.options.wrapper.addEventListener(\n        'click',\n        this.onClick as EventListener,\n        false\n      )\n    }\n\n    this.options.wrapper.addEventListener(\n      'pointerdown',\n      this.onPointerDown as EventListener,\n      false\n    )\n\n    // Setup virtual scroll instance\n    this.virtualScroll = new VirtualScroll(eventsTarget as HTMLElement, {\n      touchMultiplier,\n      wheelMultiplier,\n    })\n    this.virtualScroll.on('scroll', this.onVirtualScroll)\n\n    if (this.options.autoToggle) {\n      this.checkOverflow()\n      this.rootElement.addEventListener('transitionend', this.onTransitionEnd, {\n        passive: true,\n      })\n    }\n\n    if (this.options.autoRaf) {\n      this._rafId = requestAnimationFrame(this.raf)\n    }\n  }\n\n  /**\n   * Destroy the lenis instance, remove all event listeners and clean up the class name\n   */\n  destroy() {\n    this.emitter.destroy()\n\n    this.options.wrapper.removeEventListener(\n      'scroll',\n      this.onNativeScroll,\n      false\n    )\n\n    this.options.wrapper.removeEventListener('scrollend', this.onScrollEnd, {\n      capture: true,\n    })\n\n    this.options.wrapper.removeEventListener(\n      'pointerdown',\n      this.onPointerDown as EventListener,\n      false\n    )\n\n    if (this.options.anchors || this.options.stopInertiaOnNavigate) {\n      this.options.wrapper.removeEventListener(\n        'click',\n        this.onClick as EventListener,\n        false\n      )\n    }\n\n    this.virtualScroll.destroy()\n    this.dimensions.destroy()\n\n    this.cleanUpClassName()\n\n    if (this._rafId) {\n      cancelAnimationFrame(this._rafId)\n    }\n  }\n\n  /**\n   * Add an event listener for the given event and callback\n   *\n   * @param event Event name\n   * @param callback Callback function\n   * @returns Unsubscribe function\n   */\n  on(event: 'scroll', callback: ScrollCallback): () => void\n  on(event: 'virtual-scroll', callback: VirtualScrollCallback): () => void\n  on(event: LenisEvent, callback: any) {\n    return this.emitter.on(event, callback)\n  }\n\n  /**\n   * Remove an event listener for the given event and callback\n   *\n   * @param event Event name\n   * @param callback Callback function\n   */\n  off(event: 'scroll', callback: ScrollCallback): void\n  off(event: 'virtual-scroll', callback: VirtualScrollCallback): void\n  off(event: LenisEvent, callback: any) {\n    return this.emitter.off(event, callback)\n  }\n\n  private onScrollEnd = (e: Event | CustomEvent) => {\n    if (!(e instanceof CustomEvent)) {\n      if (this.isScrolling === 'smooth' || this.isScrolling === false) {\n        e.stopPropagation()\n      }\n    }\n  }\n\n  private dispatchScrollendEvent = () => {\n    this.options.wrapper.dispatchEvent(\n      new CustomEvent('scrollend', {\n        bubbles: this.options.wrapper === window,\n        // cancelable: false,\n        detail: {\n          lenisScrollEnd: true,\n        },\n      })\n    )\n  }\n\n  get overflow() {\n    const property = this.isHorizontal ? 'overflow-x' : 'overflow-y'\n    return getComputedStyle(this.rootElement)[\n      property as keyof CSSStyleDeclaration\n    ] as string\n  }\n\n  private checkOverflow() {\n    if (['hidden', 'clip'].includes(this.overflow)) {\n      this.internalStop()\n    } else {\n      this.internalStart()\n    }\n  }\n\n  private onTransitionEnd = (event: TransitionEvent) => {\n    if (event.propertyName.includes('overflow')) {\n      this.checkOverflow()\n    }\n  }\n\n  private setScroll(scroll: number) {\n    // behavior: 'instant' bypasses the scroll-behavior CSS property\n\n    if (this.isHorizontal) {\n      this.options.wrapper.scrollTo({ left: scroll, behavior: 'instant' })\n    } else {\n      this.options.wrapper.scrollTo({ top: scroll, behavior: 'instant' })\n    }\n  }\n\n  private onClick = (event: PointerEvent | MouseEvent) => {\n    const path = event.composedPath()\n\n    // filter anchor elements (elements with a valid href attribute)\n    const anchorElements = path.filter(\n      (node) => node instanceof HTMLAnchorElement && node.getAttribute('href')\n    ) as HTMLAnchorElement[]\n\n    if (this.options.anchors) {\n      const anchor = anchorElements.find((node) =>\n        node.getAttribute('href')?.includes('#')\n      )\n      if (anchor) {\n        const href = anchor.getAttribute('href')\n\n        if (href) {\n          const options =\n            typeof this.options.anchors === 'object' && this.options.anchors\n              ? this.options.anchors\n              : undefined\n\n          const target = `#${href.split('#')[1]}`\n\n          this.scrollTo(target, options)\n        }\n      }\n    }\n\n    if (this.options.stopInertiaOnNavigate) {\n      const internalLink = anchorElements.find(\n        (node) => node.host === window.location.host\n      )\n\n      if (internalLink) {\n        this.reset()\n      }\n    }\n  }\n\n  private onPointerDown = (event: PointerEvent | MouseEvent) => {\n    if (event.button === 1) {\n      this.reset()\n    }\n  }\n\n  private onVirtualScroll = (data: VirtualScrollData) => {\n    if (\n      typeof this.options.virtualScroll === 'function' &&\n      this.options.virtualScroll(data) === false\n    )\n      return\n\n    const { deltaX, deltaY, event } = data\n\n    this.emitter.emit('virtual-scroll', { deltaX, deltaY, event })\n\n    // keep zoom feature\n    if (event.ctrlKey) return\n    // @ts-ignore\n    if (event.lenisStopPropagation) return\n\n    const isTouch = event.type.includes('touch')\n    const isWheel = event.type.includes('wheel')\n\n    this.isTouching = event.type === 'touchstart' || event.type === 'touchmove'\n    // if (event.type === 'touchend') {\n    //   console.log('touchend', this.scroll)\n    //   // this.lastVelocity = this.velocity\n    //   // this.velocity = 0\n    //   // this.isScrolling = false\n    //   this.emit({ type: 'touchend' })\n    //   // alert('touchend')\n    //   return\n    // }\n\n    const isClickOrTap = deltaX === 0 && deltaY === 0\n\n    const isTapToStop =\n      this.options.syncTouch &&\n      isTouch &&\n      event.type === 'touchstart' &&\n      isClickOrTap &&\n      !this.isStopped &&\n      !this.isLocked\n\n    if (isTapToStop) {\n      this.reset()\n      return\n    }\n\n    // const isPullToRefresh =\n    //   this.options.gestureOrientation === 'vertical' &&\n    //   this.scroll === 0 &&\n    //   !this.options.infinite &&\n    //   deltaY <= 5 // touch pull to refresh, not reliable yet\n\n    const isUnknownGesture =\n      (this.options.gestureOrientation === 'vertical' && deltaY === 0) ||\n      (this.options.gestureOrientation === 'horizontal' && deltaX === 0)\n\n    if (isClickOrTap || isUnknownGesture) {\n      // console.log('prevent')\n      return\n    }\n\n    // catch if scrolling on nested scroll elements\n    let composedPath = event.composedPath()\n    composedPath = composedPath.slice(0, composedPath.indexOf(this.rootElement)) // remove parents elements\n\n    const prevent = this.options.prevent\n\n    if (\n      !!composedPath.find(\n        (node) =>\n          node instanceof HTMLElement &&\n          ((typeof prevent === 'function' && prevent?.(node)) ||\n            node.hasAttribute?.('data-lenis-prevent') ||\n            (isTouch && node.hasAttribute?.('data-lenis-prevent-touch')) ||\n            (isWheel && node.hasAttribute?.('data-lenis-prevent-wheel')) ||\n            (this.options.allowNestedScroll &&\n              this.checkNestedScroll(node, { deltaX, deltaY })))\n      )\n    )\n      return\n\n    if (this.isStopped || this.isLocked) {\n      if (event.cancelable) {\n        event.preventDefault() // this will stop forwarding the event to the parent, this is problematic\n      }\n      return\n    }\n\n    const isSmooth =\n      (this.options.syncTouch && isTouch) ||\n      (this.options.smoothWheel && isWheel)\n\n    if (!isSmooth) {\n      this.isScrolling = 'native'\n      this.animate.stop()\n      // @ts-ignore\n      event.lenisStopPropagation = true\n      return\n    }\n\n    let delta = deltaY\n    if (this.options.gestureOrientation === 'both') {\n      delta = Math.abs(deltaY) > Math.abs(deltaX) ? deltaY : deltaX\n    } else if (this.options.gestureOrientation === 'horizontal') {\n      delta = deltaX\n    }\n\n    if (\n      !this.options.overscroll ||\n      this.options.infinite ||\n      (this.options.wrapper !== window &&\n        this.limit > 0 &&\n        ((this.animatedScroll > 0 && this.animatedScroll < this.limit) ||\n          (this.animatedScroll === 0 && deltaY > 0) ||\n          (this.animatedScroll === this.limit && deltaY < 0)))\n    ) {\n      // @ts-ignore\n      event.lenisStopPropagation = true\n      // event.stopPropagation()\n    }\n\n    if (event.cancelable) {\n      event.preventDefault()\n    }\n\n    const isSyncTouch = isTouch && this.options.syncTouch\n    const isTouchEnd = isTouch && event.type === 'touchend'\n\n    const hasTouchInertia = isTouchEnd\n\n    if (hasTouchInertia) {\n      // delta = this.velocity * this.options.touchInertiaMultiplier\n      delta =\n        Math.sign(this.velocity) *\n        Math.pow(Math.abs(this.velocity), this.options.touchInertiaExponent)\n    }\n\n    this.scrollTo(this.targetScroll + delta, {\n      programmatic: false,\n      ...(isSyncTouch\n        ? {\n            lerp: hasTouchInertia ? this.options.syncTouchLerp : 1,\n          }\n        : {\n            lerp: this.options.lerp,\n            duration: this.options.duration,\n            easing: this.options.easing,\n          }),\n    })\n  }\n\n  /**\n   * Force lenis to recalculate the dimensions\n   */\n  resize() {\n    this.dimensions.resize()\n    this.animatedScroll = this.targetScroll = this.actualScroll\n    this.emit()\n  }\n\n  private emit() {\n    this.emitter.emit('scroll', this)\n  }\n\n  private onNativeScroll = () => {\n    if (this._resetVelocityTimeout !== null) {\n      clearTimeout(this._resetVelocityTimeout)\n      this._resetVelocityTimeout = null\n    }\n\n    if (this._preventNextNativeScrollEvent) {\n      this._preventNextNativeScrollEvent = false\n      return\n    }\n\n    if (this.isScrolling === false || this.isScrolling === 'native') {\n      const lastScroll = this.animatedScroll\n      this.animatedScroll = this.targetScroll = this.actualScroll\n      this.lastVelocity = this.velocity\n      this.velocity = this.animatedScroll - lastScroll\n      this.direction = Math.sign(\n        this.animatedScroll - lastScroll\n      ) as Lenis['direction']\n\n      if (!this.isStopped) {\n        this.isScrolling = 'native'\n      }\n\n      this.emit()\n\n      if (this.velocity !== 0) {\n        this._resetVelocityTimeout = setTimeout(() => {\n          this.lastVelocity = this.velocity\n          this.velocity = 0\n          this.isScrolling = false\n          this.emit()\n        }, 400)\n      }\n    }\n  }\n\n  private reset() {\n    this.isLocked = false\n    this.isScrolling = false\n    this.animatedScroll = this.targetScroll = this.actualScroll\n    this.lastVelocity = this.velocity = 0\n    this.animate.stop()\n  }\n\n  /**\n   * Start lenis scroll after it has been stopped\n   */\n  start() {\n    if (!this.isStopped) return\n\n    if (this.options.autoToggle) {\n      this.rootElement.style.removeProperty('overflow')\n      return\n    }\n\n    this.internalStart()\n  }\n\n  private internalStart() {\n    if (!this.isStopped) return\n\n    this.reset()\n    this.isStopped = false\n    this.emit()\n  }\n\n  /**\n   * Stop lenis scroll\n   */\n  stop() {\n    if (this.isStopped) return\n\n    if (this.options.autoToggle) {\n      this.rootElement.style.setProperty('overflow', 'clip')\n      return\n    }\n\n    this.internalStop()\n  }\n\n  private internalStop() {\n    if (this.isStopped) return\n\n    this.reset()\n    this.isStopped = true\n    this.emit()\n  }\n\n  /**\n   * RequestAnimationFrame for lenis\n   *\n   * @param time The time in ms from an external clock like `requestAnimationFrame` or Tempus\n   */\n  raf = (time: number) => {\n    const deltaTime = time - (this.time || time)\n    this.time = time\n\n    this.animate.advance(deltaTime * 0.001)\n\n    if (this.options.autoRaf) {\n      this._rafId = requestAnimationFrame(this.raf)\n    }\n  }\n\n  /**\n   * Scroll to a target value\n   *\n   * @param target The target value to scroll to\n   * @param options The options for the scroll\n   *\n   * @example\n   * lenis.scrollTo(100, {\n   *   offset: 100,\n   *   duration: 1,\n   *   easing: (t) => 1 - Math.cos((t * Math.PI) / 2),\n   *   lerp: 0.1,\n   *   onStart: () => {\n   *     console.log('onStart')\n   *   },\n   *   onComplete: () => {\n   *     console.log('onComplete')\n   *   },\n   * })\n   */\n  scrollTo(\n    target: number | string | HTMLElement,\n    {\n      offset = 0,\n      immediate = false,\n      lock = false,\n      programmatic = true, // called from outside of the class\n      lerp = programmatic ? this.options.lerp : undefined,\n      duration = programmatic ? this.options.duration : undefined,\n      easing = programmatic ? this.options.easing : undefined,\n      onStart,\n      onComplete,\n      force = false, // scroll even if stopped\n      userData,\n    }: ScrollToOptions = {}\n  ) {\n    if ((this.isStopped || this.isLocked) && !force) return\n\n    // keywords\n    if (\n      typeof target === 'string' &&\n      ['top', 'left', 'start', '#'].includes(target)\n    ) {\n      target = 0\n    } else if (\n      typeof target === 'string' &&\n      ['bottom', 'right', 'end'].includes(target)\n    ) {\n      target = this.limit\n    } else {\n      let node\n\n      if (typeof target === 'string') {\n        // CSS selector\n        node = document.querySelector(target)\n\n        if (!node) {\n          if (target === '#top') {\n            target = 0\n          } else {\n            console.warn('Lenis: Target not found', target)\n          }\n        }\n      } else if (target instanceof HTMLElement && target?.nodeType) {\n        // Node element\n        node = target\n      }\n\n      if (node) {\n        if (this.options.wrapper !== window) {\n          // nested scroll offset correction\n          const wrapperRect = this.rootElement.getBoundingClientRect()\n          offset -= this.isHorizontal ? wrapperRect.left : wrapperRect.top\n        }\n\n        const rect = node.getBoundingClientRect()\n\n        target =\n          (this.isHorizontal ? rect.left : rect.top) + this.animatedScroll\n      }\n    }\n\n    if (typeof target !== 'number') return\n\n    target += offset\n    target = Math.round(target)\n\n    if (this.options.infinite) {\n      if (programmatic) {\n        this.targetScroll = this.animatedScroll = this.scroll\n\n        const distance = target - this.animatedScroll\n\n        if (distance > this.limit / 2) {\n          target = target - this.limit\n        } else if (distance < -this.limit / 2) {\n          target = target + this.limit\n        }\n      }\n    } else {\n      target = clamp(0, target, this.limit)\n    }\n\n    if (target === this.targetScroll) {\n      onStart?.(this)\n      onComplete?.(this)\n      return\n    }\n\n    this.userData = userData ?? {}\n\n    if (immediate) {\n      this.animatedScroll = this.targetScroll = target\n      this.setScroll(this.scroll)\n      this.reset()\n      this.preventNextNativeScrollEvent()\n      this.emit()\n      onComplete?.(this)\n      this.userData = {}\n\n      requestAnimationFrame(() => {\n        this.dispatchScrollendEvent()\n      })\n      return\n    }\n\n    if (!programmatic) {\n      this.targetScroll = target\n    }\n\n    // flip to easing/time based animation if at least one of them is provided\n    if (typeof duration === 'number' && typeof easing !== 'function') {\n      easing = defaultEasing\n    } else if (typeof easing === 'function' && typeof duration !== 'number') {\n      duration = 1\n    }\n\n    this.animate.fromTo(this.animatedScroll, target, {\n      duration,\n      easing,\n      lerp,\n      onStart: () => {\n        // started\n        if (lock) this.isLocked = true\n        this.isScrolling = 'smooth'\n        onStart?.(this)\n      },\n      onUpdate: (value: number, completed: boolean) => {\n        this.isScrolling = 'smooth'\n\n        // updated\n        this.lastVelocity = this.velocity\n        this.velocity = value - this.animatedScroll\n        this.direction = Math.sign(this.velocity) as Lenis['direction']\n\n        this.animatedScroll = value\n        this.setScroll(this.scroll)\n\n        if (programmatic) {\n          // wheel during programmatic should stop it\n          this.targetScroll = value\n        }\n\n        if (!completed) this.emit()\n\n        if (completed) {\n          this.reset()\n          this.emit()\n          onComplete?.(this)\n          this.userData = {}\n\n          requestAnimationFrame(() => {\n            this.dispatchScrollendEvent()\n          })\n\n          // avoid emitting event twice\n          this.preventNextNativeScrollEvent()\n        }\n      },\n    })\n  }\n\n  private preventNextNativeScrollEvent() {\n    this._preventNextNativeScrollEvent = true\n\n    requestAnimationFrame(() => {\n      this._preventNextNativeScrollEvent = false\n    })\n  }\n\n  private checkNestedScroll(\n    node: HTMLElement,\n    { deltaX, deltaY }: { deltaX: number; deltaY: number }\n  ) {\n    const time = Date.now()\n\n    // @ts-ignore\n    const cache = (node._lenis ??= {})\n\n    let hasOverflowX,\n      hasOverflowY,\n      isScrollableX,\n      isScrollableY,\n      scrollWidth,\n      scrollHeight,\n      clientWidth,\n      clientHeight\n\n    const gestureOrientation = this.options.gestureOrientation\n\n    if (time - (cache.time ?? 0) > 2000) {\n      cache.time = Date.now()\n\n      const computedStyle = window.getComputedStyle(node)\n      cache.computedStyle = computedStyle\n\n      const overflowXString = computedStyle.overflowX\n      const overflowYString = computedStyle.overflowY\n\n      hasOverflowX = ['auto', 'overlay', 'scroll'].includes(overflowXString)\n      hasOverflowY = ['auto', 'overlay', 'scroll'].includes(overflowYString)\n      cache.hasOverflowX = hasOverflowX\n      cache.hasOverflowY = hasOverflowY\n\n      if (!hasOverflowX && !hasOverflowY) return false // if no overflow, it's not scrollable no matter what, early return saves some computations\n      if (gestureOrientation === 'vertical' && !hasOverflowY) return false\n      if (gestureOrientation === 'horizontal' && !hasOverflowX) return false\n\n      scrollWidth = node.scrollWidth\n      scrollHeight = node.scrollHeight\n\n      clientWidth = node.clientWidth\n      clientHeight = node.clientHeight\n\n      isScrollableX = scrollWidth > clientWidth\n      isScrollableY = scrollHeight > clientHeight\n\n      cache.isScrollableX = isScrollableX\n      cache.isScrollableY = isScrollableY\n      cache.scrollWidth = scrollWidth\n      cache.scrollHeight = scrollHeight\n      cache.clientWidth = clientWidth\n      cache.clientHeight = clientHeight\n    } else {\n      isScrollableX = cache.isScrollableX\n      isScrollableY = cache.isScrollableY\n      hasOverflowX = cache.hasOverflowX\n      hasOverflowY = cache.hasOverflowY\n      scrollWidth = cache.scrollWidth\n      scrollHeight = cache.scrollHeight\n      clientWidth = cache.clientWidth\n      clientHeight = cache.clientHeight\n    }\n\n    if (\n      (!hasOverflowX && !hasOverflowY) ||\n      (!isScrollableX && !isScrollableY)\n    ) {\n      return false\n    }\n\n    if (gestureOrientation === 'vertical' && (!hasOverflowY || !isScrollableY))\n      return false\n\n    if (\n      gestureOrientation === 'horizontal' &&\n      (!hasOverflowX || !isScrollableX)\n    )\n      return false\n\n    let orientation: 'x' | 'y' | undefined\n\n    if (gestureOrientation === 'horizontal') {\n      orientation = 'x'\n    } else if (gestureOrientation === 'vertical') {\n      orientation = 'y'\n    } else {\n      const isScrollingX = deltaX !== 0\n      const isScrollingY = deltaY !== 0\n\n      if (isScrollingX && hasOverflowX && isScrollableX) {\n        orientation = 'x'\n      }\n\n      if (isScrollingY && hasOverflowY && isScrollableY) {\n        orientation = 'y'\n      }\n    }\n\n    if (!orientation) return false\n\n    let scroll, maxScroll, delta, hasOverflow, isScrollable\n\n    if (orientation === 'x') {\n      scroll = node.scrollLeft\n      maxScroll = scrollWidth - clientWidth\n      delta = deltaX\n\n      hasOverflow = hasOverflowX\n      isScrollable = isScrollableX\n    } else if (orientation === 'y') {\n      scroll = node.scrollTop\n      maxScroll = scrollHeight - clientHeight\n      delta = deltaY\n\n      hasOverflow = hasOverflowY\n      isScrollable = isScrollableY\n    } else {\n      return false\n    }\n\n    const willScroll = delta > 0 ? scroll < maxScroll : scroll > 0\n\n    return willScroll && hasOverflow && isScrollable\n  }\n\n  /**\n   * The root element on which lenis is instanced\n   */\n  get rootElement() {\n    return (\n      this.options.wrapper === window\n        ? document.documentElement\n        : this.options.wrapper\n    ) as HTMLElement\n  }\n\n  /**\n   * The limit which is the maximum scroll value\n   */\n  get limit() {\n    if (this.options.naiveDimensions) {\n      if (this.isHorizontal) {\n        return this.rootElement.scrollWidth - this.rootElement.clientWidth\n      } else {\n        return this.rootElement.scrollHeight - this.rootElement.clientHeight\n      }\n    } else {\n      return this.dimensions.limit[this.isHorizontal ? 'x' : 'y']\n    }\n  }\n\n  /**\n   * Whether or not the scroll is horizontal\n   */\n  get isHorizontal() {\n    return this.options.orientation === 'horizontal'\n  }\n\n  /**\n   * The actual scroll value\n   */\n  get actualScroll() {\n    // value browser takes into account\n    // it has to be this way because of DOCTYPE declaration\n    const wrapper = this.options.wrapper as Window | HTMLElement\n\n    return this.isHorizontal\n      ? (wrapper as Window).scrollX ?? (wrapper as HTMLElement).scrollLeft\n      : (wrapper as Window).scrollY ?? (wrapper as HTMLElement).scrollTop\n  }\n\n  /**\n   * The current scroll value\n   */\n  get scroll() {\n    return this.options.infinite\n      ? modulo(this.animatedScroll, this.limit)\n      : this.animatedScroll\n  }\n\n  /**\n   * The progress of the scroll relative to the limit\n   */\n  get progress() {\n    // avoid progress to be NaN\n    return this.limit === 0 ? 1 : this.scroll / this.limit\n  }\n\n  /**\n   * Current scroll state\n   */\n  get isScrolling() {\n    return this._isScrolling\n  }\n\n  private set isScrolling(value: Scrolling) {\n    if (this._isScrolling !== value) {\n      this._isScrolling = value\n      this.updateClassName()\n    }\n  }\n\n  /**\n   * Check if lenis is stopped\n   */\n  get isStopped() {\n    return this._isStopped\n  }\n\n  private set isStopped(value: boolean) {\n    if (this._isStopped !== value) {\n      this._isStopped = value\n      this.updateClassName()\n    }\n  }\n\n  /**\n   * Check if lenis is locked\n   */\n  get isLocked() {\n    return this._isLocked\n  }\n\n  private set isLocked(value: boolean) {\n    if (this._isLocked !== value) {\n      this._isLocked = value\n      this.updateClassName()\n    }\n  }\n\n  /**\n   * Check if lenis is smooth scrolling\n   */\n  get isSmooth() {\n    return this.isScrolling === 'smooth'\n  }\n\n  /**\n   * The class name applied to the wrapper element\n   */\n  get className() {\n    let className = 'lenis'\n    if (this.options.autoToggle) className += ' lenis-autoToggle'\n    if (this.isStopped) className += ' lenis-stopped'\n    if (this.isLocked) className += ' lenis-locked'\n    if (this.isScrolling) className += ' lenis-scrolling'\n    if (this.isScrolling === 'smooth') className += ' lenis-smooth'\n    return className\n  }\n\n  private updateClassName() {\n    this.cleanUpClassName()\n\n    this.rootElement.className =\n      `${this.rootElement.className} ${this.className}`.trim()\n  }\n\n  private cleanUpClassName() {\n    this.rootElement.className = this.rootElement.className\n      .replace(/lenis(-\\w+)?/g, '')\n      .trim()\n  }\n}\n", "import { useEffect, useRef } from 'react';\r\n\r\nconst usePullToRefresh = (callback, threshold = 100) => {\r\n  const initialTouchY = useRef(0);\r\n  const currentTouchY = useRef(0);\r\n  const pulling = useRef(false);\r\n\r\n  useEffect(() => {\r\n    const getScrollPosition = () => {\r\n      // Use Lenis scroll if available and active, otherwise fallback to native scroll\r\n      if (window.lenis && !window.lenis.isStopped) {\r\n        return window.lenis.scroll;\r\n      }\r\n      return window.scrollY;\r\n    };\r\n\r\n    const handleTouchStart = (e) => {\r\n      initialTouchY.current = e.touches[0].clientY;\r\n      pulling.current = false;\r\n    };\r\n\r\n    const handleTouchMove = (e) => {\r\n      currentTouchY.current = e.touches[0].clientY;\r\n      const pullDelta = currentTouchY.current - initialTouchY.current;\r\n\r\n      if (getScrollPosition() <= 5 && pullDelta > 0) { // Using a small epsilon for \"at top\"\r\n        e.preventDefault(); // Prevent native scroll\r\n        pulling.current = true;\r\n      } else {\r\n        pulling.current = false;\r\n      }\r\n    };\r\n\r\n    const handleTouchEnd = () => {\r\n      if (pulling.current && getScrollPosition() <= 5 && (currentTouchY.current - initialTouchY.current) > threshold) {\r\n        callback();\r\n      }\r\n      pulling.current = false;\r\n    };\r\n\r\n    // Attach to document.body to capture touches over entire content\r\n    document.body.addEventListener('touchstart', handleTouchStart);\r\n    document.body.addEventListener('touchmove', handleTouchMove, { passive: false });\r\n    document.body.addEventListener('touchend', handleTouchEnd);\r\n\r\n    return () => {\r\n      document.body.removeEventListener('touchstart', handleTouchStart);\r\n      document.body.removeEventListener('touchmove', handleTouchMove);\r\n      document.body.removeEventListener('touchend', handleTouchEnd);\r\n    };\r\n  }, [callback, threshold]);\r\n};\r\n\r\nexport default usePullToRefresh;\r\n", "export class Subscribable<TListener extends Function> {\n  protected listeners = new Set<TListener>()\n\n  constructor() {\n    this.subscribe = this.subscribe.bind(this)\n  }\n\n  subscribe(listener: TListener): () => void {\n    this.listeners.add(listener)\n\n    this.onSubscribe()\n\n    return () => {\n      this.listeners.delete(listener)\n      this.onUnsubscribe()\n    }\n  }\n\n  hasListeners(): boolean {\n    return this.listeners.size > 0\n  }\n\n  protected onSubscribe(): void {\n    // Do nothing\n  }\n\n  protected onUnsubscribe(): void {\n    // Do nothing\n  }\n}\n", "/**\n * {@link TimeoutManager} does not support passing arguments to the callback.\n *\n * `(_: void)` is the argument type inferred by TypeScript's default typings for\n * `setTimeout(cb, number)`.\n * If we don't accept a single void argument, then\n * `new Promise(resolve => timeoutManager.setTimeout(resolve, N))` is a type error.\n */\nexport type TimeoutCallback = (_: void) => void\n\n/**\n * Wrapping `setTimeout` is awkward from a typing perspective because platform\n * typings may extend the return type of `setTimeout`. For example, NodeJS\n * typings add `NodeJS.Timeout`; but a non-default `timeoutManager` may not be\n * able to return such a type.\n */\nexport type ManagedTimerId = number | { [Symbol.toPrimitive]: () => number }\n\n/**\n * Backend for timer functions.\n */\nexport type TimeoutProvider<TTimerId extends ManagedTimerId = ManagedTimerId> =\n  {\n    readonly setTimeout: (callback: TimeoutCallback, delay: number) => TTimerId\n    readonly clearTimeout: (timeoutId: TTimerId | undefined) => void\n\n    readonly setInterval: (callback: TimeoutCallback, delay: number) => TTimerId\n    readonly clearInterval: (intervalId: TTimerId | undefined) => void\n  }\n\nexport const defaultTimeoutProvider: TimeoutProvider<\n  ReturnType<typeof setTimeout>\n> = {\n  // We need the wrapper function syntax below instead of direct references to\n  // global setTimeout etc.\n  //\n  // BAD: `setTimeout: setTimeout`\n  // GOOD: `setTimeout: (cb, delay) => setTimeout(cb, delay)`\n  //\n  // If we use direct references here, then anything that wants to spy on or\n  // replace the global setTimeout (like tests) won't work since we'll already\n  // have a hard reference to the original implementation at the time when this\n  // file was imported.\n  setTimeout: (callback, delay) => setTimeout(callback, delay),\n  clearTimeout: (timeoutId) => clearTimeout(timeoutId),\n\n  setInterval: (callback, delay) => setInterval(callback, delay),\n  clearInterval: (intervalId) => clearInterval(intervalId),\n}\n\n/**\n * Allows customization of how timeouts are created.\n *\n * @tanstack/query-core makes liberal use of timeouts to implement `staleTime`\n * and `gcTime`. The default TimeoutManager provider uses the platform's global\n * `setTimeout` implementation, which is known to have scalability issues with\n * thousands of timeouts on the event loop.\n *\n * If you hit this limitation, consider providing a custom TimeoutProvider that\n * coalesces timeouts.\n */\nexport class TimeoutManager implements Omit<TimeoutProvider, 'name'> {\n  // We cannot have TimeoutManager<T> as we must instantiate it with a concrete\n  // type at app boot; and if we leave that type, then any new timer provider\n  // would need to support ReturnType<typeof setTimeout>, which is infeasible.\n  //\n  // We settle for type safety for the TimeoutProvider type, and accept that\n  // this class is unsafe internally to allow for extension.\n  #provider: TimeoutProvider<any> = defaultTimeoutProvider\n  #providerCalled = false\n\n  setTimeoutProvider<TTimerId extends ManagedTimerId>(\n    provider: TimeoutProvider<TTimerId>,\n  ): void {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.#providerCalled && provider !== this.#provider) {\n        // After changing providers, `clearTimeout` will not work as expected for\n        // timeouts from the previous provider.\n        //\n        // Since they may allocate the same timeout ID, clearTimeout may cancel an\n        // arbitrary different timeout, or unexpected no-op.\n        //\n        // We could protect against this by mixing the timeout ID bits\n        // deterministically with some per-provider bits.\n        //\n        // We could internally queue `setTimeout` calls to `TimeoutManager` until\n        // some API call to set the initial provider.\n        console.error(\n          `[timeoutManager]: Switching provider after calls to previous provider might result in unexpected behavior.`,\n          { previous: this.#provider, provider },\n        )\n      }\n    }\n\n    this.#provider = provider\n    if (process.env.NODE_ENV !== 'production') {\n      this.#providerCalled = false\n    }\n  }\n\n  setTimeout(callback: TimeoutCallback, delay: number): ManagedTimerId {\n    if (process.env.NODE_ENV !== 'production') {\n      this.#providerCalled = true\n    }\n    return this.#provider.setTimeout(callback, delay)\n  }\n\n  clearTimeout(timeoutId: ManagedTimerId | undefined): void {\n    this.#provider.clearTimeout(timeoutId)\n  }\n\n  setInterval(callback: TimeoutCallback, delay: number): ManagedTimerId {\n    if (process.env.NODE_ENV !== 'production') {\n      this.#providerCalled = true\n    }\n    return this.#provider.setInterval(callback, delay)\n  }\n\n  clearInterval(intervalId: ManagedTimerId | undefined): void {\n    this.#provider.clearInterval(intervalId)\n  }\n}\n\nexport const timeoutManager = new TimeoutManager()\n\n/**\n * In many cases code wants to delay to the next event loop tick; this is not\n * mediated by {@link timeoutManager}.\n *\n * This function is provided to make auditing the `tanstack/query-core` for\n * incorrect use of system `setTimeout` easier.\n */\nexport function systemSetTimeoutZero(callback: TimeoutCallback): void {\n  setTimeout(callback, 0)\n}\n", "import { timeoutManager } from './timeoutManager'\nimport type {\n  DefaultError,\n  Enabled,\n  FetchStatus,\n  MutationKey,\n  MutationStatus,\n  QueryFunction,\n  QueryKey,\n  QueryOptions,\n  StaleTime,\n  StaleTimeFunction,\n} from './types'\nimport type { Mutation } from './mutation'\nimport type { FetchOptions, Query } from './query'\n\n// TYPES\n\ntype DropLast<T extends ReadonlyArray<unknown>> = T extends readonly [\n  ...infer R,\n  unknown,\n]\n  ? readonly [...R]\n  : never\n\ntype TuplePrefixes<T extends ReadonlyArray<unknown>> = T extends readonly []\n  ? readonly []\n  : TuplePrefixes<DropLast<T>> | T\n\nexport interface QueryFilters<TQueryKey extends QueryKey = QueryKey> {\n  /**\n   * Filter to active queries, inactive queries or all queries\n   */\n  type?: QueryTypeFilter\n  /**\n   * Match query key exactly\n   */\n  exact?: boolean\n  /**\n   * Include queries matching this predicate function\n   */\n  predicate?: (query: Query) => boolean\n  /**\n   * Include queries matching this query key\n   */\n  queryKey?: TQueryKey | TuplePrefixes<TQueryKey>\n  /**\n   * Include or exclude stale queries\n   */\n  stale?: boolean\n  /**\n   * Include queries matching their fetchStatus\n   */\n  fetchStatus?: FetchStatus\n}\n\nexport interface MutationFilters<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = unknown,\n  TOnMutateResult = unknown,\n> {\n  /**\n   * Match mutation key exactly\n   */\n  exact?: boolean\n  /**\n   * Include mutations matching this predicate function\n   */\n  predicate?: (\n    mutation: Mutation<TData, TError, TVariables, TOnMutateResult>,\n  ) => boolean\n  /**\n   * Include mutations matching this mutation key\n   */\n  mutationKey?: TuplePrefixes<MutationKey>\n  /**\n   * Filter by mutation status\n   */\n  status?: MutationStatus\n}\n\nexport type Updater<TInput, TOutput> = TOutput | ((input: TInput) => TOutput)\n\nexport type QueryTypeFilter = 'all' | 'active' | 'inactive'\n\n// UTILS\n\nexport const isServer = typeof window === 'undefined' || 'Deno' in globalThis\n\nexport function noop(): void\nexport function noop(): undefined\nexport function noop() {}\n\nexport function functionalUpdate<TInput, TOutput>(\n  updater: Updater<TInput, TOutput>,\n  input: TInput,\n): TOutput {\n  return typeof updater === 'function'\n    ? (updater as (_: TInput) => TOutput)(input)\n    : updater\n}\n\nexport function isValidTimeout(value: unknown): value is number {\n  return typeof value === 'number' && value >= 0 && value !== Infinity\n}\n\nexport function timeUntilStale(updatedAt: number, staleTime?: number): number {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0)\n}\n\nexport function resolveStaleTime<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  staleTime:\n    | undefined\n    | StaleTimeFunction<TQueryFnData, TError, TData, TQueryKey>,\n  query: Query<TQueryFnData, TError, TData, TQueryKey>,\n): StaleTime | undefined {\n  return typeof staleTime === 'function' ? staleTime(query) : staleTime\n}\n\nexport function resolveEnabled<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  enabled: undefined | Enabled<TQueryFnData, TError, TData, TQueryKey>,\n  query: Query<TQueryFnData, TError, TData, TQueryKey>,\n): boolean | undefined {\n  return typeof enabled === 'function' ? enabled(query) : enabled\n}\n\nexport function matchQuery(\n  filters: QueryFilters,\n  query: Query<any, any, any, any>,\n): boolean {\n  const {\n    type = 'all',\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale,\n  } = filters\n\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false\n    }\n  }\n\n  if (type !== 'all') {\n    const isActive = query.isActive()\n    if (type === 'active' && !isActive) {\n      return false\n    }\n    if (type === 'inactive' && isActive) {\n      return false\n    }\n  }\n\n  if (typeof stale === 'boolean' && query.isStale() !== stale) {\n    return false\n  }\n\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false\n  }\n\n  if (predicate && !predicate(query)) {\n    return false\n  }\n\n  return true\n}\n\nexport function matchMutation(\n  filters: MutationFilters,\n  mutation: Mutation<any, any>,\n): boolean {\n  const { exact, status, predicate, mutationKey } = filters\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false\n    }\n  }\n\n  if (status && mutation.state.status !== status) {\n    return false\n  }\n\n  if (predicate && !predicate(mutation)) {\n    return false\n  }\n\n  return true\n}\n\nexport function hashQueryKeyByOptions<TQueryKey extends QueryKey = QueryKey>(\n  queryKey: TQueryKey,\n  options?: Pick<QueryOptions<any, any, any, any>, 'queryKeyHashFn'>,\n): string {\n  const hashFn = options?.queryKeyHashFn || hashKey\n  return hashFn(queryKey)\n}\n\n/**\n * Default query & mutation keys hash function.\n * Hashes the value into a stable hash.\n */\nexport function hashKey(queryKey: QueryKey | MutationKey): string {\n  return JSON.stringify(queryKey, (_, val) =>\n    isPlainObject(val)\n      ? Object.keys(val)\n          .sort()\n          .reduce((result, key) => {\n            result[key] = val[key]\n            return result\n          }, {} as any)\n      : val,\n  )\n}\n\n/**\n * Checks if key `b` partially matches with key `a`.\n */\nexport function partialMatchKey(a: QueryKey, b: QueryKey): boolean\nexport function partialMatchKey(a: any, b: any): boolean {\n  if (a === b) {\n    return true\n  }\n\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    return Object.keys(b).every((key) => partialMatchKey(a[key], b[key]))\n  }\n\n  return false\n}\n\nconst hasOwn = Object.prototype.hasOwnProperty\n\n/**\n * This function returns `a` if `b` is deeply equal.\n * If not, it will replace any deeply equal children of `b` with those of `a`.\n * This can be used for structural sharing between JSON values for example.\n */\nexport function replaceEqualDeep<T>(a: unknown, b: T, depth?: number): T\nexport function replaceEqualDeep(a: any, b: any, depth = 0): any {\n  if (a === b) {\n    return a\n  }\n\n  if (depth > 500) return b\n\n  const array = isPlainArray(a) && isPlainArray(b)\n\n  if (!array && !(isPlainObject(a) && isPlainObject(b))) return b\n\n  const aItems = array ? a : Object.keys(a)\n  const aSize = aItems.length\n  const bItems = array ? b : Object.keys(b)\n  const bSize = bItems.length\n  const copy: any = array ? new Array(bSize) : {}\n\n  let equalItems = 0\n\n  for (let i = 0; i < bSize; i++) {\n    const key: any = array ? i : bItems[i]\n    const aItem = a[key]\n    const bItem = b[key]\n\n    if (aItem === bItem) {\n      copy[key] = aItem\n      if (array ? i < aSize : hasOwn.call(a, key)) equalItems++\n      continue\n    }\n\n    if (\n      aItem === null ||\n      bItem === null ||\n      typeof aItem !== 'object' ||\n      typeof bItem !== 'object'\n    ) {\n      copy[key] = bItem\n      continue\n    }\n\n    const v = replaceEqualDeep(aItem, bItem, depth + 1)\n    copy[key] = v\n    if (v === aItem) equalItems++\n  }\n\n  return aSize === bSize && equalItems === aSize ? a : copy\n}\n\n/**\n * Shallow compare objects.\n */\nexport function shallowEqualObjects<T extends Record<string, any>>(\n  a: T,\n  b: T | undefined,\n): boolean {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false\n  }\n\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nexport function isPlainArray(value: unknown): value is Array<unknown> {\n  return Array.isArray(value) && value.length === Object.keys(value).length\n}\n\n// Copied from: https://github.com/jonschlinkert/is-plain-object\nexport function isPlainObject(o: any): o is Record<PropertyKey, unknown> {\n  if (!hasObjectPrototype(o)) {\n    return false\n  }\n\n  // If has no constructor\n  const ctor = o.constructor\n  if (ctor === undefined) {\n    return true\n  }\n\n  // If has modified prototype\n  const prot = ctor.prototype\n  if (!hasObjectPrototype(prot)) {\n    return false\n  }\n\n  // If constructor does not have an Object-specific method\n  if (!prot.hasOwnProperty('isPrototypeOf')) {\n    return false\n  }\n\n  // Handles Objects created by Object.create(<arbitrary prototype>)\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false\n  }\n\n  // Most likely a plain Object\n  return true\n}\n\nfunction hasObjectPrototype(o: any): boolean {\n  return Object.prototype.toString.call(o) === '[object Object]'\n}\n\nexport function sleep(timeout: number): Promise<void> {\n  return new Promise((resolve) => {\n    timeoutManager.setTimeout(resolve, timeout)\n  })\n}\n\nexport function replaceData<\n  TData,\n  TOptions extends QueryOptions<any, any, any, any>,\n>(prevData: TData | undefined, data: TData, options: TOptions): TData {\n  if (typeof options.structuralSharing === 'function') {\n    return options.structuralSharing(prevData, data) as TData\n  } else if (options.structuralSharing !== false) {\n    if (process.env.NODE_ENV !== 'production') {\n      try {\n        return replaceEqualDeep(prevData, data)\n      } catch (error) {\n        console.error(\n          `Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${options.queryHash}]: ${error}`,\n        )\n\n        // Prevent the replaceEqualDeep from being called again down below.\n        throw error\n      }\n    }\n    // Structurally share data between prev and new data if needed\n    return replaceEqualDeep(prevData, data)\n  }\n  return data\n}\n\nexport function keepPreviousData<T>(\n  previousData: T | undefined,\n): T | undefined {\n  return previousData\n}\n\nexport function addToEnd<T>(items: Array<T>, item: T, max = 0): Array<T> {\n  const newItems = [...items, item]\n  return max && newItems.length > max ? newItems.slice(1) : newItems\n}\n\nexport function addToStart<T>(items: Array<T>, item: T, max = 0): Array<T> {\n  const newItems = [item, ...items]\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems\n}\n\nexport const skipToken = Symbol()\nexport type SkipToken = typeof skipToken\n\nexport function ensureQueryFn<\n  TQueryFnData = unknown,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  options: {\n    queryFn?: QueryFunction<TQueryFnData, TQueryKey> | SkipToken\n    queryHash?: string\n  },\n  fetchOptions?: FetchOptions<TQueryFnData>,\n): QueryFunction<TQueryFnData, TQueryKey> {\n  if (process.env.NODE_ENV !== 'production') {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`,\n      )\n    }\n  }\n\n  // if we attempt to retry a fetch that was triggered from an initialPromise\n  // when we don't have a queryFn yet, we can't retry, so we just return the already rejected initialPromise\n  // if an observer has already mounted, we will be able to retry with that queryFn\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise!\n  }\n\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () =>\n      Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`))\n  }\n\n  return options.queryFn\n}\n\nexport function shouldThrowError<T extends (...args: Array<any>) => boolean>(\n  throwOnError: boolean | T | undefined,\n  params: Parameters<T>,\n): boolean {\n  // Allow throwOnError function to override throwing behavior on a per-error basis\n  if (typeof throwOnError === 'function') {\n    return throwOnError(...params)\n  }\n\n  return !!throwOnError\n}\n\nexport function addConsumeAwareSignal<T>(\n  object: T,\n  getSignal: () => AbortSignal,\n  onCancelled: VoidFunction,\n): T & { signal: AbortSignal } {\n  let consumed = false\n  let signal: AbortSignal | undefined\n\n  Object.defineProperty(object, 'signal', {\n    enumerable: true,\n    get: () => {\n      signal ??= getSignal()\n      if (consumed) {\n        return signal\n      }\n\n      consumed = true\n      if (signal.aborted) {\n        onCancelled()\n      } else {\n        signal.addEventListener('abort', onCancelled, { once: true })\n      }\n\n      return signal\n    },\n  })\n\n  return object as T & { signal: AbortSignal }\n}\n", "import { Subscribable } from './subscribable'\nimport { isServer } from './utils'\n\ntype Listener = (focused: boolean) => void\n\ntype SetupFn = (\n  setFocused: (focused?: boolean) => void,\n) => (() => void) | undefined\n\nexport class FocusManager extends Subscribable<Listener> {\n  #focused?: boolean\n  #cleanup?: () => void\n\n  #setup: SetupFn\n\n  constructor() {\n    super()\n    this.#setup = (onFocus) => {\n      // addEventListener does not exist in React Native, but window does\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus()\n        // Listen to visibilitychange\n        window.addEventListener('visibilitychange', listener, false)\n\n        return () => {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('visibilitychange', listener)\n        }\n      }\n      return\n    }\n  }\n\n  protected onSubscribe(): void {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup)\n    }\n  }\n\n  protected onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.()\n      this.#cleanup = undefined\n    }\n  }\n\n  setEventListener(setup: SetupFn): void {\n    this.#setup = setup\n    this.#cleanup?.()\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === 'boolean') {\n        this.setFocused(focused)\n      } else {\n        this.onFocus()\n      }\n    })\n  }\n\n  setFocused(focused?: boolean): void {\n    const changed = this.#focused !== focused\n    if (changed) {\n      this.#focused = focused\n      this.onFocus()\n    }\n  }\n\n  onFocus(): void {\n    const isFocused = this.isFocused()\n    this.listeners.forEach((listener) => {\n      listener(isFocused)\n    })\n  }\n\n  isFocused(): boolean {\n    if (typeof this.#focused === 'boolean') {\n      return this.#focused\n    }\n\n    // document global can be unavailable in react native\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    return globalThis.document?.visibilityState !== 'hidden'\n  }\n}\n\nexport const focusManager = new FocusManager()\n", "/**\n * Thenable types which matches React's types for promises\n *\n * React seemingly uses `.status`, `.value` and `.reason` properties on a promises to optimistically unwrap data from promises\n *\n * @see https://github.com/facebook/react/blob/main/packages/shared/ReactTypes.js#L112-L138\n * @see https://github.com/facebook/react/blob/4f604941569d2e8947ce1460a0b2997e835f37b9/packages/react-debug-tools/src/ReactDebugHooks.js#L224-L227\n */\n\nimport { noop } from './utils'\n\ninterface Fulfilled<T> {\n  status: 'fulfilled'\n  value: T\n}\ninterface Rejected {\n  status: 'rejected'\n  reason: unknown\n}\ninterface Pending<T> {\n  status: 'pending'\n\n  /**\n   * Resolve the promise with a value.\n   * Will remove the `resolve` and `reject` properties from the promise.\n   */\n  resolve: (value: T) => void\n  /**\n   * Reject the promise with a reason.\n   * Will remove the `resolve` and `reject` properties from the promise.\n   */\n  reject: (reason: unknown) => void\n}\n\nexport type FulfilledThenable<T> = Promise<T> & Fulfilled<T>\nexport type RejectedThenable<T> = Promise<T> & Rejected\nexport type PendingThenable<T> = Promise<T> & Pending<T>\n\nexport type Thenable<T> =\n  | FulfilledThenable<T>\n  | RejectedThenable<T>\n  | PendingThenable<T>\n\nexport function pendingThenable<T>(): PendingThenable<T> {\n  let resolve: Pending<T>['resolve']\n  let reject: Pending<T>['reject']\n  // this could use `Promise.withResolvers()` in the future\n  const thenable = new Promise((_resolve, _reject) => {\n    resolve = _resolve\n    reject = _reject\n  }) as PendingThenable<T>\n\n  thenable.status = 'pending'\n  thenable.catch(() => {\n    // prevent unhandled rejection errors\n  })\n\n  function finalize(data: Fulfilled<T> | Rejected) {\n    Object.assign(thenable, data)\n\n    // clear pending props props to avoid calling them twice\n    delete (thenable as Partial<PendingThenable<T>>).resolve\n    delete (thenable as Partial<PendingThenable<T>>).reject\n  }\n\n  thenable.resolve = (value) => {\n    finalize({\n      status: 'fulfilled',\n      value,\n    })\n\n    resolve(value)\n  }\n  thenable.reject = (reason) => {\n    finalize({\n      status: 'rejected',\n      reason,\n    })\n\n    reject(reason)\n  }\n\n  return thenable\n}\n\n/**\n * This function takes a Promise-like input and detects whether the data\n * is synchronously available or not.\n *\n * It does not inspect .status, .value or .reason properties of the promise,\n * as those are not always available, and the .status of React's promises\n * should not be considered part of the public API.\n */\nexport function tryResolveSync(promise: Promise<unknown> | Thenable<unknown>) {\n  let data: unknown\n\n  promise\n    .then((result) => {\n      data = result\n      return result\n    }, noop)\n    // .catch can be unavailable on certain kinds of thenable's\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    ?.catch(noop)\n\n  if (data !== undefined) {\n    return { data }\n  }\n\n  return undefined\n}\n", "// TYPES\n\nimport { systemSetTimeoutZero } from './timeoutManager'\n\ntype NotifyCallback = () => void\n\ntype NotifyFunction = (callback: () => void) => void\n\ntype BatchNotifyFunction = (callback: () => void) => void\n\ntype BatchCallsCallback<T extends Array<unknown>> = (...args: T) => void\n\ntype ScheduleFunction = (callback: () => void) => void\n\nexport const defaultScheduler: ScheduleFunction = systemSetTimeoutZero\n\nexport function createNotifyManager() {\n  let queue: Array<NotifyCallback> = []\n  let transactions = 0\n  let notifyFn: NotifyFunction = (callback) => {\n    callback()\n  }\n  let batchNotifyFn: BatchNotifyFunction = (callback: () => void) => {\n    callback()\n  }\n  let scheduleFn = defaultScheduler\n\n  const schedule = (callback: NotifyCallback): void => {\n    if (transactions) {\n      queue.push(callback)\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback)\n      })\n    }\n  }\n  const flush = (): void => {\n    const originalQueue = queue\n    queue = []\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback)\n          })\n        })\n      })\n    }\n  }\n\n  return {\n    batch: <T>(callback: () => T): T => {\n      let result\n      transactions++\n      try {\n        result = callback()\n      } finally {\n        transactions--\n        if (!transactions) {\n          flush()\n        }\n      }\n      return result\n    },\n    /**\n     * All calls to the wrapped function will be batched.\n     */\n    batchCalls: <T extends Array<unknown>>(\n      callback: BatchCallsCallback<T>,\n    ): BatchCallsCallback<T> => {\n      return (...args) => {\n        schedule(() => {\n          callback(...args)\n        })\n      }\n    },\n    schedule,\n    /**\n     * Use this method to set a custom notify function.\n     * This can be used to for example wrap notifications with `React.act` while running tests.\n     */\n    setNotifyFunction: (fn: NotifyFunction) => {\n      notifyFn = fn\n    },\n    /**\n     * Use this method to set a custom function to batch notifications together into a single tick.\n     * By default React Query will use the batch function provided by ReactDOM or React Native.\n     */\n    setBatchNotifyFunction: (fn: BatchNotifyFunction) => {\n      batchNotifyFn = fn\n    },\n    setScheduler: (fn: ScheduleFunction) => {\n      scheduleFn = fn\n    },\n  } as const\n}\n\n// SINGLETON\nexport const notifyManager = createNotifyManager()\n", "import { Subscribable } from './subscribable'\nimport { isServer } from './utils'\n\ntype Listener = (online: boolean) => void\ntype SetupFn = (setOnline: Listener) => (() => void) | undefined\n\nexport class OnlineManager extends Subscribable<Listener> {\n  #online = true\n  #cleanup?: () => void\n\n  #setup: SetupFn\n\n  constructor() {\n    super()\n    this.#setup = (onOnline) => {\n      // addEventListener does not exist in React Native, but window does\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true)\n        const offlineListener = () => onOnline(false)\n        // Listen to online\n        window.addEventListener('online', onlineListener, false)\n        window.addEventListener('offline', offlineListener, false)\n\n        return () => {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('online', onlineListener)\n          window.removeEventListener('offline', offlineListener)\n        }\n      }\n\n      return\n    }\n  }\n\n  protected onSubscribe(): void {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup)\n    }\n  }\n\n  protected onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.()\n      this.#cleanup = undefined\n    }\n  }\n\n  setEventListener(setup: SetupFn): void {\n    this.#setup = setup\n    this.#cleanup?.()\n    this.#cleanup = setup(this.setOnline.bind(this))\n  }\n\n  setOnline(online: boolean): void {\n    const changed = this.#online !== online\n\n    if (changed) {\n      this.#online = online\n      this.listeners.forEach((listener) => {\n        listener(online)\n      })\n    }\n  }\n\n  isOnline(): boolean {\n    return this.#online\n  }\n}\n\nexport const onlineManager = new OnlineManager()\n", "import { focusManager } from './focusManager'\nimport { onlineManager } from './onlineManager'\nimport { pendingThenable } from './thenable'\nimport { isServer, sleep } from './utils'\nimport type { Thenable } from './thenable'\nimport type { CancelOptions, DefaultError, NetworkMode } from './types'\n\n// TYPES\n\ninterface RetryerConfig<TData = unknown, TError = DefaultError> {\n  fn: () => TData | Promise<TData>\n  initialPromise?: Promise<TData>\n  onCancel?: (error: TError) => void\n  onFail?: (failureCount: number, error: TError) => void\n  onPause?: () => void\n  onContinue?: () => void\n  retry?: RetryValue<TError>\n  retryDelay?: RetryDelayValue<TError>\n  networkMode: NetworkMode | undefined\n  canRun: () => boolean\n}\n\nexport interface Retryer<TData = unknown> {\n  promise: Promise<TData>\n  cancel: (cancelOptions?: CancelOptions) => void\n  continue: () => Promise<unknown>\n  cancelRetry: () => void\n  continueRetry: () => void\n  canStart: () => boolean\n  start: () => Promise<TData>\n  status: () => 'pending' | 'resolved' | 'rejected'\n}\n\nexport type RetryValue<TError> = boolean | number | ShouldRetryFunction<TError>\n\ntype ShouldRetryFunction<TError = DefaultError> = (\n  failureCount: number,\n  error: TError,\n) => boolean\n\nexport type RetryDelayValue<TError> = number | RetryDelayFunction<TError>\n\ntype RetryDelayFunction<TError = DefaultError> = (\n  failureCount: number,\n  error: TError,\n) => number\n\nfunction defaultRetryDelay(failureCount: number) {\n  return Math.min(1000 * 2 ** failureCount, 30000)\n}\n\nexport function canFetch(networkMode: NetworkMode | undefined): boolean {\n  return (networkMode ?? 'online') === 'online'\n    ? onlineManager.isOnline()\n    : true\n}\n\nexport class CancelledError extends Error {\n  revert?: boolean\n  silent?: boolean\n  constructor(options?: CancelOptions) {\n    super('CancelledError')\n    this.revert = options?.revert\n    this.silent = options?.silent\n  }\n}\n\n/**\n * @deprecated Use instanceof `CancelledError` instead.\n */\nexport function isCancelledError(value: any): value is CancelledError {\n  return value instanceof CancelledError\n}\n\nexport function createRetryer<TData = unknown, TError = DefaultError>(\n  config: RetryerConfig<TData, TError>,\n): Retryer<TData> {\n  let isRetryCancelled = false\n  let failureCount = 0\n  let continueFn: ((value?: unknown) => void) | undefined\n\n  const thenable = pendingThenable<TData>()\n\n  const isResolved = () =>\n    (thenable.status as Thenable<TData>['status']) !== 'pending'\n\n  const cancel = (cancelOptions?: CancelOptions): void => {\n    if (!isResolved()) {\n      const error = new CancelledError(cancelOptions) as TError\n      reject(error)\n\n      config.onCancel?.(error)\n    }\n  }\n  const cancelRetry = () => {\n    isRetryCancelled = true\n  }\n\n  const continueRetry = () => {\n    isRetryCancelled = false\n  }\n\n  const canContinue = () =>\n    focusManager.isFocused() &&\n    (config.networkMode === 'always' || onlineManager.isOnline()) &&\n    config.canRun()\n\n  const canStart = () => canFetch(config.networkMode) && config.canRun()\n\n  const resolve = (value: any) => {\n    if (!isResolved()) {\n      continueFn?.()\n      thenable.resolve(value)\n    }\n  }\n\n  const reject = (value: any) => {\n    if (!isResolved()) {\n      continueFn?.()\n      thenable.reject(value)\n    }\n  }\n\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved() || canContinue()) {\n          continueResolve(value)\n        }\n      }\n      config.onPause?.()\n    }).then(() => {\n      continueFn = undefined\n      if (!isResolved()) {\n        config.onContinue?.()\n      }\n    })\n  }\n\n  // Create loop function\n  const run = () => {\n    // Do nothing if already resolved\n    if (isResolved()) {\n      return\n    }\n\n    let promiseOrValue: any\n\n    // we can re-use config.initialPromise on the first call of run()\n    const initialPromise =\n      failureCount === 0 ? config.initialPromise : undefined\n\n    // Execute query\n    try {\n      promiseOrValue = initialPromise ?? config.fn()\n    } catch (error) {\n      promiseOrValue = Promise.reject(error)\n    }\n\n    Promise.resolve(promiseOrValue)\n      .then(resolve)\n      .catch((error) => {\n        // Stop if the fetch is already resolved\n        if (isResolved()) {\n          return\n        }\n\n        // Do we need to retry the request?\n        const retry = config.retry ?? (isServer ? 0 : 3)\n        const retryDelay = config.retryDelay ?? defaultRetryDelay\n        const delay =\n          typeof retryDelay === 'function'\n            ? retryDelay(failureCount, error)\n            : retryDelay\n        const shouldRetry =\n          retry === true ||\n          (typeof retry === 'number' && failureCount < retry) ||\n          (typeof retry === 'function' && retry(failureCount, error))\n\n        if (isRetryCancelled || !shouldRetry) {\n          // We are done if the query does not need to be retried\n          reject(error)\n          return\n        }\n\n        failureCount++\n\n        // Notify on fail\n        config.onFail?.(failureCount, error)\n\n        // Delay\n        sleep(delay)\n          // Pause if the document is not visible or when the device is offline\n          .then(() => {\n            return canContinue() ? undefined : pause()\n          })\n          .then(() => {\n            if (isRetryCancelled) {\n              reject(error)\n            } else {\n              run()\n            }\n          })\n      })\n  }\n\n  return {\n    promise: thenable,\n    status: () => thenable.status,\n    cancel,\n    continue: () => {\n      continueFn?.()\n      return thenable\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      // Start loop\n      if (canStart()) {\n        run()\n      } else {\n        pause().then(run)\n      }\n      return thenable\n    },\n  }\n}\n", "import { timeoutManager } from './timeoutManager'\nimport { isServer, isValidTimeout } from './utils'\nimport type { ManagedTimerId } from './timeoutManager'\n\nexport abstract class Removable {\n  gcTime!: number\n  #gcTimeout?: ManagedTimerId\n\n  destroy(): void {\n    this.clearGcTimeout()\n  }\n\n  protected scheduleGc(): void {\n    this.clearGcTimeout()\n\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = timeoutManager.setTimeout(() => {\n        this.optionalRemove()\n      }, this.gcTime)\n    }\n  }\n\n  protected updateGcTime(newGcTime: number | undefined): void {\n    // Default to 5 minutes (Infinity for server-side) if no gcTime is set\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1000),\n    )\n  }\n\n  protected clearGcTimeout() {\n    if (this.#gcTimeout) {\n      timeoutManager.clearTimeout(this.#gcTimeout)\n      this.#gcTimeout = undefined\n    }\n  }\n\n  protected abstract optionalRemove(): void\n}\n", "import {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  skipToken,\n  timeUntilStale,\n} from './utils'\nimport { notifyManager } from './notifyManager'\nimport { CancelledError, canFetch, createRetryer } from './retryer'\nimport { Removable } from './removable'\nimport type { QueryCache } from './queryCache'\nimport type { QueryClient } from './queryClient'\nimport type {\n  CancelOptions,\n  DefaultError,\n  FetchStatus,\n  InitialDataFunction,\n  OmitKeyof,\n  QueryFunctionContext,\n  QueryKey,\n  QueryMeta,\n  QueryOptions,\n  QueryStatus,\n  SetDataOptions,\n  StaleTime,\n} from './types'\nimport type { QueryObserver } from './queryObserver'\nimport type { Retryer } from './retryer'\n\n// TYPES\n\ninterface QueryConfig<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey extends QueryKey = QueryKey,\n> {\n  client: QueryClient\n  queryKey: TQueryKey\n  queryHash: string\n  options?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>\n  defaultOptions?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>\n  state?: QueryState<TData, TError>\n}\n\nexport interface QueryState<TData = unknown, TError = DefaultError> {\n  data: TData | undefined\n  dataUpdateCount: number\n  dataUpdatedAt: number\n  error: TError | null\n  errorUpdateCount: number\n  errorUpdatedAt: number\n  fetchFailureCount: number\n  fetchFailureReason: TError | null\n  fetchMeta: FetchMeta | null\n  isInvalidated: boolean\n  status: QueryStatus\n  fetchStatus: FetchStatus\n}\n\nexport interface FetchContext<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey extends QueryKey = QueryKey,\n> {\n  fetchFn: () => unknown | Promise<unknown>\n  fetchOptions?: FetchOptions\n  signal: AbortSignal\n  options: QueryOptions<TQueryFnData, TError, TData, any>\n  client: QueryClient\n  queryKey: TQueryKey\n  state: QueryState<TData, TError>\n}\n\nexport interface QueryBehavior<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> {\n  onFetch: (\n    context: FetchContext<TQueryFnData, TError, TData, TQueryKey>,\n    query: Query,\n  ) => void\n}\n\nexport type FetchDirection = 'forward' | 'backward'\n\nexport interface FetchMeta {\n  fetchMore?: { direction: FetchDirection }\n}\n\nexport interface FetchOptions<TData = unknown> {\n  cancelRefetch?: boolean\n  meta?: FetchMeta\n  initialPromise?: Promise<TData>\n}\n\ninterface FailedAction<TError> {\n  type: 'failed'\n  failureCount: number\n  error: TError\n}\n\ninterface FetchAction {\n  type: 'fetch'\n  meta?: FetchMeta\n}\n\ninterface SuccessAction<TData> {\n  data: TData | undefined\n  type: 'success'\n  dataUpdatedAt?: number\n  manual?: boolean\n}\n\ninterface ErrorAction<TError> {\n  type: 'error'\n  error: TError\n}\n\ninterface InvalidateAction {\n  type: 'invalidate'\n}\n\ninterface PauseAction {\n  type: 'pause'\n}\n\ninterface ContinueAction {\n  type: 'continue'\n}\n\ninterface SetStateAction<TData, TError> {\n  type: 'setState'\n  state: Partial<QueryState<TData, TError>>\n  setStateOptions?: SetStateOptions\n}\n\nexport type Action<TData, TError> =\n  | ContinueAction\n  | ErrorAction<TError>\n  | FailedAction<TError>\n  | FetchAction\n  | InvalidateAction\n  | PauseAction\n  | SetStateAction<TData, TError>\n  | SuccessAction<TData>\n\nexport interface SetStateOptions {\n  meta?: any\n}\n\n// CLASS\n\nexport class Query<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> extends Removable {\n  queryKey: TQueryKey\n  queryHash: string\n  options!: QueryOptions<TQueryFnData, TError, TData, TQueryKey>\n  state: QueryState<TData, TError>\n\n  #initialState: QueryState<TData, TError>\n  #revertState?: QueryState<TData, TError>\n  #cache: QueryCache\n  #client: QueryClient\n  #retryer?: Retryer<TData>\n  observers: Array<QueryObserver<any, any, any, any, any>>\n  #defaultOptions?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>\n  #abortSignalConsumed: boolean\n\n  constructor(config: QueryConfig<TQueryFnData, TError, TData, TQueryKey>) {\n    super()\n\n    this.#abortSignalConsumed = false\n    this.#defaultOptions = config.defaultOptions\n    this.setOptions(config.options)\n    this.observers = []\n    this.#client = config.client\n    this.#cache = this.#client.getQueryCache()\n    this.queryKey = config.queryKey\n    this.queryHash = config.queryHash\n    this.#initialState = getDefaultState(this.options)\n    this.state = config.state ?? this.#initialState\n    this.scheduleGc()\n  }\n  get meta(): QueryMeta | undefined {\n    return this.options.meta\n  }\n\n  get promise(): Promise<TData> | undefined {\n    return this.#retryer?.promise\n  }\n\n  setOptions(\n    options?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n  ): void {\n    this.options = { ...this.#defaultOptions, ...options }\n\n    this.updateGcTime(this.options.gcTime)\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    if (this.state && this.state.data === undefined) {\n      const defaultState = getDefaultState(this.options)\n      if (defaultState.data !== undefined) {\n        this.setState(\n          successState(defaultState.data, defaultState.dataUpdatedAt),\n        )\n        this.#initialState = defaultState\n      }\n    }\n  }\n\n  protected optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === 'idle') {\n      this.#cache.remove(this)\n    }\n  }\n\n  setData(\n    newData: TData,\n    options?: SetDataOptions & { manual: boolean },\n  ): TData {\n    const data = replaceData(this.state.data, newData, this.options)\n\n    // Set data and mark it as cached\n    this.#dispatch({\n      data,\n      type: 'success',\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual,\n    })\n\n    return data\n  }\n\n  setState(\n    state: Partial<QueryState<TData, TError>>,\n    setStateOptions?: SetStateOptions,\n  ): void {\n    this.#dispatch({ type: 'setState', state, setStateOptions })\n  }\n\n  cancel(options?: CancelOptions): Promise<void> {\n    const promise = this.#retryer?.promise\n    this.#retryer?.cancel(options)\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve()\n  }\n\n  destroy(): void {\n    super.destroy()\n\n    this.cancel({ silent: true })\n  }\n\n  reset(): void {\n    this.destroy()\n    this.setState(this.#initialState)\n  }\n\n  isActive(): boolean {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false,\n    )\n  }\n\n  isDisabled(): boolean {\n    if (this.getObserversCount() > 0) {\n      return !this.isActive()\n    }\n    // if a query has no observers, it should still be considered disabled if it never attempted a fetch\n    return (\n      this.options.queryFn === skipToken ||\n      this.state.dataUpdateCount + this.state.errorUpdateCount === 0\n    )\n  }\n\n  isStatic(): boolean {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) =>\n          resolveStaleTime(observer.options.staleTime, this) === 'static',\n      )\n    }\n\n    return false\n  }\n\n  isStale(): boolean {\n    // check observers first, their `isStale` has the source of truth\n    // calculated with `isStaleByTime` and it takes `enabled` into account\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale,\n      )\n    }\n\n    return this.state.data === undefined || this.state.isInvalidated\n  }\n\n  isStaleByTime(staleTime: StaleTime = 0): boolean {\n    // no data is always stale\n    if (this.state.data === undefined) {\n      return true\n    }\n    // static is never stale\n    if (staleTime === 'static') {\n      return false\n    }\n    // if the query is invalidated, it is stale\n    if (this.state.isInvalidated) {\n      return true\n    }\n\n    return !timeUntilStale(this.state.dataUpdatedAt, staleTime)\n  }\n\n  onFocus(): void {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus())\n\n    observer?.refetch({ cancelRefetch: false })\n\n    // Continue fetch if currently paused\n    this.#retryer?.continue()\n  }\n\n  onOnline(): void {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect())\n\n    observer?.refetch({ cancelRefetch: false })\n\n    // Continue fetch if currently paused\n    this.#retryer?.continue()\n  }\n\n  addObserver(observer: QueryObserver<any, any, any, any, any>): void {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer)\n\n      // Stop the query from being garbage collected\n      this.clearGcTimeout()\n\n      this.#cache.notify({ type: 'observerAdded', query: this, observer })\n    }\n  }\n\n  removeObserver(observer: QueryObserver<any, any, any, any, any>): void {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer)\n\n      if (!this.observers.length) {\n        // If the transport layer does not support cancellation\n        // we'll let the query continue so the result can be cached\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true })\n          } else {\n            this.#retryer.cancelRetry()\n          }\n        }\n\n        this.scheduleGc()\n      }\n\n      this.#cache.notify({ type: 'observerRemoved', query: this, observer })\n    }\n  }\n\n  getObserversCount(): number {\n    return this.observers.length\n  }\n\n  invalidate(): void {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: 'invalidate' })\n    }\n  }\n\n  async fetch(\n    options?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n    fetchOptions?: FetchOptions<TQueryFnData>,\n  ): Promise<TData> {\n    if (\n      this.state.fetchStatus !== 'idle' &&\n      // If the promise in the retryer is already rejected, we have to definitely\n      // re-start the fetch; there is a chance that the query is still in a\n      // pending state when that happens\n      this.#retryer?.status() !== 'rejected'\n    ) {\n      if (this.state.data !== undefined && fetchOptions?.cancelRefetch) {\n        // Silently cancel current fetch if the user wants to cancel refetch\n        this.cancel({ silent: true })\n      } else if (this.#retryer) {\n        // make sure that retries that were potentially cancelled due to unmounts can continue\n        this.#retryer.continueRetry()\n        // Return current promise if we are already fetching\n        return this.#retryer.promise\n      }\n    }\n\n    // Update config if passed, otherwise the config from the last execution is used\n    if (options) {\n      this.setOptions(options)\n    }\n\n    // Use the options from the first observer with a query function if no function is found.\n    // This can happen when the query is hydrated or created with setQueryData.\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn)\n      if (observer) {\n        this.setOptions(observer.options)\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`,\n        )\n      }\n    }\n\n    const abortController = new AbortController()\n\n    // Adds an enumerable signal property to the object that\n    // which sets abortSignalConsumed to true when the signal\n    // is read.\n    const addSignalProperty = (object: unknown) => {\n      Object.defineProperty(object, 'signal', {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true\n          return abortController.signal\n        },\n      })\n    }\n\n    // Create fetch function\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions)\n\n      // Create query function context\n      const createQueryFnContext = (): QueryFunctionContext<TQueryKey> => {\n        const queryFnContext: OmitKeyof<\n          QueryFunctionContext<TQueryKey>,\n          'signal'\n        > = {\n          client: this.#client,\n          queryKey: this.queryKey,\n          meta: this.meta,\n        }\n        addSignalProperty(queryFnContext)\n        return queryFnContext as QueryFunctionContext<TQueryKey>\n      }\n\n      const queryFnContext = createQueryFnContext()\n\n      this.#abortSignalConsumed = false\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this as unknown as Query,\n        )\n      }\n\n      return queryFn(queryFnContext)\n    }\n\n    // Trigger behavior hook\n    const createFetchContext = (): FetchContext<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey\n    > => {\n      const context: OmitKeyof<\n        FetchContext<TQueryFnData, TError, TData, TQueryKey>,\n        'signal'\n      > = {\n        fetchOptions,\n        options: this.options,\n        queryKey: this.queryKey,\n        client: this.#client,\n        state: this.state,\n        fetchFn,\n      }\n\n      addSignalProperty(context)\n      return context as FetchContext<TQueryFnData, TError, TData, TQueryKey>\n    }\n\n    const context = createFetchContext()\n\n    this.options.behavior?.onFetch(context, this as unknown as Query)\n\n    // Store state in case the current fetch needs to be reverted\n    this.#revertState = this.state\n\n    // Set to fetching state if not already in it\n    if (\n      this.state.fetchStatus === 'idle' ||\n      this.state.fetchMeta !== context.fetchOptions?.meta\n    ) {\n      this.#dispatch({ type: 'fetch', meta: context.fetchOptions?.meta })\n    }\n\n    // Try to fetch the data\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise as\n        | Promise<TData>\n        | undefined,\n      fn: context.fetchFn as () => Promise<TData>,\n      onCancel: (error) => {\n        if (error instanceof CancelledError && error.revert) {\n          this.setState({\n            ...this.#revertState,\n            fetchStatus: 'idle' as const,\n          })\n        }\n        abortController.abort()\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: 'failed', failureCount, error })\n      },\n      onPause: () => {\n        this.#dispatch({ type: 'pause' })\n      },\n      onContinue: () => {\n        this.#dispatch({ type: 'continue' })\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true,\n    })\n\n    try {\n      const data = await this.#retryer.start()\n      // this is more of a runtime guard\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (data === undefined) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.error(\n            `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`,\n          )\n        }\n        throw new Error(`${this.queryHash} data is undefined`)\n      }\n\n      this.setData(data)\n\n      // Notify cache callback\n      this.#cache.config.onSuccess?.(data, this as Query<any, any, any, any>)\n      this.#cache.config.onSettled?.(\n        data,\n        this.state.error as any,\n        this as Query<any, any, any, any>,\n      )\n      return data\n    } catch (error) {\n      if (error instanceof CancelledError) {\n        if (error.silent) {\n          // silent cancellation implies a new fetch is going to be started,\n          // so we piggyback onto that promise\n          return this.#retryer.promise\n        } else if (error.revert) {\n          // transform error into reverted state data\n          // if the initial fetch was cancelled, we have no data, so we have\n          // to get reject with a CancelledError\n          if (this.state.data === undefined) {\n            throw error\n          }\n          return this.state.data\n        }\n      }\n      this.#dispatch({\n        type: 'error',\n        error: error as TError,\n      })\n\n      // Notify cache callback\n      this.#cache.config.onError?.(\n        error as any,\n        this as Query<any, any, any, any>,\n      )\n      this.#cache.config.onSettled?.(\n        this.state.data,\n        error as any,\n        this as Query<any, any, any, any>,\n      )\n\n      throw error // rethrow the error for further handling\n    } finally {\n      // Schedule query gc after fetching\n      this.scheduleGc()\n    }\n  }\n\n  #dispatch(action: Action<TData, TError>): void {\n    const reducer = (\n      state: QueryState<TData, TError>,\n    ): QueryState<TData, TError> => {\n      switch (action.type) {\n        case 'failed':\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error,\n          }\n        case 'pause':\n          return {\n            ...state,\n            fetchStatus: 'paused',\n          }\n        case 'continue':\n          return {\n            ...state,\n            fetchStatus: 'fetching',\n          }\n        case 'fetch':\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null,\n          }\n        case 'success':\n          const newState = {\n            ...state,\n            ...successState(action.data, action.dataUpdatedAt),\n            dataUpdateCount: state.dataUpdateCount + 1,\n            ...(!action.manual && {\n              fetchStatus: 'idle' as const,\n              fetchFailureCount: 0,\n              fetchFailureReason: null,\n            }),\n          }\n          // If fetching ends successfully, we don't need revertState as a fallback anymore.\n          // For manual updates, capture the state to revert to it in case of a cancellation.\n          this.#revertState = action.manual ? newState : undefined\n\n          return newState\n        case 'error':\n          const error = action.error\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: 'idle',\n            status: 'error',\n            // flag existing data as invalidated if we get a background error\n            // note that \"no data\" always means stale so we can set unconditionally here\n            isInvalidated: true,\n          }\n        case 'invalidate':\n          return {\n            ...state,\n            isInvalidated: true,\n          }\n        case 'setState':\n          return {\n            ...state,\n            ...action.state,\n          }\n      }\n    }\n\n    this.state = reducer(this.state)\n\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate()\n      })\n\n      this.#cache.notify({ query: this, type: 'updated', action })\n    })\n  }\n}\n\nexport function fetchState<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey extends QueryKey,\n>(\n  data: TData | undefined,\n  options: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? 'fetching' : 'paused',\n    ...(data === undefined &&\n      ({\n        error: null,\n        status: 'pending',\n      } as const)),\n  } as const\n}\n\nfunction successState<TData>(data: TData | undefined, dataUpdatedAt?: number) {\n  return {\n    data,\n    dataUpdatedAt: dataUpdatedAt ?? Date.now(),\n    error: null,\n    isInvalidated: false,\n    status: 'success' as const,\n  }\n}\n\nfunction getDefaultState<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey extends QueryKey,\n>(\n  options: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n): QueryState<TData, TError> {\n  const data =\n    typeof options.initialData === 'function'\n      ? (options.initialData as InitialDataFunction<TData>)()\n      : options.initialData\n\n  const hasData = data !== undefined\n\n  const initialDataUpdatedAt = hasData\n    ? typeof options.initialDataUpdatedAt === 'function'\n      ? options.initialDataUpdatedAt()\n      : options.initialDataUpdatedAt\n    : 0\n\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? (initialDataUpdatedAt ?? Date.now()) : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? 'success' : 'pending',\n    fetchStatus: 'idle',\n  }\n}\n", "import {\n  addConsumeAwareSignal,\n  addToEnd,\n  addToStart,\n  ensureQueryFn,\n} from './utils'\nimport type { QueryBehavior } from './query'\nimport type {\n  InfiniteData,\n  InfiniteQueryPageParamsOptions,\n  OmitKeyof,\n  QueryFunctionContext,\n  QueryKey,\n} from './types'\n\nexport function infiniteQueryBehavior<TQueryFnData, TError, TData, TPageParam>(\n  pages?: number,\n): QueryBehavior<TQueryFnData, TError, InfiniteData<TData, TPageParam>> {\n  return {\n    onFetch: (context, query) => {\n      const options = context.options as InfiniteQueryPageParamsOptions<TData>\n      const direction = context.fetchOptions?.meta?.fetchMore?.direction\n      const oldPages = context.state.data?.pages || []\n      const oldPageParams = context.state.data?.pageParams || []\n      let result: InfiniteData<unknown> = { pages: [], pageParams: [] }\n      let currentPage = 0\n\n      const fetchFn = async () => {\n        let cancelled = false\n        const addSignalProperty = (object: unknown) => {\n          addConsumeAwareSignal(\n            object,\n            () => context.signal,\n            () => (cancelled = true),\n          )\n        }\n\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions)\n\n        // Create function to fetch a page\n        const fetchPage = async (\n          data: InfiniteData<unknown>,\n          param: unknown,\n          previous?: boolean,\n        ): Promise<InfiniteData<unknown>> => {\n          if (cancelled) {\n            return Promise.reject()\n          }\n\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data)\n          }\n\n          const createQueryFnContext = () => {\n            const queryFnContext: OmitKeyof<\n              QueryFunctionContext<QueryKey, unknown>,\n              'signal'\n            > = {\n              client: context.client,\n              queryKey: context.queryKey,\n              pageParam: param,\n              direction: previous ? 'backward' : 'forward',\n              meta: context.options.meta,\n            }\n            addSignalProperty(queryFnContext)\n            return queryFnContext as QueryFunctionContext<QueryKey, unknown>\n          }\n\n          const queryFnContext = createQueryFnContext()\n\n          const page = await queryFn(queryFnContext)\n\n          const { maxPages } = context.options\n          const addTo = previous ? addToStart : addToEnd\n\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages),\n          }\n        }\n\n        // fetch next / previous page?\n        if (direction && oldPages.length) {\n          const previous = direction === 'backward'\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams,\n          }\n          const param = pageParamFn(options, oldData)\n\n          result = await fetchPage(oldData, param, previous)\n        } else {\n          const remainingPages = pages ?? oldPages.length\n\n          // Fetch all pages\n          do {\n            const param =\n              currentPage === 0\n                ? (oldPageParams[0] ?? options.initialPageParam)\n                : getNextPageParam(options, result)\n            if (currentPage > 0 && param == null) {\n              break\n            }\n            result = await fetchPage(result, param)\n            currentPage++\n          } while (currentPage < remainingPages)\n        }\n\n        return result\n      }\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn as any,\n            {\n              client: context.client,\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal,\n            },\n            query,\n          )\n        }\n      } else {\n        context.fetchFn = fetchFn\n      }\n    },\n  }\n}\n\nfunction getNextPageParam(\n  options: InfiniteQueryPageParamsOptions<any>,\n  { pages, pageParams }: InfiniteData<unknown>,\n): unknown | undefined {\n  const lastIndex = pages.length - 1\n  return pages.length > 0\n    ? options.getNextPageParam(\n        pages[lastIndex],\n        pages,\n        pageParams[lastIndex],\n        pageParams,\n      )\n    : undefined\n}\n\nfunction getPreviousPageParam(\n  options: InfiniteQueryPageParamsOptions<any>,\n  { pages, pageParams }: InfiniteData<unknown>,\n): unknown | undefined {\n  return pages.length > 0\n    ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams)\n    : undefined\n}\n\n/**\n * Checks if there is a next page.\n */\nexport function hasNextPage(\n  options: InfiniteQueryPageParamsOptions<any, any>,\n  data?: InfiniteData<unknown>,\n): boolean {\n  if (!data) return false\n  return getNextPageParam(options, data) != null\n}\n\n/**\n * Checks if there is a previous page.\n */\nexport function hasPreviousPage(\n  options: InfiniteQueryPageParamsOptions<any, any>,\n  data?: InfiniteData<unknown>,\n): boolean {\n  if (!data || !options.getPreviousPageParam) return false\n  return getPreviousPageParam(options, data) != null\n}\n", "import { notifyManager } from './notifyManager'\nimport { Removable } from './removable'\nimport { createRetryer } from './retryer'\nimport type {\n  DefaultError,\n  MutationFunctionContext,\n  MutationMeta,\n  MutationOptions,\n  MutationStatus,\n} from './types'\nimport type { MutationCache } from './mutationCache'\nimport type { MutationObserver } from './mutationObserver'\nimport type { Retryer } from './retryer'\nimport type { QueryClient } from './queryClient'\n\n// TYPES\n\ninterface MutationConfig<TData, TError, TVariables, TOnMutateResult> {\n  client: QueryClient\n  mutationId: number\n  mutationCache: MutationCache\n  options: MutationOptions<TData, TError, TVariables, TOnMutateResult>\n  state?: MutationState<TData, TError, TVariables, TOnMutateResult>\n}\n\nexport interface MutationState<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = unknown,\n  TOnMutateResult = unknown,\n> {\n  context: TOnMutateResult | undefined\n  data: TData | undefined\n  error: TError | null\n  failureCount: number\n  failureReason: TError | null\n  isPaused: boolean\n  status: MutationStatus\n  variables: TVariables | undefined\n  submittedAt: number\n}\n\ninterface FailedAction<TError> {\n  type: 'failed'\n  failureCount: number\n  error: TError | null\n}\n\ninterface PendingAction<TVariables, TOnMutateResult> {\n  type: 'pending'\n  isPaused: boolean\n  variables?: TVariables\n  context?: TOnMutateResult\n}\n\ninterface SuccessAction<TData> {\n  type: 'success'\n  data: TData\n}\n\ninterface ErrorAction<TError> {\n  type: 'error'\n  error: TError\n}\n\ninterface PauseAction {\n  type: 'pause'\n}\n\ninterface ContinueAction {\n  type: 'continue'\n}\n\nexport type Action<TData, TError, TVariables, TOnMutateResult> =\n  | ContinueAction\n  | ErrorAction<TError>\n  | FailedAction<TError>\n  | PendingAction<TVariables, TOnMutateResult>\n  | PauseAction\n  | SuccessAction<TData>\n\n// CLASS\n\nexport class Mutation<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = unknown,\n  TOnMutateResult = unknown,\n> extends Removable {\n  state: MutationState<TData, TError, TVariables, TOnMutateResult>\n  options!: MutationOptions<TData, TError, TVariables, TOnMutateResult>\n  readonly mutationId: number\n\n  #client: QueryClient\n  #observers: Array<\n    MutationObserver<TData, TError, TVariables, TOnMutateResult>\n  >\n  #mutationCache: MutationCache\n  #retryer?: Retryer<TData>\n\n  constructor(\n    config: MutationConfig<TData, TError, TVariables, TOnMutateResult>,\n  ) {\n    super()\n\n    this.#client = config.client\n    this.mutationId = config.mutationId\n    this.#mutationCache = config.mutationCache\n    this.#observers = []\n    this.state = config.state || getDefaultState()\n\n    this.setOptions(config.options)\n    this.scheduleGc()\n  }\n\n  setOptions(\n    options: MutationOptions<TData, TError, TVariables, TOnMutateResult>,\n  ): void {\n    this.options = options\n\n    this.updateGcTime(this.options.gcTime)\n  }\n\n  get meta(): MutationMeta | undefined {\n    return this.options.meta\n  }\n\n  addObserver(observer: MutationObserver<any, any, any, any>): void {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer)\n\n      // Stop the mutation from being garbage collected\n      this.clearGcTimeout()\n\n      this.#mutationCache.notify({\n        type: 'observerAdded',\n        mutation: this,\n        observer,\n      })\n    }\n  }\n\n  removeObserver(observer: MutationObserver<any, any, any, any>): void {\n    this.#observers = this.#observers.filter((x) => x !== observer)\n\n    this.scheduleGc()\n\n    this.#mutationCache.notify({\n      type: 'observerRemoved',\n      mutation: this,\n      observer,\n    })\n  }\n\n  protected optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === 'pending') {\n        this.scheduleGc()\n      } else {\n        this.#mutationCache.remove(this)\n      }\n    }\n  }\n\n  continue(): Promise<unknown> {\n    return (\n      this.#retryer?.continue() ??\n      // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n      this.execute(this.state.variables!)\n    )\n  }\n\n  async execute(variables: TVariables): Promise<TData> {\n    const onContinue = () => {\n      this.#dispatch({ type: 'continue' })\n    }\n\n    const mutationFnContext = {\n      client: this.#client,\n      meta: this.options.meta,\n      mutationKey: this.options.mutationKey,\n    } satisfies MutationFunctionContext\n\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error('No mutationFn found'))\n        }\n\n        return this.options.mutationFn(variables, mutationFnContext)\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: 'failed', failureCount, error })\n      },\n      onPause: () => {\n        this.#dispatch({ type: 'pause' })\n      },\n      onContinue,\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this),\n    })\n\n    const restored = this.state.status === 'pending'\n    const isPaused = !this.#retryer.canStart()\n\n    try {\n      if (restored) {\n        // Dispatch continue action to unpause restored mutation\n        onContinue()\n      } else {\n        this.#dispatch({ type: 'pending', variables, isPaused })\n        // Notify cache callback\n        if (this.#mutationCache.config.onMutate) {\n          await this.#mutationCache.config.onMutate(\n            variables,\n            this as Mutation<unknown, unknown, unknown, unknown>,\n            mutationFnContext,\n          )\n        }\n        const context = await this.options.onMutate?.(\n          variables,\n          mutationFnContext,\n        )\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: 'pending',\n            context,\n            variables,\n            isPaused,\n          })\n        }\n      }\n      const data = await this.#retryer.start()\n\n      // Notify cache callback\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this as Mutation<unknown, unknown, unknown, unknown>,\n        mutationFnContext,\n      )\n\n      await this.options.onSuccess?.(\n        data,\n        variables,\n        this.state.context!,\n        mutationFnContext,\n      )\n\n      // Notify cache callback\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this as Mutation<unknown, unknown, unknown, unknown>,\n        mutationFnContext,\n      )\n\n      await this.options.onSettled?.(\n        data,\n        null,\n        variables,\n        this.state.context,\n        mutationFnContext,\n      )\n\n      this.#dispatch({ type: 'success', data })\n      return data\n    } catch (error) {\n      try {\n        // Notify cache callback\n        await this.#mutationCache.config.onError?.(\n          error as any,\n          variables,\n          this.state.context,\n          this as Mutation<unknown, unknown, unknown, unknown>,\n          mutationFnContext,\n        )\n      } catch (e) {\n        void Promise.reject(e)\n      }\n\n      try {\n        await this.options.onError?.(\n          error as TError,\n          variables,\n          this.state.context,\n          mutationFnContext,\n        )\n      } catch (e) {\n        void Promise.reject(e)\n      }\n\n      try {\n        // Notify cache callback\n        await this.#mutationCache.config.onSettled?.(\n          undefined,\n          error as any,\n          this.state.variables,\n          this.state.context,\n          this as Mutation<unknown, unknown, unknown, unknown>,\n          mutationFnContext,\n        )\n      } catch (e) {\n        void Promise.reject(e)\n      }\n\n      try {\n        await this.options.onSettled?.(\n          undefined,\n          error as TError,\n          variables,\n          this.state.context,\n          mutationFnContext,\n        )\n      } catch (e) {\n        void Promise.reject(e)\n      }\n\n      this.#dispatch({ type: 'error', error: error as TError })\n      throw error\n    } finally {\n      this.#mutationCache.runNext(this)\n    }\n  }\n\n  #dispatch(action: Action<TData, TError, TVariables, TOnMutateResult>): void {\n    const reducer = (\n      state: MutationState<TData, TError, TVariables, TOnMutateResult>,\n    ): MutationState<TData, TError, TVariables, TOnMutateResult> => {\n      switch (action.type) {\n        case 'failed':\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error,\n          }\n        case 'pause':\n          return {\n            ...state,\n            isPaused: true,\n          }\n        case 'continue':\n          return {\n            ...state,\n            isPaused: false,\n          }\n        case 'pending':\n          return {\n            ...state,\n            context: action.context,\n            data: undefined,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: 'pending',\n            variables: action.variables,\n            submittedAt: Date.now(),\n          }\n        case 'success':\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: 'success',\n            isPaused: false,\n          }\n        case 'error':\n          return {\n            ...state,\n            data: undefined,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: 'error',\n          }\n      }\n    }\n    this.state = reducer(this.state)\n\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action)\n      })\n      this.#mutationCache.notify({\n        mutation: this,\n        type: 'updated',\n        action,\n      })\n    })\n  }\n}\n\nexport function getDefaultState<\n  TData,\n  TError,\n  TVariables,\n  TOnMutateResult,\n>(): MutationState<TData, TError, TVariables, TOnMutateResult> {\n  return {\n    context: undefined,\n    data: undefined,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: 'idle',\n    variables: undefined,\n    submittedAt: 0,\n  }\n}\n", "import { notifyManager } from './notifyManager'\nimport { Mutation } from './mutation'\nimport { matchMutation, noop } from './utils'\nimport { Subscribable } from './subscribable'\nimport type { MutationObserver } from './mutationObserver'\nimport type {\n  DefaultError,\n  MutationFunctionContext,\n  MutationOptions,\n  NotifyEvent,\n} from './types'\nimport type { QueryClient } from './queryClient'\nimport type { Action, MutationState } from './mutation'\nimport type { MutationFilters } from './utils'\n\n// TYPES\n\ninterface MutationCacheConfig {\n  onError?: (\n    error: DefaultError,\n    variables: unknown,\n    onMutateResult: unknown,\n    mutation: Mutation<unknown, unknown, unknown>,\n    context: MutationFunctionContext,\n  ) => Promise<unknown> | unknown\n  onSuccess?: (\n    data: unknown,\n    variables: unknown,\n    onMutateResult: unknown,\n    mutation: Mutation<unknown, unknown, unknown>,\n    context: MutationFunctionContext,\n  ) => Promise<unknown> | unknown\n  onMutate?: (\n    variables: unknown,\n    mutation: Mutation<unknown, unknown, unknown>,\n    context: MutationFunctionContext,\n  ) => Promise<unknown> | unknown\n  onSettled?: (\n    data: unknown | undefined,\n    error: DefaultError | null,\n    variables: unknown,\n    onMutateResult: unknown,\n    mutation: Mutation<unknown, unknown, unknown>,\n    context: MutationFunctionContext,\n  ) => Promise<unknown> | unknown\n}\n\ninterface NotifyEventMutationAdded extends NotifyEvent {\n  type: 'added'\n  mutation: Mutation<any, any, any, any>\n}\ninterface NotifyEventMutationRemoved extends NotifyEvent {\n  type: 'removed'\n  mutation: Mutation<any, any, any, any>\n}\n\ninterface NotifyEventMutationObserverAdded extends NotifyEvent {\n  type: 'observerAdded'\n  mutation: Mutation<any, any, any, any>\n  observer: MutationObserver<any, any, any>\n}\n\ninterface NotifyEventMutationObserverRemoved extends NotifyEvent {\n  type: 'observerRemoved'\n  mutation: Mutation<any, any, any, any>\n  observer: MutationObserver<any, any, any>\n}\n\ninterface NotifyEventMutationObserverOptionsUpdated extends NotifyEvent {\n  type: 'observerOptionsUpdated'\n  mutation?: Mutation<any, any, any, any>\n  observer: MutationObserver<any, any, any, any>\n}\n\ninterface NotifyEventMutationUpdated extends NotifyEvent {\n  type: 'updated'\n  mutation: Mutation<any, any, any, any>\n  action: Action<any, any, any, any>\n}\n\nexport type MutationCacheNotifyEvent =\n  | NotifyEventMutationAdded\n  | NotifyEventMutationRemoved\n  | NotifyEventMutationObserverAdded\n  | NotifyEventMutationObserverRemoved\n  | NotifyEventMutationObserverOptionsUpdated\n  | NotifyEventMutationUpdated\n\ntype MutationCacheListener = (event: MutationCacheNotifyEvent) => void\n\n// CLASS\n\nexport class MutationCache extends Subscribable<MutationCacheListener> {\n  #mutations: Set<Mutation<any, any, any, any>>\n  #scopes: Map<string, Array<Mutation<any, any, any, any>>>\n  #mutationId: number\n\n  constructor(public config: MutationCacheConfig = {}) {\n    super()\n    this.#mutations = new Set()\n    this.#scopes = new Map()\n    this.#mutationId = 0\n  }\n\n  build<TData, TError, TVariables, TOnMutateResult>(\n    client: QueryClient,\n    options: MutationOptions<TData, TError, TVariables, TOnMutateResult>,\n    state?: MutationState<TData, TError, TVariables, TOnMutateResult>,\n  ): Mutation<TData, TError, TVariables, TOnMutateResult> {\n    const mutation = new Mutation({\n      client,\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state,\n    })\n\n    this.add(mutation)\n\n    return mutation\n  }\n\n  add(mutation: Mutation<any, any, any, any>): void {\n    this.#mutations.add(mutation)\n    const scope = scopeFor(mutation)\n    if (typeof scope === 'string') {\n      const scopedMutations = this.#scopes.get(scope)\n      if (scopedMutations) {\n        scopedMutations.push(mutation)\n      } else {\n        this.#scopes.set(scope, [mutation])\n      }\n    }\n    this.notify({ type: 'added', mutation })\n  }\n\n  remove(mutation: Mutation<any, any, any, any>): void {\n    if (this.#mutations.delete(mutation)) {\n      const scope = scopeFor(mutation)\n      if (typeof scope === 'string') {\n        const scopedMutations = this.#scopes.get(scope)\n        if (scopedMutations) {\n          if (scopedMutations.length > 1) {\n            const index = scopedMutations.indexOf(mutation)\n            if (index !== -1) {\n              scopedMutations.splice(index, 1)\n            }\n          } else if (scopedMutations[0] === mutation) {\n            this.#scopes.delete(scope)\n          }\n        }\n      }\n    }\n\n    // Currently we notify the removal even if the mutation was already removed.\n    // Consider making this an error or not notifying of the removal depending on the desired semantics.\n    this.notify({ type: 'removed', mutation })\n  }\n\n  canRun(mutation: Mutation<any, any, any, any>): boolean {\n    const scope = scopeFor(mutation)\n    if (typeof scope === 'string') {\n      const mutationsWithSameScope = this.#scopes.get(scope)\n      const firstPendingMutation = mutationsWithSameScope?.find(\n        (m) => m.state.status === 'pending',\n      )\n      // we can run if there is no current pending mutation (start use-case)\n      // or if WE are the first pending mutation (continue use-case)\n      return !firstPendingMutation || firstPendingMutation === mutation\n    } else {\n      // For unscoped mutations there are never any pending mutations in front of the\n      // current mutation\n      return true\n    }\n  }\n\n  runNext(mutation: Mutation<any, any, any, any>): Promise<unknown> {\n    const scope = scopeFor(mutation)\n    if (typeof scope === 'string') {\n      const foundMutation = this.#scopes\n        .get(scope)\n        ?.find((m) => m !== mutation && m.state.isPaused)\n\n      return foundMutation?.continue() ?? Promise.resolve()\n    } else {\n      return Promise.resolve()\n    }\n  }\n\n  clear(): void {\n    notifyManager.batch(() => {\n      this.#mutations.forEach((mutation) => {\n        this.notify({ type: 'removed', mutation })\n      })\n      this.#mutations.clear()\n      this.#scopes.clear()\n    })\n  }\n\n  getAll(): Array<Mutation> {\n    return Array.from(this.#mutations)\n  }\n\n  find<\n    TData = unknown,\n    TError = DefaultError,\n    TVariables = any,\n    TOnMutateResult = unknown,\n  >(\n    filters: MutationFilters,\n  ): Mutation<TData, TError, TVariables, TOnMutateResult> | undefined {\n    const defaultedFilters = { exact: true, ...filters }\n\n    return this.getAll().find((mutation) =>\n      matchMutation(defaultedFilters, mutation),\n    ) as Mutation<TData, TError, TVariables, TOnMutateResult> | undefined\n  }\n\n  findAll(filters: MutationFilters = {}): Array<Mutation> {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation))\n  }\n\n  notify(event: MutationCacheNotifyEvent) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event)\n      })\n    })\n  }\n\n  resumePausedMutations(): Promise<unknown> {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused)\n\n    return notifyManager.batch(() =>\n      Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop)),\n      ),\n    )\n  }\n}\n\nfunction scopeFor(mutation: Mutation<any, any, any, any>) {\n  return mutation.options.scope?.id\n}\n", "import { hashQueryKeyByOptions, matchQuery } from './utils'\nimport { Query } from './query'\nimport { notifyManager } from './notifyManager'\nimport { Subscribable } from './subscribable'\nimport type { QueryFilters } from './utils'\nimport type { Action, QueryState } from './query'\nimport type {\n  DefaultError,\n  NotifyEvent,\n  QueryKey,\n  QueryOptions,\n  WithRequired,\n} from './types'\nimport type { QueryClient } from './queryClient'\nimport type { QueryObserver } from './queryObserver'\n\n// TYPES\n\ninterface QueryCacheConfig {\n  onError?: (\n    error: DefaultError,\n    query: Query<unknown, unknown, unknown>,\n  ) => void\n  onSuccess?: (data: unknown, query: Query<unknown, unknown, unknown>) => void\n  onSettled?: (\n    data: unknown | undefined,\n    error: DefaultError | null,\n    query: Query<unknown, unknown, unknown>,\n  ) => void\n}\n\ninterface NotifyEventQueryAdded extends NotifyEvent {\n  type: 'added'\n  query: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryRemoved extends NotifyEvent {\n  type: 'removed'\n  query: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryUpdated extends NotifyEvent {\n  type: 'updated'\n  query: Query<any, any, any, any>\n  action: Action<any, any>\n}\n\ninterface NotifyEventQueryObserverAdded extends NotifyEvent {\n  type: 'observerAdded'\n  query: Query<any, any, any, any>\n  observer: QueryObserver<any, any, any, any, any>\n}\n\ninterface NotifyEventQueryObserverRemoved extends NotifyEvent {\n  type: 'observerRemoved'\n  query: Query<any, any, any, any>\n  observer: QueryObserver<any, any, any, any, any>\n}\n\ninterface NotifyEventQueryObserverResultsUpdated extends NotifyEvent {\n  type: 'observerResultsUpdated'\n  query: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryObserverOptionsUpdated extends NotifyEvent {\n  type: 'observerOptionsUpdated'\n  query: Query<any, any, any, any>\n  observer: QueryObserver<any, any, any, any, any>\n}\n\nexport type QueryCacheNotifyEvent =\n  | NotifyEventQueryAdded\n  | NotifyEventQueryRemoved\n  | NotifyEventQueryUpdated\n  | NotifyEventQueryObserverAdded\n  | NotifyEventQueryObserverRemoved\n  | NotifyEventQueryObserverResultsUpdated\n  | NotifyEventQueryObserverOptionsUpdated\n\ntype QueryCacheListener = (event: QueryCacheNotifyEvent) => void\n\nexport interface QueryStore {\n  has: (queryHash: string) => boolean\n  set: (queryHash: string, query: Query) => void\n  get: (queryHash: string) => Query | undefined\n  delete: (queryHash: string) => void\n  values: () => IterableIterator<Query>\n}\n\n// CLASS\n\nexport class QueryCache extends Subscribable<QueryCacheListener> {\n  #queries: QueryStore\n\n  constructor(public config: QueryCacheConfig = {}) {\n    super()\n    this.#queries = new Map<string, Query>()\n  }\n\n  build<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    client: QueryClient,\n    options: WithRequired<\n      QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n      'queryKey'\n    >,\n    state?: QueryState<TData, TError>,\n  ): Query<TQueryFnData, TError, TData, TQueryKey> {\n    const queryKey = options.queryKey\n    const queryHash =\n      options.queryHash ?? hashQueryKeyByOptions(queryKey, options)\n    let query = this.get<TQueryFnData, TError, TData, TQueryKey>(queryHash)\n\n    if (!query) {\n      query = new Query({\n        client,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey),\n      })\n      this.add(query)\n    }\n\n    return query\n  }\n\n  add(query: Query<any, any, any, any>): void {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query)\n\n      this.notify({\n        type: 'added',\n        query,\n      })\n    }\n  }\n\n  remove(query: Query<any, any, any, any>): void {\n    const queryInMap = this.#queries.get(query.queryHash)\n\n    if (queryInMap) {\n      query.destroy()\n\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash)\n      }\n\n      this.notify({ type: 'removed', query })\n    }\n  }\n\n  clear(): void {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query)\n      })\n    })\n  }\n\n  get<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    queryHash: string,\n  ): Query<TQueryFnData, TError, TData, TQueryKey> | undefined {\n    return this.#queries.get(queryHash) as\n      | Query<TQueryFnData, TError, TData, TQueryKey>\n      | undefined\n  }\n\n  getAll(): Array<Query> {\n    return [...this.#queries.values()]\n  }\n\n  find<TQueryFnData = unknown, TError = DefaultError, TData = TQueryFnData>(\n    filters: WithRequired<QueryFilters, 'queryKey'>,\n  ): Query<TQueryFnData, TError, TData> | undefined {\n    const defaultedFilters = { exact: true, ...filters }\n\n    return this.getAll().find((query) =>\n      matchQuery(defaultedFilters, query),\n    ) as Query<TQueryFnData, TError, TData> | undefined\n  }\n\n  findAll(filters: QueryFilters<any> = {}): Array<Query> {\n    const queries = this.getAll()\n    return Object.keys(filters).length > 0\n      ? queries.filter((query) => matchQuery(filters, query))\n      : queries\n  }\n\n  notify(event: QueryCacheNotifyEvent): void {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event)\n      })\n    })\n  }\n\n  onFocus(): void {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus()\n      })\n    })\n  }\n\n  onOnline(): void {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline()\n      })\n    })\n  }\n}\n", "import {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken,\n} from './utils'\nimport { QueryCache } from './queryCache'\nimport { MutationCache } from './mutationCache'\nimport { focusManager } from './focusManager'\nimport { onlineManager } from './onlineManager'\nimport { notifyManager } from './notifyManager'\nimport { infiniteQueryBehavior } from './infiniteQueryBehavior'\nimport type {\n  CancelOptions,\n  DefaultError,\n  DefaultOptions,\n  DefaultedQueryObserverOptions,\n  EnsureInfiniteQueryDataOptions,\n  EnsureQueryDataOptions,\n  FetchInfiniteQueryOptions,\n  FetchQueryOptions,\n  InferDataFromTag,\n  InferErrorFromTag,\n  InfiniteData,\n  InvalidateOptions,\n  InvalidateQueryFilters,\n  MutationKey,\n  MutationObserverOptions,\n  MutationOptions,\n  NoInfer,\n  OmitKeyof,\n  QueryClientConfig,\n  QueryKey,\n  QueryObserverOptions,\n  QueryOptions,\n  RefetchOptions,\n  RefetchQueryFilters,\n  ResetOptions,\n  SetDataOptions,\n} from './types'\nimport type { QueryState } from './query'\nimport type { MutationFilters, QueryFilters, Updater } from './utils'\n\n// TYPES\n\ninterface QueryDefaults {\n  queryKey: QueryKey\n  defaultOptions: OmitKeyof<QueryOptions<any, any, any>, 'queryKey'>\n}\n\ninterface MutationDefaults {\n  mutationKey: MutationKey\n  defaultOptions: MutationOptions<any, any, any, any>\n}\n\n// CLASS\n\nexport class QueryClient {\n  #queryCache: QueryCache\n  #mutationCache: MutationCache\n  #defaultOptions: DefaultOptions\n  #queryDefaults: Map<string, QueryDefaults>\n  #mutationDefaults: Map<string, MutationDefaults>\n  #mountCount: number\n  #unsubscribeFocus?: () => void\n  #unsubscribeOnline?: () => void\n\n  constructor(config: QueryClientConfig = {}) {\n    this.#queryCache = config.queryCache || new QueryCache()\n    this.#mutationCache = config.mutationCache || new MutationCache()\n    this.#defaultOptions = config.defaultOptions || {}\n    this.#queryDefaults = new Map()\n    this.#mutationDefaults = new Map()\n    this.#mountCount = 0\n  }\n\n  mount(): void {\n    this.#mountCount++\n    if (this.#mountCount !== 1) return\n\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations()\n        this.#queryCache.onFocus()\n      }\n    })\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations()\n        this.#queryCache.onOnline()\n      }\n    })\n  }\n\n  unmount(): void {\n    this.#mountCount--\n    if (this.#mountCount !== 0) return\n\n    this.#unsubscribeFocus?.()\n    this.#unsubscribeFocus = undefined\n\n    this.#unsubscribeOnline?.()\n    this.#unsubscribeOnline = undefined\n  }\n\n  isFetching<TQueryFilters extends QueryFilters<any> = QueryFilters>(\n    filters?: TQueryFilters,\n  ): number {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: 'fetching' })\n      .length\n  }\n\n  isMutating<\n    TMutationFilters extends MutationFilters<any, any> = MutationFilters,\n  >(filters?: TMutationFilters): number {\n    return this.#mutationCache.findAll({ ...filters, status: 'pending' }).length\n  }\n\n  /**\n   * Imperative (non-reactive) way to retrieve data for a QueryKey.\n   * Should only be used in callbacks or functions where reading the latest data is necessary, e.g. for optimistic updates.\n   *\n   * Hint: Do not use this function inside a component, because it won't receive updates.\n   * Use `useQuery` to create a `QueryObserver` that subscribes to changes.\n   */\n  getQueryData<\n    TQueryFnData = unknown,\n    TTaggedQueryKey extends QueryKey = QueryKey,\n    TInferredQueryFnData = InferDataFromTag<TQueryFnData, TTaggedQueryKey>,\n  >(queryKey: TTaggedQueryKey): TInferredQueryFnData | undefined {\n    const options = this.defaultQueryOptions({ queryKey })\n\n    return this.#queryCache.get<TInferredQueryFnData>(options.queryHash)?.state\n      .data\n  }\n\n  ensureQueryData<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    options: EnsureQueryDataOptions<TQueryFnData, TError, TData, TQueryKey>,\n  ): Promise<TData> {\n    const defaultedOptions = this.defaultQueryOptions(options)\n    const query = this.#queryCache.build(this, defaultedOptions)\n    const cachedData = query.state.data\n\n    if (cachedData === undefined) {\n      return this.fetchQuery(options)\n    }\n\n    if (\n      options.revalidateIfStale &&\n      query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))\n    ) {\n      void this.prefetchQuery(defaultedOptions)\n    }\n\n    return Promise.resolve(cachedData)\n  }\n\n  getQueriesData<\n    TQueryFnData = unknown,\n    TQueryFilters extends QueryFilters<any> = QueryFilters,\n  >(filters: TQueryFilters): Array<[QueryKey, TQueryFnData | undefined]> {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data as TQueryFnData | undefined\n      return [queryKey, data]\n    })\n  }\n\n  setQueryData<\n    TQueryFnData = unknown,\n    TTaggedQueryKey extends QueryKey = QueryKey,\n    TInferredQueryFnData = InferDataFromTag<TQueryFnData, TTaggedQueryKey>,\n  >(\n    queryKey: TTaggedQueryKey,\n    updater: Updater<\n      NoInfer<TInferredQueryFnData> | undefined,\n      NoInfer<TInferredQueryFnData> | undefined\n    >,\n    options?: SetDataOptions,\n  ): NoInfer<TInferredQueryFnData> | undefined {\n    const defaultedOptions = this.defaultQueryOptions<\n      any,\n      any,\n      unknown,\n      any,\n      QueryKey\n    >({ queryKey })\n\n    const query = this.#queryCache.get<TInferredQueryFnData>(\n      defaultedOptions.queryHash,\n    )\n    const prevData = query?.state.data\n    const data = functionalUpdate(updater, prevData)\n\n    if (data === undefined) {\n      return undefined\n    }\n\n    return this.#queryCache\n      .build(this, defaultedOptions)\n      .setData(data, { ...options, manual: true })\n  }\n\n  setQueriesData<\n    TQueryFnData,\n    TQueryFilters extends QueryFilters<any> = QueryFilters,\n  >(\n    filters: TQueryFilters,\n    updater: Updater<\n      NoInfer<TQueryFnData> | undefined,\n      NoInfer<TQueryFnData> | undefined\n    >,\n    options?: SetDataOptions,\n  ): Array<[QueryKey, TQueryFnData | undefined]> {\n    return notifyManager.batch(() =>\n      this.#queryCache\n        .findAll(filters)\n        .map(({ queryKey }) => [\n          queryKey,\n          this.setQueryData<TQueryFnData>(queryKey, updater, options),\n        ]),\n    )\n  }\n\n  getQueryState<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TTaggedQueryKey extends QueryKey = QueryKey,\n    TInferredQueryFnData = InferDataFromTag<TQueryFnData, TTaggedQueryKey>,\n    TInferredError = InferErrorFromTag<TError, TTaggedQueryKey>,\n  >(\n    queryKey: TTaggedQueryKey,\n  ): QueryState<TInferredQueryFnData, TInferredError> | undefined {\n    const options = this.defaultQueryOptions({ queryKey })\n    return this.#queryCache.get<TInferredQueryFnData, TInferredError>(\n      options.queryHash,\n    )?.state\n  }\n\n  removeQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: QueryFilters<TTaggedQueryKey>,\n  ): void {\n    const queryCache = this.#queryCache\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query)\n      })\n    })\n  }\n\n  resetQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: QueryFilters<TTaggedQueryKey>,\n    options?: ResetOptions,\n  ): Promise<void> {\n    const queryCache = this.#queryCache\n\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset()\n      })\n      return this.refetchQueries(\n        {\n          type: 'active',\n          ...filters,\n        },\n        options,\n      )\n    })\n  }\n\n  cancelQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: QueryFilters<TTaggedQueryKey>,\n    cancelOptions: CancelOptions = {},\n  ): Promise<void> {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions }\n\n    const promises = notifyManager.batch(() =>\n      this.#queryCache\n        .findAll(filters)\n        .map((query) => query.cancel(defaultedCancelOptions)),\n    )\n\n    return Promise.all(promises).then(noop).catch(noop)\n  }\n\n  invalidateQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: InvalidateQueryFilters<TTaggedQueryKey>,\n    options: InvalidateOptions = {},\n  ): Promise<void> {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate()\n      })\n\n      if (filters?.refetchType === 'none') {\n        return Promise.resolve()\n      }\n      return this.refetchQueries(\n        {\n          ...filters,\n          type: filters?.refetchType ?? filters?.type ?? 'active',\n        },\n        options,\n      )\n    })\n  }\n\n  refetchQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: RefetchQueryFilters<TTaggedQueryKey>,\n    options: RefetchOptions = {},\n  ): Promise<void> {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options.cancelRefetch ?? true,\n    }\n    const promises = notifyManager.batch(() =>\n      this.#queryCache\n        .findAll(filters)\n        .filter((query) => !query.isDisabled() && !query.isStatic())\n        .map((query) => {\n          let promise = query.fetch(undefined, fetchOptions)\n          if (!fetchOptions.throwOnError) {\n            promise = promise.catch(noop)\n          }\n          return query.state.fetchStatus === 'paused'\n            ? Promise.resolve()\n            : promise\n        }),\n    )\n\n    return Promise.all(promises).then(noop)\n  }\n\n  fetchQuery<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = never,\n  >(\n    options: FetchQueryOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey,\n      TPageParam\n    >,\n  ): Promise<TData> {\n    const defaultedOptions = this.defaultQueryOptions(options)\n\n    // https://github.com/tannerlinsley/react-query/issues/652\n    if (defaultedOptions.retry === undefined) {\n      defaultedOptions.retry = false\n    }\n\n    const query = this.#queryCache.build(this, defaultedOptions)\n\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query),\n    )\n      ? query.fetch(defaultedOptions)\n      : Promise.resolve(query.state.data as TData)\n  }\n\n  prefetchQuery<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    options: FetchQueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n  ): Promise<void> {\n    return this.fetchQuery(options).then(noop).catch(noop)\n  }\n\n  fetchInfiniteQuery<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = unknown,\n  >(\n    options: FetchInfiniteQueryOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey,\n      TPageParam\n    >,\n  ): Promise<InfiniteData<TData, TPageParam>> {\n    options.behavior = infiniteQueryBehavior<\n      TQueryFnData,\n      TError,\n      TData,\n      TPageParam\n    >(options.pages)\n    return this.fetchQuery(options as any)\n  }\n\n  prefetchInfiniteQuery<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = unknown,\n  >(\n    options: FetchInfiniteQueryOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey,\n      TPageParam\n    >,\n  ): Promise<void> {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop)\n  }\n\n  ensureInfiniteQueryData<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = unknown,\n  >(\n    options: EnsureInfiniteQueryDataOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey,\n      TPageParam\n    >,\n  ): Promise<InfiniteData<TData, TPageParam>> {\n    options.behavior = infiniteQueryBehavior<\n      TQueryFnData,\n      TError,\n      TData,\n      TPageParam\n    >(options.pages)\n\n    return this.ensureQueryData(options as any)\n  }\n\n  resumePausedMutations(): Promise<unknown> {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations()\n    }\n    return Promise.resolve()\n  }\n\n  getQueryCache(): QueryCache {\n    return this.#queryCache\n  }\n\n  getMutationCache(): MutationCache {\n    return this.#mutationCache\n  }\n\n  getDefaultOptions(): DefaultOptions {\n    return this.#defaultOptions\n  }\n\n  setDefaultOptions(options: DefaultOptions): void {\n    this.#defaultOptions = options\n  }\n\n  setQueryDefaults<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryData = TQueryFnData,\n  >(\n    queryKey: QueryKey,\n    options: Partial<\n      OmitKeyof<\n        QueryObserverOptions<TQueryFnData, TError, TData, TQueryData>,\n        'queryKey'\n      >\n    >,\n  ): void {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options,\n    })\n  }\n\n  getQueryDefaults(\n    queryKey: QueryKey,\n  ): OmitKeyof<QueryObserverOptions<any, any, any, any, any>, 'queryKey'> {\n    const defaults = [...this.#queryDefaults.values()]\n\n    const result: OmitKeyof<\n      QueryObserverOptions<any, any, any, any, any>,\n      'queryKey'\n    > = {}\n\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        Object.assign(result, queryDefault.defaultOptions)\n      }\n    })\n    return result\n  }\n\n  setMutationDefaults<\n    TData = unknown,\n    TError = DefaultError,\n    TVariables = void,\n    TOnMutateResult = unknown,\n  >(\n    mutationKey: MutationKey,\n    options: OmitKeyof<\n      MutationObserverOptions<TData, TError, TVariables, TOnMutateResult>,\n      'mutationKey'\n    >,\n  ): void {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options,\n    })\n  }\n\n  getMutationDefaults(\n    mutationKey: MutationKey,\n  ): OmitKeyof<MutationObserverOptions<any, any, any, any>, 'mutationKey'> {\n    const defaults = [...this.#mutationDefaults.values()]\n\n    const result: OmitKeyof<\n      MutationObserverOptions<any, any, any, any>,\n      'mutationKey'\n    > = {}\n\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        Object.assign(result, queryDefault.defaultOptions)\n      }\n    })\n\n    return result\n  }\n\n  defaultQueryOptions<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = never,\n  >(\n    options:\n      | QueryObserverOptions<\n          TQueryFnData,\n          TError,\n          TData,\n          TQueryData,\n          TQueryKey,\n          TPageParam\n        >\n      | DefaultedQueryObserverOptions<\n          TQueryFnData,\n          TError,\n          TData,\n          TQueryData,\n          TQueryKey\n        >,\n  ): DefaultedQueryObserverOptions<\n    TQueryFnData,\n    TError,\n    TData,\n    TQueryData,\n    TQueryKey\n  > {\n    if (options._defaulted) {\n      return options as DefaultedQueryObserverOptions<\n        TQueryFnData,\n        TError,\n        TData,\n        TQueryData,\n        TQueryKey\n      >\n    }\n\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true,\n    }\n\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions,\n      )\n    }\n\n    // dependent default values\n    if (defaultedOptions.refetchOnReconnect === undefined) {\n      defaultedOptions.refetchOnReconnect =\n        defaultedOptions.networkMode !== 'always'\n    }\n    if (defaultedOptions.throwOnError === undefined) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense\n    }\n\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = 'offlineFirst'\n    }\n\n    if (defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false\n    }\n\n    return defaultedOptions as DefaultedQueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData,\n      TQueryKey\n    >\n  }\n\n  defaultMutationOptions<T extends MutationOptions<any, any, any, any>>(\n    options?: T,\n  ): T {\n    if (options?._defaulted) {\n      return options\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...(options?.mutationKey &&\n        this.getMutationDefaults(options.mutationKey)),\n      ...options,\n      _defaulted: true,\n    } as T\n  }\n\n  clear(): void {\n    this.#queryCache.clear()\n    this.#mutationCache.clear()\n  }\n}\n", "'use client'\nimport * as React from 'react'\n\nimport type { QueryClient } from '@tanstack/query-core'\n\nexport const QueryClientContext = React.createContext<QueryClient | undefined>(\n  undefined,\n)\n\nexport const useQueryClient = (queryClient?: QueryClient) => {\n  const client = React.useContext(QueryClientContext)\n\n  if (queryClient) {\n    return queryClient\n  }\n\n  if (!client) {\n    throw new Error('No QueryClient set, use QueryClientProvider to set one')\n  }\n\n  return client\n}\n\nexport type QueryClientProviderProps = {\n  client: QueryClient\n  children?: React.ReactNode\n}\n\nexport const QueryClientProvider = ({\n  client,\n  children,\n}: QueryClientProviderProps): React.JSX.Element => {\n  React.useEffect(() => {\n    client.mount()\n    return () => {\n      client.unmount()\n    }\n  }, [client])\n\n  return (\n    <QueryClientContext.Provider value={client}>\n      {children}\n    </QueryClientContext.Provider>\n  )\n}\n", "import React, { useState, useEffect } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport {\n    Menu, X, Heart, ChevronRight,\n    Home, Grid, Camera, Mail, Gift, Cog, Star\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useFavorites } from '../../context/FavoritesContext.jsx';\n\nconst Navigation = () => {\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\n    const [isScrolled, setIsScrolled] = useState(false);\n    const [isHovered, setIsHovered] = useState(false);\n    const [isMobile, setIsMobile] = useState(false);\n    const [isLookbookFilterOpen, setIsLookbookFilterOpen] = useState(false);\n    const { favorites } = useFavorites();\n\n    useEffect(() => {\n        const handler = ({ detail }) => setIsLookbookFilterOpen(detail.isFilterOpen);\n        window.addEventListener('lookbookFilterStateChange', handler);\n        return () => window.removeEventListener('lookbookFilterStateChange', handler);\n    }, []);\n\n    const location = useLocation();\n    const isHomePage = location.pathname === '/';\n    const isAdminRoute = location.pathname.startsWith('/admin');\n\n    useEffect(() => {\n        const checkMobile = () => setIsMobile(window.innerWidth < 768);\n        checkMobile();\n        window.addEventListener('resize', checkMobile);\n        return () => window.removeEventListener('resize', checkMobile);\n    }, []);\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            window.dispatchEvent(new CustomEvent('menuStateChange', { detail: { isMenuOpen } }));\n        }, 50);\n        return () => clearTimeout(timer);\n    }, [isMenuOpen]);\n\n    const navItems = [\n        { name: 'Home', path: '/', icon: Home },\n        { name: 'Latest Collection', path: '/collections', icon: Grid },\n        { name: 'Lookbook', path: '/lookbook', icon: Camera },\n        { name: 'Customize Gift for Men', path: '/customize-gift', icon: Gift },\n        { name: 'Contact', path: '/contact', icon: Mail },\n    ];\n\n    useEffect(() => {\n        const handleScroll = () => {\n            setIsScrolled(window.scrollY > 50); // Increased threshold slightly\n        };\n        window.addEventListener('scroll', handleScroll, { passive: true });\n        return () => window.removeEventListener('scroll', handleScroll);\n    }, []);\n\n    useEffect(() => {\n        const handleEscape = (e) => {\n            if (e.key === 'Escape') setIsMenuOpen(false);\n        };\n        document.addEventListener('keydown', handleEscape);\n        return () => document.removeEventListener('keydown', handleEscape);\n    }, []);\n\n    // --- Style & Animation Logic ---\n    // Hide navbar unless:\n    // 1. Menu is open\n    // 2. We are on mobile (often better to keep accessible, or can hide too)\n    // 3. User is hovering over the nav area\n    // 4. We are at the very top of the homepage (transparent mode) - optional, user asked to disappear if not hover\n    \n    // User request: \"make the nav bar dissapare if not hover in every section\"\n    // Interpretation: It should be hidden by default and slide down on hover.\n    \n    const isNavVisible = isHovered || isMenuOpen || (isMobile && isScrolled); // Keep visible on mobile scroll for UX, or strict: just hover/tap?\n    // Let's go with strict hover for desktop, and maybe always visible or scroll-aware for mobile.\n    // Actually, \"disappear if not hover\" usually implies a \"hide on scroll down, show on hover/scroll up\" OR \"fixed top strip that expands\".\n    // But typically for this requested behavior: Hidden by default (y: -100%), shows on mouse enter (top area).\n    \n    // To detect hover on a hidden element, we need a trigger area at the top.\n    \n    // Revised logic:\n    // Desktop: Hidden (-100% y) by default. Shows when mouse is near top (handled by a fixed invisible trigger div) or hovered on nav itself.\n    // Mobile: Standard behavior (visible) or scroll-aware? Let's stick to the requested \"disappear\".\n    \n    const [showNav, setShowNav] = useState(true);\n    \n    useEffect(() => {\n        let lastScrollY = window.scrollY;\n        \n        const handleScrollVisibility = () => {\n            const currentScrollY = window.scrollY;\n            \n            // Show if at top or scrolling up\n            if (currentScrollY < 10 || currentScrollY < lastScrollY) {\n                setShowNav(true);\n            } else {\n                // Hide on scroll down\n                setShowNav(false);\n            }\n            lastScrollY = currentScrollY;\n        };\n        \n        window.addEventListener('scroll', handleScrollVisibility, { passive: true });\n        return () => window.removeEventListener('scroll', handleScrollVisibility);\n    }, []);\n\n    const isVisible = isMenuOpen || isHovered || (isMobile ? showNav : isHovered || window.scrollY < 50);\n\n    // Determine if we are in \"transparent mode\" (at top of homepage)\n    const isTransparentNav = isHomePage && !isScrolled && !isMenuOpen;\n\n    // Dynamic classes for the navbar background\n    const navBackgroundClass = isTransparentNav\n        ? 'bg-transparent border-transparent'\n        : 'bg-black/20 backdrop-blur-xl border-b border-white/5 shadow-2xl'; // Pure glassmorphism without navy tint\n\n    const navTextColor = 'text-white';\n    // Icons slightly more visible\n    const navIconColor = 'text-white transition-colors duration-300 hover:text-attire-accent';\n\n    const navVariants = {\n        visible: { y: 0, opacity: 1 },\n        hidden: { y: 0, opacity: 0 } // Kept at y: 0 to prevent sliding, just fade\n    };\n\n    const sidebarVariants = {\n        open: { x: 0, transition: { duration: 0.5, ease: [0.22, 1, 0.36, 1] } },\n        closed: { x: \"-100%\", transition: { duration: 0.4, ease: [0.22, 1, 0.36, 1] } }\n    };\n    \n    const listVariants = {\n        open: { transition: { staggerChildren: 0.1, delayChildren: 0.3 } },\n        closed: { transition: { staggerChildren: 0.05, staggerDirection: -1 } }\n    };\n    \n    const itemVariants = {\n        open: { y: 0, opacity: 1, transition: { duration: 0.4, ease: \"easeOut\" } },\n        closed: { y: 20, opacity: 0, transition: { duration: 0.3 } }\n    };\n\n    if ((isLookbookFilterOpen && isMobile) || isAdminRoute) {\n        return null;\n    }\n\n    return (\n        <>\n            {/* Invisible Trigger Area for Desktop Hover */}\n            {!isMobile && (\n                <div \n                    className=\"fixed top-0 left-0 right-0 h-24 z-40 bg-transparent\"\n                    onMouseEnter={() => setIsHovered(true)}\n                />\n            )}\n\n            <motion.nav\n                animate={isVisible ? \"visible\" : \"hidden\"} \n                initial=\"visible\"\n                variants={navVariants}\n                transition={{ duration: 0.3 }} // Control duration here via Framer Motion\n                className={`fixed top-0 left-0 right-0 z-50 ${navBackgroundClass}`}\n                onMouseEnter={() => setIsHovered(true)}\n                onMouseLeave={() => setIsHovered(false)}\n            >\n                <div className=\"max-w-7xl mx-auto px-6\">\n                    <div className=\"flex items-center justify-between h-20 md:h-24\">\n                        {/* Menu Trigger */}\n                        <button \n                            onClick={() => setIsMenuOpen(true)} \n                            className=\"p-2 -ml-2 rounded-full hover:bg-white/10 transition-colors\" \n                            aria-label=\"Open menu\"\n                        >\n                            <Menu className={`w-6 h-6 ${navIconColor}`} />\n                        </button>\n\n                        {/* Central Logo - Fades in/out based on scroll on Homepage */}\n                        <Link to=\"/\" className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 group\">\n                            <motion.div\n                                animate={{ \n                                    opacity: isTransparentNav ? 0 : 1,\n                                    y: isTransparentNav ? 10 : 0\n                                }}\n                                initial={{ opacity: 0, y: 10 }}\n                                transition={{ duration: 0.4 }}\n                                className=\"flex flex-col items-center\"\n                            >\n                                <span className={`font-serif text-lg md:text-xl font-medium tracking-[0.2em] uppercase ${navTextColor} group-hover:text-attire-accent transition-colors`}>\n                                    Attire Lounge\n                                </span>\n                            </motion.div>\n                        </Link>\n\n                        {/* Right Actions */}\n                        <div className=\"flex items-center space-x-1 md:space-x-4\">\n                            <Link \n                                to=\"/favorites\" \n                                className=\"relative p-2 rounded-full hover:bg-white/10 transition-colors\" \n                                aria-label=\"Favorites\"\n                            >\n                                <Heart className={`w-5 h-5 ${navIconColor}`} />\n                                {favorites.length > 0 && (\n                                    <span className=\"absolute top-1 right-1 block h-3 w-3 rounded-full bg-attire-accent border border-black shadow-sm\" />\n                                )}\n                            </Link>\n                        </div>\n                    </div>\n                </div>\n            </motion.nav>\n\n            {/* Sidebar / Mobile Menu */}\n            <AnimatePresence>\n                {isMenuOpen && (\n                    <>\n                        <motion.div\n                            initial={{ opacity: 0 }}\n                            animate={{ opacity: 1 }}\n                            exit={{ opacity: 0 }}\n                            transition={{ duration: 0.4 }}\n                            className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-40\"\n                            onClick={() => setIsMenuOpen(false)}\n                        />\n                        <motion.div\n                            variants={sidebarVariants}\n                            initial=\"closed\"\n                            animate=\"open\"\n                            exit=\"closed\"\n                            className=\"fixed top-0 left-0 bottom-0 w-full max-w-sm bg-attire-navy z-50 border-r border-white/10 shadow-2xl flex flex-col\"\n                        >\n                            {/* Menu Header */}\n                            <div className=\"p-8 flex items-center justify-between\">\n                                <span className=\"font-serif text-xl text-white tracking-[0.2em] uppercase\">Menu</span>\n                                <button \n                                    onClick={() => setIsMenuOpen(false)} \n                                    className=\"p-2 rounded-full hover:bg-white/10 transition-colors text-white\" \n                                    aria-label=\"Close menu\"\n                                >\n                                    <X className=\"w-6 h-6\" />\n                                </button>\n                            </div>\n\n                            {/* Menu Items */}\n                            <div className=\"flex-1 overflow-y-auto px-6 py-4\">\n                                <motion.ul variants={listVariants} className=\"space-y-2\">\n                                    {navItems.map((item) => (\n                                        <motion.li key={item.name} variants={itemVariants}>\n                                            <Link\n                                                to={item.path}\n                                                onClick={() => setIsMenuOpen(false)}\n                                                className=\"group flex items-center justify-between p-4 rounded-xl hover:bg-white/5 border border-transparent hover:border-white/5 transition-all duration-300\"\n                                            >\n                                                <div className=\"flex items-center gap-5\">\n                                                    <div className=\"p-2 rounded-lg bg-white/5 text-white/50 group-hover:text-attire-accent group-hover:bg-attire-accent/10 transition-colors\">\n                                                        <item.icon className=\"w-5 h-5\" />\n                                                    </div>\n                                                    <span className=\"font-serif text-lg text-white/80 group-hover:text-white tracking-wide transition-colors\">\n                                                        {item.name}\n                                                    </span>\n                                                </div>\n                                                <ChevronRight className=\"w-4 h-4 text-white/20 group-hover:text-white group-hover:translate-x-1 transition-all\" />\n                                            </Link>\n                                        </motion.li>\n                                    ))}\n                                </motion.ul>\n                            </div>\n\n                            {/* Menu Footer */}\n                            <div className=\"p-8 border-t border-white/5\">\n                                <div className=\"flex flex-col gap-4 text-center\">\n                                     <p className=\"text-xs text-white/30 uppercase tracking-widest\">\n                                        Attire Lounge Official\n                                    </p>\n                                    <p className=\"text-[10px] text-white/20\">\n                                        &copy; {new Date().getFullYear()} All rights reserved.\n                                    </p>\n                                </div>\n                            </div>\n                        </motion.div>\n                    </>\n                )}\n            </AnimatePresence>\n        </>\n    );\n};\n\nexport default Navigation;\n", "import React, { useState, useEffect } from 'react';\r\nimport { Package, AlertTriangle, CheckCircle, XCircle, Loader } from 'lucide-react';\r\nimport giftOptions from '../../../data/giftOptions';\r\nimport api from '../../../api';\r\nimport OptimizedImage from '../../common/OptimizedImage.jsx';\r\n\r\nconst InventoryManager = () => {\r\n    const [outOfStockItems, setOutOfStockItems] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [updatingItems, setUpdatingItems] = useState(new Set());\r\n\r\n    const fetchInventory = async () => {\r\n        try {\r\n            const items = await api.getOutOfStockItems();\r\n            setOutOfStockItems(items);\r\n        } catch (error) {\r\n            console.error('Failed to fetch inventory:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchInventory();\r\n    }, []);\r\n\r\n    const toggleStock = async (id) => {\r\n        if (updatingItems.has(id)) return;\r\n        \r\n        const isCurrentlyOutOfStock = outOfStockItems.includes(id);\r\n        const nextStatus = !isCurrentlyOutOfStock;\r\n\r\n        setUpdatingItems(prev => new Set(prev).add(id));\r\n        try {\r\n            await api.toggleGiftItemStock(id, nextStatus);\r\n            setOutOfStockItems(prev => \r\n                nextStatus \r\n                    ? [...prev, id] \r\n                    : prev.filter(item => item !== id)\r\n            );\r\n        } catch (error) {\r\n            console.error('Failed to toggle stock:', error);\r\n        } finally {\r\n            setUpdatingItems(prev => {\r\n                const next = new Set(prev);\r\n                next.delete(id);\r\n                return next;\r\n            });\r\n        }\r\n    };\r\n\r\n    const renderSection = (title, items) => (\r\n        <section className=\"space-y-4\">\r\n            <h2 className=\"text-xl font-serif text-white border-b border-white/10 pb-2\">{title}</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\r\n                {items.map(item => {\r\n                    const isOutOfStock = outOfStockItems.includes(item.id);\r\n                    const isUpdating = updatingItems.has(item.id);\r\n                    return (\r\n                        <div \r\n                            key={item.id}\r\n                            onClick={() => toggleStock(item.id)}\r\n                            className={`p-4 rounded-2xl border transition-all duration-300 cursor-pointer group hover:scale-[1.02] active:scale-[0.98] ${\r\n                                isOutOfStock \r\n                                    ? 'bg-red-500/5 border-red-500/20 hover:border-red-500/40' \r\n                                    : 'bg-black/20 border-white/10 hover:border-attire-accent/30'\r\n                            } ${isUpdating ? 'opacity-70 pointer-events-none' : ''}`}\r\n                        >\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"h-16 w-16 rounded-xl overflow-hidden border border-white/10 flex-shrink-0\">\r\n                                    <OptimizedImage \r\n                                        src={item.image} \r\n                                        alt={item.name} \r\n                                        containerClassName=\"w-full h-full\"\r\n                                        className={`w-full h-full ${isOutOfStock ? 'grayscale opacity-50' : ''}`} \r\n                                    />\r\n                                </div>\r\n                                <div className=\"flex-grow min-w-0\">\r\n                                    <h3 className=\"text-sm font-medium text-white truncate group-hover:text-attire-accent transition-colors\">{item.name}</h3>\r\n                                    <p className=\"text-xs text-attire-silver\">{item.color || 'Default'}</p>\r\n                                </div>\r\n                                <div\r\n                                    className={`flex-shrink-0 p-2 rounded-full transition-colors ${\r\n                                        isOutOfStock \r\n                                            ? 'bg-red-500/20 text-red-400 group-hover:bg-red-500/30' \r\n                                            : 'bg-green-500/20 text-green-400 group-hover:bg-green-500/30'\r\n                                    }`}\r\n                                >\r\n                                    {isUpdating ? <Loader className=\"animate-spin\" size={20} /> : (isOutOfStock ? <XCircle size={20} /> : <CheckCircle size={20} />)}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"mt-3 flex items-center justify-between\">\r\n                                <span className={`text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded transition-colors ${\r\n                                    isOutOfStock \r\n                                        ? 'bg-red-500/20 text-red-400' \r\n                                        : 'bg-green-500/20 text-green-400'\r\n                                }`}>\r\n                                    {isOutOfStock ? 'Out of Stock' : 'In Stock'}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        </section>\r\n    );\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex justify-center items-center h-64\">\r\n                <Loader className=\"animate-spin text-attire-accent\" size={48} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <div className=\"pb-4 border-b border-white/10\">\r\n                <h1 className=\"text-4xl font-serif text-white mb-2\">Inventory Management</h1>\r\n                <p className=\"text-attire-silver text-sm\">Toggle product availability for the Custom Gift Box curate page.</p>\r\n            </div>\r\n\r\n            <div className=\"bg-blue-500/10 border border-blue-500/20 rounded-2xl p-4 flex items-start gap-4 mb-8\">\r\n                <Package className=\"text-blue-400 flex-shrink-0 mt-1\" size={20} />\r\n                <div>\r\n                    <h4 className=\"text-sm font-bold text-blue-400 uppercase tracking-wider\">Sync Active</h4>\r\n                    <p className=\"text-xs text-attire-silver leading-relaxed\">\r\n                        Changes made here are saved to the backend and will immediately affect all users visiting the Customize Gift Page.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-12\">\r\n                {renderSection('Ties', giftOptions.ties)}\r\n                {renderSection('Pocket Squares', giftOptions.pocketSquares)}\r\n                {renderSection('Gift Boxes', giftOptions.boxes)}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default InventoryManager;\r\n"],
  "mappings": "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",
  "names": ["require_client", "__commonJSMin", "exports", "m", "i", "import_react", "import_client", "axios_default", "config", "token", "error", "import_react", "version", "clamp", "min", "input", "max", "lerp", "x", "y", "t", "damp", "lambda", "deltaTime", "modulo", "n", "d", "Animate", "completed", "linearProgress", "easedProgress", "from", "to", "duration", "easing", "onStart", "onUpdate", "debounce", "callback", "delay", "timer", "args", "context", "Dimensions", "wrapper", "content", "autoResize", "debounceValue", "Emitter", "event", "callbacks", "i", "length", "cb", "LINE_HEIGHT", "listenerOptions", "VirtualScroll", "element", "options", "clientX", "clientY", "deltaX", "deltaY", "deltaMode", "multiplierX", "multiplierY", "defaultEasing", "Lenis", "eventsTarget", "smoothWheel", "syncTouch", "syncTouchLerp", "touchInertiaExponent", "infinite", "orientation", "gestureOrientation", "touchMultiplier", "wheelMultiplier", "prevent", "virtualScroll", "overscroll", "autoRaf", "anchors", "autoToggle", "allowNestedScroll", "__experimental__naiveDimensions", "naiveDimensions", "stopInertiaOnNavigate", "e", "property", "scroll", "anchorElements", "node", "anchor", "href", "target", "data", "isTouch", "isWheel", "isClickOrTap", "isUnknownGesture", "composedPath", "delta", "isSyncTouch", "hasTouchInertia", "lastScroll", "time", "offset", "immediate", "lock", "programmatic", "onComplete", "force", "userData", "wrapperRect", "rect", "distance", "value", "cache", "hasOverflowX", "hasOverflowY", "isScrollableX", "isScrollableY", "scrollWidth", "scrollHeight", "clientWidth", "clientHeight", "computedStyle", "overflowXString", "overflowYString", "isScrollingX", "isScrollingY", "maxScroll", "hasOverflow", "isScrollable", "className", "import_react", "usePullToRefresh", "callback", "threshold", "initialTouchY", "currentTouchY", "pulling", "getScrollPosition", "handleTouchStart", "e", "handleTouchMove", "pullDelta", "handleTouchEnd", "usePullToRefresh_default", "Subscribable", "listener", "defaultTimeoutProvider", "callback", "delay", "timeoutId", "intervalId", "TimeoutManager", "#provider", "#providerCalled", "provider", "timeoutManager", "systemSetTimeoutZero", "isServer", "noop", "functionalUpdate", "updater", "input", "isValidTimeout", "value", "timeUntilStale", "updatedAt", "staleTime", "resolveStaleTime", "query", "resolveEnabled", "enabled", "matchQuery", "filters", "type", "exact", "fetchStatus", "predicate", "queryKey", "stale", "hashQueryKeyByOptions", "partialMatchKey", "isActive", "matchMutation", "mutation", "status", "mutationKey", "hashKey", "options", "_", "val", "isPlainObject", "result", "key", "a", "b", "hasOwn", "replaceEqualDeep", "depth", "array", "isPlainArray", "aSize", "bItems", "bSize", "copy", "equalItems", "i", "aItem", "bItem", "v", "isPlainArray", "value", "isPlainObject", "o", "hasObjectPrototype", "ctor", "prot", "sleep", "timeout", "resolve", "timeoutManager", "replaceData", "prevData", "data", "options", "replaceEqualDeep", "addToEnd", "items", "item", "max", "newItems", "addToStart", "skipToken", "ensureQueryFn", "options", "fetchOptions", "addConsumeAwareSignal", "object", "getSignal", "onCancelled", "consumed", "signal", "FocusManager", "Subscribable", "#focused", "#cleanup", "#setup", "onFocus", "isServer", "listener", "setup", "focused", "isFocused", "focusManager", "pendingThenable", "resolve", "reject", "thenable", "_resolve", "_reject", "finalize", "data", "value", "reason", "defaultScheduler", "systemSetTimeoutZero", "createNotifyManager", "queue", "transactions", "notifyFn", "callback", "batchNotifyFn", "scheduleFn", "schedule", "flush", "originalQueue", "result", "args", "fn", "notifyManager", "OnlineManager", "Subscribable", "#online", "#cleanup", "#setup", "onOnline", "isServer", "onlineListener", "offlineListener", "setup", "online", "listener", "onlineManager", "defaultRetryDelay", "failureCount", "canFetch", "networkMode", "onlineManager", "CancelledError", "options", "createRetryer", "config", "isRetryCancelled", "failureCount", "continueFn", "thenable", "pendingThenable", "isResolved", "cancel", "cancelOptions", "error", "CancelledError", "reject", "cancelRetry", "continueRetry", "canContinue", "focusManager", "onlineManager", "canStart", "canFetch", "resolve", "value", "pause", "continueResolve", "run", "promiseOrValue", "initialPromise", "retry", "isServer", "retryDelay", "defaultRetryDelay", "delay", "shouldRetry", "sleep", "Removable", "#gcTimeout", "isValidTimeout", "timeoutManager", "newGcTime", "isServer", "Query", "Removable", "#initialState", "#revertState", "#cache", "#client", "#retryer", "#defaultOptions", "#abortSignalConsumed", "config", "getDefaultState", "options", "defaultState", "successState", "newData", "data", "replaceData", "#dispatch", "state", "setStateOptions", "promise", "noop", "observer", "resolveEnabled", "skipToken", "resolveStaleTime", "staleTime", "timeUntilStale", "x", "fetchOptions", "abortController", "addSignalProperty", "object", "fetchFn", "queryFn", "ensureQueryFn", "queryFnContext", "context", "createRetryer", "error", "CancelledError", "failureCount", "action", "reducer", "fetchState", "newState", "notifyManager", "canFetch", "dataUpdatedAt", "hasData", "initialDataUpdatedAt", "infiniteQueryBehavior", "pages", "context", "query", "options", "direction", "oldPages", "oldPageParams", "result", "currentPage", "fetchFn", "cancelled", "addSignalProperty", "object", "addConsumeAwareSignal", "queryFn", "ensureQueryFn", "fetchPage", "data", "param", "previous", "queryFnContext", "page", "maxPages", "addTo", "addToStart", "addToEnd", "pageParamFn", "getPreviousPageParam", "getNextPageParam", "oldData", "remainingPages", "pageParams", "lastIndex", "Mutation", "Removable", "#client", "#observers", "#mutationCache", "#retryer", "config", "getDefaultState", "options", "observer", "x", "variables", "onContinue", "#dispatch", "mutationFnContext", "createRetryer", "failureCount", "error", "restored", "isPaused", "context", "data", "e", "action", "reducer", "state", "notifyManager", "MutationCache", "Subscribable", "config", "#mutations", "#scopes", "#mutationId", "client", "options", "state", "mutation", "Mutation", "scope", "scopeFor", "scopedMutations", "index", "firstPendingMutation", "m", "notifyManager", "filters", "defaultedFilters", "matchMutation", "event", "listener", "pausedMutations", "x", "noop", "QueryCache", "Subscribable", "config", "#queries", "client", "options", "state", "queryKey", "queryHash", "hashQueryKeyByOptions", "query", "Query", "queryInMap", "notifyManager", "filters", "defaultedFilters", "matchQuery", "queries", "event", "listener", "QueryClient", "#queryCache", "#mutationCache", "#defaultOptions", "#queryDefaults", "#mutationDefaults", "#mountCount", "#unsubscribeFocus", "#unsubscribeOnline", "config", "QueryCache", "MutationCache", "focusManager", "focused", "onlineManager", "online", "filters", "queryKey", "options", "defaultedOptions", "query", "cachedData", "resolveStaleTime", "state", "data", "updater", "prevData", "functionalUpdate", "notifyManager", "queryCache", "cancelOptions", "defaultedCancelOptions", "promises", "noop", "fetchOptions", "promise", "infiniteQueryBehavior", "hashKey", "defaults", "result", "queryDefault", "partialMatchKey", "mutationKey", "hashQueryKeyByOptions", "skipToken", "React", "import_jsx_runtime", "QueryClientContext", "QueryClientProvider", "client", "children", "QueryClientContext", "import_react", "import_jsx_runtime", "Navigation", "isMenuOpen", "setIsMenuOpen", "isScrolled", "setIsScrolled", "isHovered", "setIsHovered", "isMobile", "setIsMobile", "isLookbookFilterOpen", "setIsLookbookFilterOpen", "favorites", "useFavorites", "handler", "detail", "location", "useLocation", "isHomePage", "isAdminRoute", "checkMobile", "timer", "navItems", "Home", "Grid3x3", "Camera", "Gift", "Mail", "handleScroll", "handleEscape", "e", "isNavVisible", "showNav", "setShowNav", "lastScrollY", "handleScrollVisibility", "currentScrollY", "isVisible", "isTransparentNav", "navBackgroundClass", "navTextColor", "navIconColor", "navVariants", "sidebarVariants", "listVariants", "itemVariants", "motion", "Menu", "Link", "Heart", "AnimatePresence", "X", "item", "ChevronRight", "Navigation_default", "import_react", "import_jsx_runtime", "InventoryManager", "outOfStockItems", "setOutOfStockItems", "loading", "setLoading", "updatingItems", "setUpdatingItems", "fetchInventory", "items", "api_default", "error", "toggleStock", "id", "nextStatus", "prev", "item", "next", "renderSection", "title", "isOutOfStock", "isUpdating", "OptimizedImage_default", "Loader", "XCircle", "CheckCircle", "Package", "giftOptions_default", "InventoryManager_default", "import_jsx_runtime", "queryClient", "QueryClient", "lazyWithRetry", "componentImport", "pageHasAlreadyBeenForceRefreshed", "component", "error", "HomePage", "CollectionsPage", "ProductListPage", "ProductDetailPage", "LookbookPage", "FashionShowPage", "ContactPage", "CustomizeGiftPage", "FavoritesPage", "AdminDashboard", "AdminLogin", "PrivateRoute", "AdminLayout", "AppointmentManager", "CustomizeGiftManager", "PrivacyPolicyPage", "TermsOfServicePage", "ReturnPolicyPage", "Placeholder", "title", "pageVariants", "Layout", "children", "includeHeader", "includeFooter", "includePadding", "motion", "Navigation_default", "Footer_default", "LenisScroll", "location", "useLocation", "raf", "time", "lenis", "rafId", "Lenis", "AnimatedRoutes", "AnimatePresence", "Routes", "Route", "InventoryManager_default", "MainApp", "usePullToRefresh_default", "QueryClientProvider", "BrowserRouter", "LoadingSpinner_default", "MainApp_default", "import_jsx_runtime", "container", "ReactDOM", "React", "ErrorBoundary_default", "FavoritesProvider", "MainApp_default"]
}
