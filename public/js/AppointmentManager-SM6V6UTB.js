import{a as C}from"./chunk-E7YPDS2R.js";import{a as _}from"./chunk-YFDHNXDR.js";import"./chunk-B37FXFXI.js";import{B as g,F as f,I as h,Q as w,S as N,W as y,d as b,g as x,y as p}from"./chunk-OSE6HXQI.js";import{c as k,d as A}from"./chunk-DIIP6FVD.js";var e=k(A());var j=({appointment:t,onUpdateStatus:l,colors:m})=>{let o={pending:{label:"Pending",color:"text-yellow-400",bg:"bg-yellow-400/10",border:"border-yellow-400/20"},done:{label:"Completed",color:"text-green-400",bg:"bg-green-400/10",border:"border-green-400/20"},cancelled:{label:"Cancelled",color:"text-red-400",bg:"bg-red-400/10",border:"border-red-400/20"}},n=o[t.status]||o.pending,c=i=>{if(!i)return"";let[d]=i.split(":"),s=parseInt(d,10),r=s>=12?"PM":"AM";return s=s%12,s=s||12,`${s}${r}`};return e.default.createElement("div",{className:"p-6 rounded-3xl backdrop-blur-xl bg-black/20 border border-white/10 shadow-lg transition-all duration-300 hover:bg-black/30 hover:border-white/20 group"},e.default.createElement("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 pb-4 mb-4 border-b border-white/5"},e.default.createElement("div",{className:"flex items-center gap-4"},e.default.createElement("div",{className:"h-12 w-12 rounded-full bg-white/5 flex items-center justify-center border border-white/5"},e.default.createElement(N,{className:"w-5 h-5 text-attire-silver group-hover:text-attire-accent transition-colors"})),e.default.createElement("div",null,e.default.createElement("h3",{className:"text-xl font-serif text-white"},t.name),e.default.createElement("p",{className:"text-xs text-attire-silver/60 uppercase tracking-wider font-medium"},t.service))),e.default.createElement("span",{className:`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider border ${n.color} ${n.bg} ${n.border}`},n.label)),e.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6"},e.default.createElement("div",{className:"md:col-span-4 space-y-3"},e.default.createElement("div",{className:"flex items-center text-attire-silver/80 group-hover:text-white transition-colors"},e.default.createElement(g,{className:"w-4 h-4 mr-3 text-attire-silver/40"}),e.default.createElement("a",{href:`mailto:${t.email}`,className:"hover:text-attire-accent hover:underline truncate text-sm transition-colors"},t.email)),e.default.createElement("div",{className:"flex items-center text-attire-silver/80 group-hover:text-white transition-colors"},e.default.createElement(h,{className:"w-4 h-4 mr-3 text-attire-silver/40"}),e.default.createElement("span",{className:"text-sm"},t.phone)),e.default.createElement("div",{className:"flex items-center text-attire-silver/80 pt-3 border-t border-white/5 mt-3"},e.default.createElement(b,{className:"w-4 h-4 mr-3 text-attire-silver/40"}),e.default.createElement("span",{className:"text-sm font-medium"},new Date(t.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})," ",e.default.createElement("span",{className:"text-white/20 mx-1"},"|")," ",c(t.time)))),e.default.createElement("div",{className:"md:col-span-8 space-y-4"},t.message&&e.default.createElement("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5"},e.default.createElement("div",{className:"flex items-start gap-3"},e.default.createElement(f,{className:"w-4 h-4 text-attire-accent mt-1 flex-shrink-0"}),e.default.createElement("div",null,e.default.createElement("p",{className:"text-xs font-bold text-attire-silver/50 uppercase tracking-widest mb-1"},"Request Details"),e.default.createElement("p",{className:"text-sm text-attire-cream italic leading-relaxed"},'"',t.message,'"')))),t.favorite_item_image_url&&t.favorite_item_image_url.length>0&&e.default.createElement("div",null,e.default.createElement("p",{className:"text-xs font-bold text-attire-silver/50 uppercase tracking-widest mb-3"},"Selected Favorites"),e.default.createElement("div",{className:"flex gap-4 overflow-x-auto pb-2 [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]"},t.favorite_item_image_url.map((i,d)=>{let s=typeof i=="object"&&i!==null,r=s?i.image:i,a=s?i.name:`Item ${d+1}`;return e.default.createElement("div",{key:d,className:"flex flex-col items-center min-w-[80px]"},e.default.createElement("div",{className:"h-16 w-16 rounded-lg overflow-hidden border border-white/10 mb-2 relative group/img"},e.default.createElement("img",{src:r,alt:a,className:"w-full h-full object-cover transition-transform duration-500 group-hover/img:scale-110"})),e.default.createElement("p",{className:"text-[10px] text-white text-center font-medium truncate w-full max-w-[80px]",title:a},a))}))))),e.default.createElement("div",{className:"mt-6 pt-4 border-t border-white/5 flex justify-end gap-3"},e.default.createElement("button",{onClick:()=>l(t.id,"done"),disabled:t.status==="done",className:"px-4 py-2 text-xs font-bold uppercase tracking-widest text-green-400 bg-green-400/10 border border-green-400/20 rounded-xl hover:bg-green-400/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2"},e.default.createElement(x,{className:"w-4 h-4"})," Complete"),e.default.createElement("button",{onClick:()=>l(t.id,"cancelled"),disabled:t.status==="cancelled",className:"px-4 py-2 text-xs font-bold uppercase tracking-widest text-red-400 bg-red-400/10 border border-red-400/20 rounded-xl hover:bg-red-400/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2"},e.default.createElement(y,{className:"w-4 h-4"})," Cancel")))},S=()=>{let{colors:t}=(0,e.useContext)(C),{appointments:l,appointmentsLoading:m,fetchAppointments:o,updateAppointmentStatus:n,clearCompletedAppointments:c}=_();(0,e.useEffect)(()=>{o();let r=setInterval(()=>o(!1),6e4);return()=>clearInterval(r)},[o]);let i=async(r,a)=>{try{await n(r,a)}catch{alert("Failed to update status. Please try again.")}};return e.default.createElement("div",{className:"space-y-8"},e.default.createElement("div",{className:"flex justify-between items-end pb-4 border-b border-white/10"},e.default.createElement("div",null,e.default.createElement("h1",{className:"text-4xl font-serif text-white mb-2"},"Appointments"),e.default.createElement("p",{className:"text-attire-silver text-sm"},"Manage styling consultations and visits.")),e.default.createElement("button",{onClick:async()=>{if(window.confirm('Are you sure you want to clear all "done" appointments? This action cannot be undone.'))try{await c()}catch{alert("Failed to clear completed appointments. Please try again.")}},className:"flex items-center px-5 py-2.5 text-xs font-bold uppercase tracking-widest text-attire-silver hover:text-red-400 bg-white/5 hover:bg-red-500/10 border border-white/10 hover:border-red-500/30 rounded-xl transition-all duration-300 group"},e.default.createElement(w,{className:"w-4 h-4 mr-2 opacity-50 group-hover:opacity-100 transition-opacity"}),"Clear History")),m&&l.length===0?e.default.createElement("div",{className:"flex justify-center items-center h-64"},e.default.createElement(p,{className:"animate-spin text-attire-accent",size:48})):l.length===0&&!m?e.default.createElement("div",{className:"text-center py-20 bg-black/20 rounded-3xl border border-white/5"},e.default.createElement("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4"},e.default.createElement(b,{className:"text-attire-silver/30"})),e.default.createElement("p",{className:"text-attire-silver/60"},"No pending appointments.")):e.default.createElement("div",{className:"space-y-6"},l.map(r=>{let a=[];try{if(typeof r.favorite_item_image_url=="string"){let u=JSON.parse(r.favorite_item_image_url);a=Array.isArray(u)?u:[]}else Array.isArray(r.favorite_item_image_url)&&(a=r.favorite_item_image_url)}catch{}let v={...r,favorite_item_image_url:a};return e.default.createElement(j,{key:r.id,appointment:v,onUpdateStatus:i,colors:t})})))},D=S;export{D as default};
//# sourceMappingURL=AppointmentManager-SM6V6UTB.js.map
