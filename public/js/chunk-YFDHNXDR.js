import{a as o}from"./chunk-B37FXFXI.js";import{c as B,d as b}from"./chunk-DIIP6FVD.js";var s=B(b());var h=(0,s.createContext)(),j=()=>(0,s.useContext)(h),z=({children:y})=>{let[d,i]=(0,s.useState)([]),[u,v]=(0,s.useState)(!1),[q,m]=(0,s.useState)(!1),[f,c]=(0,s.useState)([]),[l,w]=(0,s.useState)(!1),[A,g]=(0,s.useState)(!1),[R,L]=(0,s.useState)({appointments:0,gifts:0}),x=(0,s.useCallback)(async(t=!1)=>{if(u&&!t){G();return}m(!0);try{let e=await o.get("/api/v1/admin/appointments");i(e.data),v(!0),p({appointments:e.data.length})}catch(e){console.error("Error fetching appointments:",e)}finally{m(!1)}},[u]),G=async()=>{try{let t=await o.get("/api/v1/admin/appointments");i(t.data),p({appointments:t.data.length})}catch(t){console.error("Error refreshing appointments:",t)}},C=async(t,e)=>{let n=[...d];i(a=>a.map(r=>r.id===t?{...r,status:e}:r));try{await o.patch(`/api/v1/admin/appointments/${t}/status`,{status:e})}catch(a){throw console.error("Failed to update status:",a),i(n),a}},S=async()=>{let t=[...d];i(e=>e.filter(n=>n.status!=="done"));try{await o.post("/api/v1/admin/appointments/clear-completed")}catch(e){throw i(t),e}},E=(0,s.useCallback)(async(t=!1)=>{if(l&&!t){k();return}g(!0);try{let e=await o.get("/api/v1/gift-requests");c(e.data),w(!0),p({gifts:e.data.length})}catch(e){console.error("Error fetching gift requests:",e)}finally{g(!1)}},[l]),k=async()=>{try{let t=await o.get("/api/v1/gift-requests");c(t.data),p({gifts:t.data.length})}catch(t){console.error("Error refreshing gift requests:",t)}},P=async(t,e)=>{let n=[...f];c(a=>a.map(r=>r.id===t?{...r,status:e}:r));try{await o.patch(`/api/v1/gift-requests/${t}/status`,{status:e})}catch(a){throw c(n),a}},$=async t=>{let e=[...f];c(n=>n.filter(a=>a.id!==t));try{await o.delete(`/api/v1/gift-requests/${t}`)}catch(n){throw c(e),n}},p=t=>{L(e=>({...e,...t}))};return s.default.createElement(h.Provider,{value:{appointments:d,appointmentsLoading:q,fetchAppointments:x,updateAppointmentStatus:C,clearCompletedAppointments:S,giftRequests:f,giftRequestsLoading:A,fetchGiftRequests:E,updateGiftRequestStatus:P,deleteGiftRequest:$,stats:R}},y)};export{j as a,z as b};
//# sourceMappingURL=chunk-YFDHNXDR.js.map
